(self.webpackChunkname=self.webpackChunkname||[]).push([[735],{14628:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var n=a(67294),r=a(45697),l=a.n(r),o=a(94184),i=a.n(o),s=a(50455),c=a(91637),m=a(63391);const p=(e,t,a)=>n=>a(n.target.checked?e:t),d=e=>{var{checked:t,className:a,error:r,falseValue:l,fieldMsg:o,label:c,onBlur:d,onChange:u,trueValue:h,value:b,info:v}=e,Z=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a}(e,["checked","className","error","falseValue","fieldMsg","label","onBlur","onChange","trueValue","value","info"]);return n.createElement("div",{className:i()(s.Z["form-group"],{[s.Z["has-danger"]]:!!r})},n.createElement("div",{className:i()(s.Z["custom-control"],s.Z["custom-checkbox orange"])},n.createElement("input",Object.assign({},(0,m.X)(Z),{"aria-checked":t,checked:b,className:s.Z["custom-control-input"],defaultChecked:b===h,focusin:d&&p(h,l,d),type:"checkbox",onChange:u&&p(h,l,u)})),n.createElement("label",{className:s.Z["custom-control-label"],htmlFor:Z.id},c,v)),r?n.createElement("div",{className:s.Z["invalid-feedback"]},n.createElement("div",{className:i()(s.Z.field__msg,s.Z["field__msg--error"])},r)):null)};d.displayName="CheckboxField",d.propTypes={className:l().string,error:l().element,falseValue:l().any,id:l().string.isRequired,label:l().string,trueValue:l().any,value:l().bool},d.defaultProps={className:s.Z.field,falseValue:!1,trueValue:!0};const u=(0,c.Z)(d)},83764:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>C});var n=a(67294),r=a(14494),l=a(65399),o=a(15958),i=a(94184),s=a.n(i),c=a(91768),m=a(50455),p=a(9955),d=a(89735),u=a(1557),h=a(14628),b=a(85126);class v extends n.Component{constructor(){super(...arguments),this.state={initialized:!1,inputTypeManual:!0},this.initializeFromRest=e=>{this.props.change("inputTypeManual",!e),this.setState({initialized:!0,inputTypeManual:!e})},this.UNSAFE_componentWillReceiveProps=e=>{const{waitList:t}=e,{initialized:a}=this.state;t&&!a&&this.initializeFromRest(t.length>0),this.setState({centreon_folder:"/centreon/",initialized:!0})},this.handleChange=(e,t)=>{const{waitList:a,change:n}=this.props;n("server_name",a.find((e=>e.ip===t)).server_name)}}onManualInputChanged(e){this.setState({inputTypeManual:e})}render(){const{error:e,handleSubmit:t,onSubmit:a,waitList:r,t:o}=this.props,{inputTypeManual:i}=this.state;return n.createElement("div",{className:m.Z["form-wrapper"]},n.createElement("div",{className:m.Z["form-inner"]},n.createElement("div",{className:m.Z["form-heading"]},n.createElement("h2",{className:s()(m.Z["form-title"],m.Z["mb-2"])},o("Remote Server Configuration"))),n.createElement("form",{autoComplete:"off",onSubmit:t(a)},n.createElement(l.Z,{checked:i,component:u.Z,label:o("Create new Remote Server"),name:"inputTypeManual",onChange:()=>{this.onManualInputChanged(!0)}}),i?n.createElement("div",null,n.createElement(l.Z,{component:p.Z,label:`${o("Server Name")}:`,name:"server_name",placeholder:"",type:"text",validate:(0,b.u)(o)}),n.createElement(l.Z,{component:p.Z,label:`${o("Server IP address")}:`,name:"server_ip",placeholder:"",type:"text",validate:(0,b.u)(o)}),n.createElement(l.Z,{component:p.Z,label:`${o("Database username")}:`,name:"db_user",placeholder:"",type:"text",validate:(0,b.u)(o)}),n.createElement(l.Z,{component:p.Z,label:`${o("Database password")}:`,name:"db_password",placeholder:"",type:"password",validate:(0,b.u)(o)}),n.createElement(l.Z,{component:p.Z,label:`${o("Centreon Central IP address, as seen by this server")}:`,name:"centreon_central_ip",placeholder:"",type:"text",validate:(0,b.u)(o)}),n.createElement(l.Z,{component:p.Z,label:`${o("Centreon Web Folder on Remote")}:`,name:"centreon_folder",placeholder:"/centreon/",type:"text",validate:(0,b.u)(o)}),n.createElement(l.Z,{component:h.Z,label:o("Do not check SSL certificate validation"),name:"no_check_certificate"}),n.createElement(l.Z,{component:h.Z,label:o("Do not use configured proxy to connect to this server"),name:"no_proxy"})):null,n.createElement(l.Z,{checked:!i,component:u.Z,label:`${o("Select a Remote Server")}:`,name:"inputTypeManual",onClick:()=>{this.onManualInputChanged(!1)}}),i?null:n.createElement("div",null,r?n.createElement(l.Z,{required:!0,component:d.Z,label:`${o("Select Pending Remote Links")}:`,name:"server_ip",options:[{disabled:!0,selected:!0,text:o("Select IP"),value:""}].concat(r.map((e=>({text:e.ip,value:e.ip})))),onChange:this.handleChange}):null,n.createElement(l.Z,{component:p.Z,label:`${o("Server Name")}:`,name:"server_name",placeholder:"",type:"text",validate:(0,b.u)(o)}),n.createElement(l.Z,{component:p.Z,label:`${o("Database username")}:`,name:"db_user",placeholder:"",type:"text",validate:(0,b.u)(o)}),n.createElement(l.Z,{component:p.Z,label:`${o("Database password")}:`,name:"db_password",placeholder:"",type:"password",validate:(0,b.u)(o)}),n.createElement(l.Z,{component:p.Z,label:`${o("Centreon Central IP address, as seen by this server")}:`,name:"centreon_central_ip",placeholder:"",type:"text",validate:(0,b.u)(o)}),n.createElement(l.Z,{component:p.Z,label:`${o("Centreon Web Folder on Remote")}:`,name:"centreon_folder",placeholder:"/centreon/",type:"text",validate:(0,b.u)(o)}),n.createElement(l.Z,{component:h.Z,label:o("Do not check SSL certificate validation"),name:"no_check_certificate"}),n.createElement(l.Z,{component:h.Z,label:o("Do not use configured proxy to connect to this server"),name:"no_proxy"})),n.createElement("div",{className:m.Z["form-buttons"]},n.createElement("button",{className:m.Z.button,type:"submit"},o("Next"))),e?n.createElement("div",{className:m.Z["error-block"]},e.message):null)))}}const Z=(0,c.Z)()((0,o.Z)({destroyOnUnmount:!1,enableReinitialize:!0,form:"RemoteServerFormStepOne",keepDirtyOnReinitialize:!0})(v));var f=a(93784),y=a(91395),g=a(40346),E=a(66791),S=a(75481);class _ extends n.Component{constructor(){super(...arguments),this.links=[{active:!0,number:1,path:g.Z.serverConfigurationWizard,prevActive:!0},{active:!0,number:2,path:g.Z.remoteServerStep1},{active:!1,number:3},{active:!1,number:4}],this.state={waitList:null},this.wizardFormWaitListApi=(0,E.Z)("internal.php?object=centreon_configuration_remote&action=getWaitList"),this.getWaitList=()=>{this.wizardFormWaitListApi.post().then((e=>{this.setState({waitList:e.data})})).catch((()=>{this.setState({waitList:[]})}))},this.componentDidMount=()=>{this.getWaitList()},this.handleSubmit=e=>{const{history:t,setPollerWizard:a}=this.props;a(e),t.push(g.Z.remoteServerStep2)}}render(){const{links:e}=this,{pollerData:t}=this.props,{waitList:a}=this.state;return n.createElement(S.Z,null,n.createElement(y.Z,{links:e}),n.createElement(Z,{initialValues:Object.assign(Object.assign({},t),{centreon_folder:"/centreon/"}),waitList:a,onSubmit:this.handleSubmit.bind(this)}))}}const k={setPollerWizard:f.b},C=(0,r.connect)((({pollerForm:e})=>({pollerData:e})),k)(_)}}]);