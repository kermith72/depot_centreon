(self.webpackChunkname=self.webpackChunkname||[]).push([[826],{48753:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>y});var a=n(67294),i=n(14494),l=n(65399),r=n(15958),s=n(91768),o=n(50455),c=n(9955),m=n(1557),p=n(89735),u=n(85126);class h extends a.Component{constructor(){super(...arguments),this.state={initialized:!1,inputTypeManual:!0},this.initializeFromRest=e=>{const{change:t}=this.props;t("inputTypeManual",!e),this.setState({initialized:!0,inputTypeManual:!e})},this.UNSAFE_componentWillReceiveProps=e=>{const{waitList:t}=e,{initialized:n}=this.state;t&&!n&&this.initializeFromRest(t.length>0),this.setState({initialized:!0})},this.handleChange=(e,t)=>{const{waitList:n,change:a}=this.props;a("server_name",n.find((e=>e.ip===t)).server_name)}}onManualInputChanged(e){this.setState({inputTypeManual:e})}render(){const{error:e,handleSubmit:t,onSubmit:n,waitList:i,t:r}=this.props,{inputTypeManual:s}=this.state;return a.createElement("div",{className:o.Z["form-wrapper"]},a.createElement("div",{className:o.Z["form-inner"]},a.createElement("div",{className:o.Z["form-heading"]},a.createElement("h2",{className:o.Z["form-title"]},r("Server Configuration"))),a.createElement("form",{autoComplete:"off",onSubmit:t(n)},a.createElement(l.Z,{checked:s,component:m.Z,label:r("Create new Poller"),name:"inputTypeManual",onChange:()=>{this.onManualInputChanged(!0)}}),s?a.createElement("div",null,a.createElement(l.Z,{component:c.Z,label:`${r("Server Name")}:`,name:"server_name",placeholder:"",type:"text",validate:(0,u.u)(r)}),a.createElement(l.Z,{component:c.Z,label:`${r("Server IP address")}:`,name:"server_ip",placeholder:"",type:"text",validate:(0,u.u)(r)}),a.createElement(l.Z,{component:c.Z,label:`${r("Centreon Central IP address, as seen by this server")}:`,name:"centreon_central_ip",placeholder:"",type:"text",validate:(0,u.u)(r)})):null,a.createElement(l.Z,{checked:!s,component:m.Z,label:`${r("Select a Poller")}:`,name:"inputTypeManual",onClick:()=>{this.onManualInputChanged(!1)}}),s?null:a.createElement("div",null,i?a.createElement(l.Z,{required:!0,component:p.Z,label:`${r("Select Pending Poller IP")}:`,name:"server_ip",options:[{disabled:!0,selected:!0,text:r("Select IP"),value:""}].concat(i.map((e=>({text:e.ip,value:e.ip})))),onChange:this.handleChange}):null,a.createElement(l.Z,{component:c.Z,label:`${r("Server Name")}:`,name:"server_name",placeholder:"",type:"text",validate:(0,u.u)(r)}),a.createElement(l.Z,{component:c.Z,label:`${r("Server IP address")}:`,name:"server_ip",placeholder:"",type:"text",validate:(0,u.u)(r)}),a.createElement(l.Z,{component:c.Z,label:`${r("Centreon Central IP address, as seen by this server")}:`,name:"centreon_central_ip",placeholder:"",type:"text",validate:(0,u.u)(r)})),a.createElement("div",{className:o.Z["form-buttons"]},a.createElement("button",{className:o.Z.button,type:"submit"},r("Next"))),e?a.createElement("div",{className:o.Z["error-block"]},e.message):null)))}}const d=(0,s.Z)()((0,r.Z)({destroyOnUnmount:!1,enableReinitialize:!0,form:"PollerFormStepOne",keepDirtyOnReinitialize:!0})(h));var v=n(93784),b=n(91395),Z=n(40346),E=n(75481),S=n(66791);class C extends a.Component{constructor(){super(...arguments),this.links=[{active:!0,number:1,path:Z.Z.serverConfigurationWizard,prevActive:!0},{active:!0,number:2,path:Z.Z.pollerStep1},{active:!1,number:3},{active:!1,number:4}],this.state={error:null,waitList:null},this.wizardFormWaitListApi=(0,S.Z)("internal.php?object=centreon_configuration_remote&action=getPollerWaitList"),this.getWaitList=()=>{this.wizardFormWaitListApi.post().then((e=>{this.setState({waitList:e.data})})).catch((()=>{this.setState({waitList:[]})}))},this.componentDidMount=()=>{this.getWaitList()},this.handleSubmit=e=>{const{history:t,setPollerWizard:n}=this.props;n(e),t.push(Z.Z.pollerStep2)}}render(){const{links:e}=this,{waitList:t}=this.state;return a.createElement(E.Z,null,a.createElement(b.Z,{links:e}),a.createElement(d,{initialValues:{},waitList:t,onSubmit:this.handleSubmit.bind(this)}))}}const g={setPollerWizard:v.b},y=(0,i.connect)((({pollerForm:e})=>({pollerData:e})),g)(C)}}]);