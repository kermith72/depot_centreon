(self.webpackChunkname=self.webpackChunkname||[]).push([[621],{3621:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>_m});var a=n(67294),r=n(45596),i=n(58332),l=n(14796),o=n(81737);const s=a.createContext(void 0),c=()=>a.useContext(s),m=s;var d=n(16946),u=n(76937),p=n(61920),g=n(90178),h=n(26793),Z=n(41120),v=n(41749),E=n(282),f=n(80535),b=n(73304);const y="Acknowledge",C="Acknowledged by",w="Acknowledge services attached to host",S="Author",k="Comment",T="Cancel",x="Critical",P="Down",O="Duration",D="End time",M="From",N="Start date",_="End date",R="Fixed",I="Graph",F="Downtime",$="Set downtime",A="Set downtime on services attached to host",j="Check",L="Last check",H="Notify",G="Performance data",z="Monitoring server",q="Required",V="Resource",W="Search",U="Status",Q="Tries",B="Refresh",K="will display resources with host name starting by",Y="Start time",J="State",X="To",ee="Unreachable",te="Unknown",ne="Oops, something went wrong",ae="Warning",re="Save",ie="New filter",le="Name",oe="Edit filters",se="Delete",ce="Event",me="Acknowledgement",de="Notification",ue="Configure",pe="Copy the link to this resource",ge="Disacknowledge",he="Disacknowledge services attached to hosts",Ze="Submit a status",ve="Output",Ee="FQDN / Address",fe="Alias",be="Add a comment",ye="Graph options",Ce="Action not permitted";var we=n(17812),Se=n(10046),ke=n(89659),Te=n(868),xe=n(82369),Pe=n(35736);const Oe=(0,Z.Z)((e=>({buttonClose:{position:"absolute",right:e.spacing(.5)},tooltip:{backgroundColor:e.palette.common.white,boxShadow:e.shadows[3],color:e.palette.text.primary,fontSize:e.typography.pxToRem(12),maxWidth:500,padding:e.spacing(1,2,1,1)}}))),De=["h.name","h.alias","h.address","s.description","information"],Me=({onClose:e})=>{const t=Oe(),{t:n}=(0,h.$)();return a.createElement(a.Fragment,null,a.createElement(we.Z,{className:t.buttonClose,size:"small",onClick:e},a.createElement(Pe.Z,{fontSize:"small"})),a.createElement(Se.Z,{padding:1},a.createElement("p",null,`${n("This search bar will search matching occurences you type, contained in: host name or alias or address or service description")}. ${n("You can use regular expression syntax to retrieve more relevant results")}.`),a.createElement("p",null,`${n("It's possible to specify the criteria you precisely want to search, by using the following syntax:")} ${De.join(":, ")}:.`),a.createElement("p",null,n("Some examples:")),a.createElement("ul",null,a.createElement("li",null,a.createElement("b",null,"h.name:^FR20"),` ${n(K)} "FR20"`),a.createElement("li",null,a.createElement("b",null,"s.description:ens192$"),` ${n("will display resources with service description finishing by")} "ens192"`),a.createElement("li",null,a.createElement("b",null,"h.alias:prod"),` ${n("will display all resources with host having alias containing")} "prod"`),a.createElement("li",null,a.createElement("b",null,"h.address:^((?!production).)*$"),` ${n("will display resources having FQDN that doesn't contain")} "production"`),a.createElement("li",null,a.createElement("b",null,"h.name:^FR20 h.alias:prod"),` ${n(K)} "FR20" ${n("and host alias containing")} "prod"`)),a.createElement("i",null,a.createElement("b",null,`${n("Tips")}: `),`${n("get some help while creating your regular expression query at")} `,a.createElement(ke.Z,{href:"https://regex101.com",rel:"noopener noreferrer",target:"_blank"},"regex101.com"))))},Ne=()=>{const e=Oe(),{t}=(0,h.$)(),[n,r]=a.useState(!1);return a.createElement(Te.ZP,{interactive:!0,classes:{tooltip:e.tooltip},open:n,title:a.createElement(Me,{onClose:()=>{r(!1)}})},a.createElement(we.Z,{"aria-label":t("Search help"),size:"small",onClick:()=>{r(!n)}},a.createElement(xe.Z,null)))};var _e=n(77584),Re=n(29278),Ie=n(14836),Fe=n(59045),$e=n(26932),Ae=n(44593),je=n(85639),Le=n(95477),He=n(9969),Ge=n(33837),ze=n(28804),qe=n(17366),Ve=n(66770),We=n(49515),Ue=n(11063);const Qe="./api/beta/monitoring/resources",Be="./api/beta/users/filters/events-view",Ke=e=>()=>{return(0,Ue.Yu)(e)((t={limit:100,page:1},(0,We.Z)({baseEndpoint:Be,parameters:t})));var t},Ye=e=>t=>(0,Ue.qC)(e)({data:t,endpoint:Be}),Je=e=>t=>(0,Ue.fP)(e)({data:t.filter,endpoint:`${Be}/${t.id}`}),Xe=e=>t=>(0,Ue.B6)(e)({data:{order:t.order},endpoint:`${Be}/${t.id}`}),et=e=>t=>(0,Ue.SR)(e)(`${Be}/${t.id}`),tt=({memoProps:e,Component:t})=>a.memo(t,((t,n)=>(0,Re.Z)((0,g.Z)(e,t),(0,g.Z)(e,n))));var nt=n(3564),at=n(19501),rt=n(1987),it=n(99438),lt=n(69381);const ot=({filter:e,onCreate:t,open:n,onCancel:r})=>{const{t:i}=(0,h.$)(),{sendRequest:l,sending:o}=(0,Ge.Z)({request:Ye}),s=(0,nt.TA)({initialValues:{name:""},onSubmit:n=>{l({criterias:e.criterias,name:n.name}).then(t).catch((e=>{s.setFieldError("name",(0,rt.Z)(["response","data","message"],e))}))},validationSchema:at.Ry().shape({name:at.Z_().required(q)})}),c=(0,$e.Z)((0,Fe.Z)(s.isValid),(0,Fe.Z)(s.dirty));return a.createElement(it.Z,{confirmDisabled:c,labelCancel:i(T),labelConfirm:i(re),labelTitle:i(ie),open:n,submitting:o,onCancel:r,onConfirm:s.submitForm},a.createElement(lt.Z,{autoFocus:!0,ariaLabel:i(le),error:s.errors.name,label:i(le),value:s.values.name,onChange:s.handleChange("name"),onKeyDown:e=>{13===e.keyCode&&s.submitForm()}}))},st=(0,Z.Z)((e=>({save:{alignItems:"center",display:"grid",gridAutoFlow:"column",gridGap:e.spacing(2)}}))),ct=tt({Component:({filter:e,updatedFilter:t,setFilter:n,loadCustomFilters:r,customFilters:i,setEditPanelOpen:l,filters:o})=>{const s=st(),{t:c}=(0,h.$)(),[m,g]=a.useState(null),[Z,v]=a.useState(!1),{sendRequest:E,sending:f}=(0,Ge.Z)({request:Je}),{showMessage:b}=(0,ze.Z)(),y=()=>{g(null)},C=()=>{v(!1)},w=e=>{C(),r().then((()=>{n(e)}))},S=()=>{const n=(0,p.Z)((0,d.Z)("id",e.id),o);return!(0,Re.Z)(n,t)},k=""===e.id,T=(0,Ie.Z)(S(),(0,Fe.Z)(k)),x=(0,$e.Z)(S(),k);return a.createElement(a.Fragment,null,a.createElement(Ve.Z,{title:c("Save filter"),onClick:e=>{g(e.currentTarget)}},a.createElement(He.Z,null)),a.createElement(Ae.Z,{keepMounted:!0,anchorEl:m,open:Boolean(m),onClose:y},a.createElement(je.Z,{disabled:!x,onClick:()=>{y(),v(!0)}},c("Save as new")),a.createElement(je.Z,{disabled:!T,onClick:()=>{E({filter:(0,_e.Z)(["id"],t),id:t.id}).then((e=>{y(),b({message:c("Filter saved"),severity:qe.Z.success}),w((0,_e.Z)(["order"],e))}))}},a.createElement("div",{className:s.save},a.createElement("span",null,c(re)),f&&a.createElement(Le.Z,{size:15}))),a.createElement(je.Z,{disabled:(0,u.Z)(i),onClick:()=>{l(!0),y()}},c(oe))),Z&&a.createElement(ot,{open:!0,filter:t,onCancel:C,onCreate:e=>{b({message:c("Filter created"),severity:qe.Z.success}),w((0,_e.Z)(["order"],e))}}))},memoProps:["filter","updatedFilter","customFilters","filters"]}),mt=()=>{const{filter:e,updatedFilter:t,setFilter:n,loadCustomFilters:r,customFilters:i,setEditPanelOpen:l,filters:o}=c();return a.createElement(ct,{customFilters:i,filter:e,filters:o,loadCustomFilters:r,setEditPanelOpen:l,setFilter:n,updatedFilter:t})};var dt=n(58365);const ut=()=>a.createElement(dt.Z,{height:36,style:{transform:"none"},width:200});var pt=n(45784),gt=n(15427);const ht=({resourceTypes:e=[],states:t=[],statuses:n=[],hostGroups:a=[],serviceGroups:r=[]}={hostGroups:[],resourceTypes:[],serviceGroups:[],states:[],statuses:[]})=>[{name:"resource_types",object_type:null,type:"multi_select",value:e},{name:"states",object_type:null,type:"multi_select",value:t},{name:"statuses",object_type:null,type:"multi_select",value:n},{name:"host_groups",object_type:"host_groups",type:"multi_select",value:a},{name:"service_groups",object_type:"service_groups",type:"multi_select",value:r},{name:"search",object_type:null,type:"text",value:""},{name:"sort",object_type:null,type:"array",value:["status_severity_code","asc"]}],Zt=ht,vt={CRITICAL:x,DOWN:P,OK:"Ok",PENDING:"Pending",UNKNOWN:te,UNREACHABLE:ee,UP:"Up",WARNING:ae,acknowledged:"Acknowledged",host:"Host",in_downtime:"In downtime",metaservice:"Meta service",service:"Service",unhandled_problems:"Unhandled"},Et="unhandled_problems",ft={id:Et,name:vt[Et]},bt=[ft,{id:"acknowledged",name:vt.acknowledged},{id:"in_downtime",name:vt.in_downtime}],yt=[{id:"host",name:vt.host},{id:"service",name:vt.service},{id:"metaservice",name:vt.metaservice}],Ct={id:"WARNING",name:vt.WARNING},wt={id:"DOWN",name:vt.DOWN},St={id:"CRITICAL",name:vt.CRITICAL},kt={id:"UNKNOWN",name:vt.UNKNOWN},Tt=[{id:"OK",name:vt.OK},{id:"UP",name:vt.UP},Ct,wt,St,{id:"UNREACHABLE",name:vt.UNREACHABLE},kt,{id:"PENDING",name:vt.PENDING}];var xt;!function(e){e.hostGroups="host_groups",e.monitoringServers="monitoring_servers",e.resourceTypes="resource_types",e.serviceGroups="service_groups",e.states="states",e.statuses="statuses"}(xt||(xt={}));const Pt={[xt.hostGroups]:{buildAutocompleteEndpoint:e=>(0,We.Z)({baseEndpoint:"./api/beta/monitoring/hostgroups",parameters:e}),label:"Host group",sortId:3},[xt.monitoringServers]:{autocompleteSearch:{conditions:[{field:"running",value:!0}]},buildAutocompleteEndpoint:e=>(0,We.Z)({baseEndpoint:"./api/beta/monitoring/servers",parameters:e}),label:z,sortId:5},[xt.resourceTypes]:{label:V,options:yt,sortId:0},[xt.serviceGroups]:{buildAutocompleteEndpoint:e=>(0,We.Z)({baseEndpoint:"./api/beta/monitoring/servicegroups",parameters:e}),label:"Service group",sortId:4},[xt.states]:{label:J,options:bt,sortId:1},[xt.statuses]:{label:U,options:Tt,sortId:2}},Ot={criterias:Zt(),id:"all",name:"All"},Dt={id:"",name:ie},Mt={criterias:Zt({states:[ft],statuses:[Ct,wt,St,kt]}),id:"unhandled_problems",name:"Unhandled problems"},Nt={criterias:Zt({statuses:[Ct,wt,St,kt]}),id:"resource_problems",name:"Resource problems"},_t={all:Ot,resource_problems:Nt,unhandled_problems:Mt},Rt=({id:e})=>(0,r.Z)(_t[e]);var It=n(24088),Ft=n(21273),$t=n(18865),At=n(94373),jt=n(22338),Lt=n(68981),Ht=n(30601),Gt=n(71026),zt=n(72402),qt=n(76220),Vt=n(80638);const Wt=e=>(0,It.Z)(e),Ut=(0,Ft.Z)($t.Z),Qt=e=>(0,At.Z)(Ut(e),"name"),Bt=({filter:e,setFilter:t})=>{const{t:n}=(0,h.$)(),i=(0,jt.Z)(Wt,(0,Lt.Z)((([e,{label:t}])=>({id:e,name:n(t)}))))(Pt),l=e.criterias.filter((({name:e})=>!(0,r.Z)(Pt[e]))).map((({name:e})=>({id:e,name:n(Pt[e].label)})));return a.createElement(Vt.Z,{icon:a.createElement(qt.Z,null),options:i,popperPlacement:"bottom-start",title:n("Select criterias"),value:l,onChange:n=>{const{criterias:a}=e,i=(0,Lt.Z)((0,Ht.Z)("id"),n),l=(0,jt.Z)((0,Lt.Z)((0,Ht.Z)("name")),(0,Gt.Z)((e=>(0,r.Z)(Pt[e]))))(e.criterias),o=(0,zt.Z)(i,l),s=(0,zt.Z)(l,i),c=(0,Gt.Z)(Qt(s),a),m=[...ht(),{name:"monitoring_servers",object_type:"monitoring_servers",type:"multi_select",value:[]}].filter(Qt(o)).map((e=>Object.assign(Object.assign({},e),{value:[]})));t(Object.assign(Object.assign({},e),{criterias:[...c,...m],id:"",name:ie}))},onReset:()=>{t(Ot)}})},Kt=()=>{const{filter:e,setFilter:t}=c();return(0,gt.Z)({Component:a.createElement(Bt,{filter:e,setFilter:t}),memoProps:[e]})};var Yt=n(24969),Jt=n(52082);const Xt=({name:e,value:t,parentWidth:n,setCriteriaAndNewFilter:i})=>{const{t:l}=(0,h.$)(),o=ln(),s=n<1e3?1:2,c=e=>e.map((e=>({id:e.id,name:l(e.name)}))),m=t=>{i({name:e,value:t})},{label:d,options:u,buildAutocompleteEndpoint:p,autocompleteSearch:g}=Pt[e],Z={className:o.field,label:l(d),limitTags:s,openText:`${l("Open")} ${l(d)}`,placeholder:l(d),search:g};if((0,r.Z)(u)){const e=({search:e,page:t})=>p({limit:10,page:t,search:e});return a.createElement(Yt.Z,Object.assign({},Z,{field:"name",getEndpoint:e,value:t,onChange:(e,t)=>{m(t)}}))}const v=c(t),E=c(u);return a.createElement(Jt.Z,Object.assign({},Z,{options:E,value:v,onChange:(e,t)=>{m((e=>e.map((({id:e})=>({id:e,name:vt[e]}))))(t))}}))},en=({value:e,name:t,parentWidth:n})=>{const{setCriteriaAndNewFilter:r,getMultiSelectCriterias:i,nextSearch:l}=c();return(0,gt.Z)({Component:a.createElement(Xt,{name:t,parentWidth:n,setCriteriaAndNewFilter:r,value:e}),memoProps:[e,t,n,i(),l]})},tn=({setFilter:e,setNextSearch:t,criterias:n})=>{const{t:r}=(0,h.$)(),i=()=>{e(Ot),t("")};return a.createElement(pt.Z,null,(({width:e})=>a.createElement(v.Z,{container:!0,alignItems:"center",spacing:1},a.createElement(v.Z,{item:!0},a.createElement(Kt,null)),n.map((({name:t,value:n})=>a.createElement(v.Z,{item:!0,key:t},a.createElement(en,{name:t,parentWidth:e,value:n})))),a.createElement(v.Z,{item:!0},a.createElement(E.Z,{color:"primary",size:"small",onClick:i},r("Clear"))))))},nn=()=>{const{setFilter:e,setNextSearch:t,getMultiSelectCriterias:n}=c(),r=n();return(0,gt.Z)({Component:a.createElement(tn,{criterias:r,setFilter:e,setNextSearch:t}),memoProps:[r]})};var an=n(83813);const rn=tt({Component:({options:e,selectedOptionId:t,onChange:n,ariaLabel:r,className:i})=>a.createElement(an.Z,{"aria-label":r,className:i,options:e,selectedOptionId:t,onChange:n}),memoProps:["options","selectedOptionId"]}),ln=(0,Z.Z)((e=>({criterias:{marginLeft:36},field:{minWidth:155},filterLineLabel:{textAlign:"center",width:60},filterSelect:{width:200},saveFilter:{alignItems:"center",display:"flex",marginRight:e.spacing(1)},searchField:{width:375}}))),on=()=>{const e=ln(),{t}=(0,h.$)(),{filter:n,setFilter:r,nextSearch:i,setNextSearch:l,customFilters:o,customFiltersLoading:s,setCriteria:m,setNewFilter:Z,filterExpanded:y,toggleFilterExpanded:C}=c(),w=[n,i,o,s],S=()=>{m({name:"search",value:i})},k=[Mt,Nt,Ot].map((({id:e,name:n})=>({id:e,name:t(n)}))),T=(0,u.Z)(o)?[]:[{id:"my_filters",name:t("My filters"),type:"header"},...o],x=[{id:"",name:t(ie)},...k,...T],P=(0,p.Z)((0,d.Z)("id",n.id),x);return a.createElement(f.s,{expandLabel:"Show criterias filters",expandableFilters:a.createElement(nn,null),expanded:y,filters:a.createElement(a.Fragment,null,a.createElement("div",{className:e.saveFilter},a.createElement(mt,null)),a.createElement(v.Z,{container:!0,alignItems:"center",spacing:1},a.createElement(v.Z,{item:!0},s?a.createElement(ut,null):a.createElement(rn,{ariaLabel:t("State filter"),className:e.filterSelect,options:x.map((0,g.Z)(["id","name","type"])),selectedOptionId:P?n.id:"",onChange:e=>{const t=e.target.value,n=_t[t]||(null==o?void 0:o.find((0,d.Z)("id",t)));r(n),l(n.criterias.find((0,d.Z)("name","search")).value)}})),a.createElement(v.Z,{item:!0},a.createElement(b.Z,{EndAdornment:Ne,placeholder:t(W),value:i||"",onChange:e=>{l(e.target.value),Z()},onKeyDown:e=>{13===e.keyCode&&S()}})),a.createElement(v.Z,{item:!0},a.createElement(E.Z,{color:"primary",size:"small",variant:"contained",onClick:S},t(W))))),memoProps:w,onExpand:C})};var sn,cn,mn=n(8920),dn=n(59693),un=n(89937),pn=n(96531),gn=n(11476),hn=n(22318),Zn=n(87239),vn=n(2302),En=n(92103),fn=n(62087);function bn(){return(bn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function yn(e){return a.createElement("svg",bn({xmlns:"http://www.w3.org/2000/svg",width:24,height:24},e),sn||(sn=a.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),cn||(cn=a.createElement("path",{d:"M8.6 6.149a1.692 1.692 0 10-1.692-1.692A1.692 1.692 0 008.6 6.149zM18.76 13.224a1.05 1.05 0 00-.968-.647s-2.067-.275-2.68.125a2.464 2.464 0 00-.644.8l-3.454-.547c-.265-.874-1.4-4.183-1.4-4.183l-.846-1.353a1.743 1.743 0 00-1.438-.846 4.571 4.571 0 00-.677.084l-4.4 1.867V12.5h.241l2.222.352-1.61 8.107h1.777l1.522-6.768 1.777 1.692v5.076h1.692v-6.345l-1.19-1.135 5.428.859-3.084 6.815 10.976-.11zM8.554 10.613s.577 1.356.88 2.089l-1.259-.2zm-4.606 1.22V9.621l1.522-.592-.586 2.952z"})))}const Cn=e=>a.createElement(fn.Z,Object.assign({component:yn},e)),wn=(0,Z.Z)((e=>({chip:({color:t})=>Object.assign({height:e.spacing(2.5),width:e.spacing(2.5)},t&&{color:t})}))),Sn=({icon:e,color:t})=>{const n=wn({color:t});return a.createElement("div",{className:`${n.chip}`},e)},kn=()=>{const e=(0,mn.Z)();return a.createElement(Sn,{color:e.palette.action.inDowntime,icon:a.createElement(Cn,{fontSize:"small"})})};var Tn=n(3646);const xn=()=>{const e=(0,mn.Z)();return a.createElement(Sn,{color:e.palette.action.acknowledged,icon:a.createElement(Tn.Z,{fontSize:"small"})})};var Pn=n(79895);const On=(0,Z.Z)((e=>({content:{padding:e.spacing(1,2,2,2)}}))),Dn=({children:e,className:t})=>{const n=On();return a.createElement(Pn.Z,{className:t},a.createElement("div",{className:n.content},e))};var Mn=n(19324),Nn=n(55517),_n=n(51907),Rn=n(88872);const In=(0,Z.Z)((e=>{const t=t=>(0,Rn.ND)({severityCode:t,theme:e}).backgroundColor;return{card:({severityCode:e})=>Object.assign({},e&&{borderColor:t(e),borderStyle:"solid",borderWidth:2}),title:({severityCode:e})=>Object.assign({},e&&{color:t(e)})}})),Fn=({title:e,content:t,severityCode:n})=>{const{t:r}=(0,h.$)(),i=In({severityCode:n}),[l,o]=a.useState(!1),s=t.split(/\n|\\n/),c=s.slice(0,3),m=(0,jt.Z)((0,Mn.Z)(3,s.length),(0,Gt.Z)(u.Z))(s),d=(e,t)=>a.createElement(hn.Z,{component:"p",key:`${e}-${t}`,variant:"body2"},e);return a.createElement(Dn,{className:i.card},a.createElement(hn.Z,{gutterBottom:!0,className:i.title,color:"textSecondary",variant:"subtitle2"},e),c.map(d),l&&m.map(d),m.length>0&&a.createElement(a.Fragment,null,a.createElement(Nn.Z,null),a.createElement(_n.Z,null,a.createElement(E.Z,{color:"primary",size:"small",onClick:()=>{o(!l)}},r(l?"Less":"More")))))};var $n=n(18463);const An=(0,Z.Z)((e=>({chip:{gridArea:"chip"},comment:{gridArea:"comment"},commentTitle:{gridArea:"comment-title"},container:{display:"grid",gridGap:e.spacing(2),gridTemplateAreas:" \n      'content-title content chip'\n      'comment-title comment chip'\n      ",gridTemplateColumns:"1fr 2fr auto"},content:{gridArea:"content"},contentTitle:{gridArea:"content-title"}}))),jn=e=>a.createElement(hn.Z,{component:"p",key:e,variant:"body2"},e),Ln=({title:e,contentLines:t,commentLine:n,chip:r})=>{const{t:i}=(0,h.$)(),l=An();return a.createElement($n.Z,{style:{padding:8}},a.createElement("div",{className:l.container},a.createElement(hn.Z,{className:l.contentTitle,color:"textSecondary",variant:"subtitle2"},e),a.createElement("div",{className:l.content},t.map(jn)),a.createElement(hn.Z,{className:l.commentTitle,color:"textSecondary",variant:"subtitle2"},i(k)),a.createElement("div",{className:l.comment},jn(n)),a.createElement("div",{className:l.chip},r)))};var Hn=n(41959);const Gn=(0,Z.Z)((e=>({active:{color:e.palette.success.main},container:{height:"100%"},title:{display:"flex",gridGap:e.spacing(1)}}))),zn=({title:e,line:t,active:n})=>{const r=Gn(),{t:i}=(0,h.$)();return a.createElement(Dn,{className:r.container},a.createElement("div",{className:r.title},a.createElement(hn.Z,{gutterBottom:!0,color:"textSecondary",variant:"body1"},e),n&&a.createElement(Te.ZP,{title:i("Active")},a.createElement(Hn.Z,{className:r.active,fontSize:"small"}))),t)},qn=(0,Z.Z)((e=>({lineText:{fontSize:e.typography.body2.fontSize,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}))),Vn=({line:e})=>{const t=qn();return a.createElement(pt.Z,null,(({width:n})=>a.createElement(hn.Z,{component:"div"},a.createElement(Se.Z,{className:t.lineText,lineHeight:1,style:{maxWidth:n||"unset"}},e))))};var Wn,Un=n(71267);!function(e){e.host="host",e.metaservice="metaservice",e.service="service"}(Wn||(Wn={}));const Qn=({details:e})=>{var t;const{setCriteriaAndNewFilter:n}=c();return a.createElement(v.Z,{container:!0,spacing:1},null===(t=e.groups)||void 0===t?void 0:t.map((t=>a.createElement(v.Z,{item:!0,key:t.name},a.createElement(Un.Z,{clickable:!0,color:"primary",label:t.name,onClick:()=>(t=>{n({name:(0,Re.Z)(e.type,Wn.host)?xt.hostGroups:xt.serviceGroups,value:[t]})})(t)})))))},Bn=(0,Z.Z)((e=>({details:{display:"grid",gridRowGap:e.spacing(2)},loadingSkeleton:{display:"grid",gridRowGap:e.spacing(2),gridTemplateRows:"67px"}}))),Kn=(0,gn.Z)(dt.Z)((()=>({transform:"none"}))),Yn=()=>{const e=Bn();return a.createElement("div",{className:e.loadingSkeleton},a.createElement(Kn,{height:"100%"}),a.createElement(Kn,{height:"100%"}),a.createElement(Kn,{height:"100%"}))};var Jn,Xn=n(8598),ea=n(59211),ta=n(33287),na=n(62830),aa=n(3846),ra=n(27484),ia=n.n(ra),la=n(1646),oa=n.n(la);!function(e){e.end="end",e.start="start"}(Jn||(Jn={}));const sa={dateTimeFormat:vn.i$,getStart:()=>ia()(Date.now()).subtract(24,"hour").toDate(),id:"last_24_h",largeName:"Last day",name:"1 day",timelineEventsLimit:20},ca={dateTimeFormat:vn.vc,getStart:()=>ia()(Date.now()).subtract(7,"day").toDate(),id:"last_7_days",largeName:"Last 7 days",name:"7 days",timelineEventsLimit:100},ma={dateTimeFormat:vn.vc,getStart:()=>ia()(Date.now()).subtract(31,"day").toDate(),id:"last_31_days",largeName:"Last 31 days",name:"31 days",timelineEventsLimit:500},da=[sa,ca,ma],ua=e=>(0,p.Z)((0,d.Z)("id",e))(da);ia().extend(oa());const pa=({defaultSelectedTimePeriodId:e,defaultSelectedCustomTimePeriod:t,defaultGraphOptions:n,details:i,onTimePeriodChange:l})=>{const[o,s]=a.useState(!1),m=(0,Xn.Z)([[e=>(0,Ie.Z)((0,r.Z)(e),(0,r.Z)(t)),(0,ea.Z)(sa)],[(0,jt.Z)(r.Z,Fe.Z),(0,ea.Z)(ua(e))],[ta.Z,(0,ea.Z)(null)]])(e),[d,u]=a.useState(m),{sending:p}=c(),g=e=>({end:new Date(Date.now()),start:new Date((null==e?void 0:e.getStart())||0)}),h=({start:e,end:t})=>{const n=ia().duration(ia()(t).diff(ia()(e))).asDays(),a=(0,na.Z)(n,2)?vn.vc:vn.i$;return{end:t,start:e,timelineLimit:(0,Xn.Z)([[(0,na.Z)(1),(0,ea.Z)(20)],[(0,na.Z)(7),(0,ea.Z)(100)],[ta.Z,(0,ea.Z)(500)]])(n),xAxisTickFormat:a}},[Z,v]=a.useState(t?h({end:new Date((0,aa.Z)(0,"end",t)),start:new Date((0,aa.Z)(0,"start",t))}):g(m)),E=e=>(0,r.Z)(e)?[Z.start.toISOString(),Z.end.toISOString()]:[e.getStart().toISOString(),new Date(Date.now()).toISOString()],f=({timePeriod:e,startDate:t,endDate:n})=>{if((0,jt.Z)(r.Z,Fe.Z)(e)){const[t,n]=E(e);return`?start=${t}&end=${n}`}return`?start=${null==t?void 0:t.toISOString()}&end=${null==n?void 0:n.toISOString()}`},[b,y]=a.useState(f(d?{timePeriod:d}:{endDate:Z.end,startDate:Z.start}));return a.useEffect((()=>{if((0,r.Z)(d)||(0,r.Z)(i)||(0,Fe.Z)(p))return;y(f({timePeriod:d}));const e=g(d);v(e),s(!0)}),[p]),a.useEffect((()=>{const e=h({end:new Date((0,aa.Z)(0,"end",t)),start:new Date((0,aa.Z)(0,"start",t))});if((0,r.Z)(t)||(0,Re.Z)(e.start,Z.start)&&(0,Re.Z)(e.end,Z.end))return;v(e);const n=f({endDate:e.end,startDate:e.start});y(n)}),[t]),a.useEffect((()=>{if((0,r.Z)(e)||(0,Re.Z)(e,null==d?void 0:d.id))return;const t=ua(e);u(t);const n=f({timePeriod:t});y(n)}),[e]),{adjustTimePeriod:e=>{s(!1),v(h(e)),u(null);const{start:t,end:a}=e,r=f({endDate:a,startDate:t});y(r),null==l||l({graphOptions:n,selectedCustomTimePeriod:{end:a.toISOString(),start:t.toISOString()}})},changeCustomTimePeriod:({date:e,property:t})=>{const a=h(Object.assign(Object.assign({},Z),{[t]:e}));v(a),null==l||l({graphOptions:n,selectedCustomTimePeriod:{end:a.end.toISOString(),start:a.start.toISOString()}}),u(null);const r=f({endDate:a.end,startDate:a.start});y(r),s(!1)},changeSelectedTimePeriod:e=>{const t=ua(e);u(t),null==l||l({graphOptions:n,selectedTimePeriodId:t.id});const a=g(t);v(a);const r=f({timePeriod:t});y(r),s(!1)},customTimePeriod:Z,getIntervalDates:()=>E(d),periodQueryParameters:b,resourceDetailsUpdated:o,selectedTimePeriod:d}};var ga,ha=n(13725),Za=n(83729),va=n(24837),Ea=n(63896),fa=n(52387),ba=n(6562),ya=n(30553),Ca=n(9570);!function(e){e.displayEvents="displayEvents",e.displayTooltips="displayTooltips"}(ga||(ga={}));const wa=a.createContext(void 0),Sa=()=>a.useContext(wa),ka={[ga.displayEvents]:{id:ga.displayEvents,label:"Display events",value:!1}},Ta=({graphTabParameters:e,changeTabGraphOptions:t})=>{const[n,r]=a.useState(Object.assign(Object.assign({},ka),null==e?void 0:e.graphOptions));return{changeGraphOptions:e=>()=>{const a=Object.assign(Object.assign({},n),{[e]:Object.assign(Object.assign({},n[e]),{value:!n[e].value})});r(a),t(a)},graphOptions:n}},xa=(0,Z.Z)((e=>({optionLabel:{justifyContent:"space-between",margin:0},popoverContent:{margin:e.spacing(1,2)}}))),Pa=()=>{const[e,t]=a.useState(null),{graphOptions:n,changeGraphOptions:i}=Sa(),l=xa(),{t:o}=(0,h.$)(),s=(0,Ea.Z)(n);return a.createElement(a.Fragment,null,a.createElement(Ve.Z,{ariaLabel:o(ye),size:"small",title:o(ye),onClick:n=>{(0,r.Z)(e)?t(n.currentTarget):t(null)}},a.createElement(He.Z,{style:{fontSize:18}})),a.createElement(fa.ZP,{anchorEl:e,anchorOrigin:{horizontal:"center",vertical:"bottom"},open:(0,Fe.Z)((0,r.Z)(e)),onClose:()=>t(null)},a.createElement(ba.Z,{className:l.popoverContent},s.map((({label:e,value:t,id:n})=>a.createElement(ya.Z,{className:l.optionLabel,control:a.createElement(Ca.Z,{checked:t,color:"primary",size:"small",onChange:i(n)}),key:e,label:o(e),labelPlacement:"start"}))))))};var Oa=n(79212),Da=n.n(Oa),Ma=n(87827),Na=n(30585),_a=n(77342),Ra=n(18371),Ia=n(41770);const Fa=["AM","PM"],$a=()=>{const{locale:e,timezone:t}=(0,Ra.useUserContext)(),{format:n,toTime:a}=(0,vn.ZP)();class r extends Ia.Z{constructor(){super(...arguments),this.isEqual=(e,t)=>null===e&&null===t||ia()(e).isSame(ia()(t),"minute")}format(e,t){return n({date:e,formatString:t})}date(t){return ia()(t).locale(e)}startOfMonth(e){return ia()(e.tz()).startOf("month")}getHours(n){return n.locale(e).tz(t).hour()}setHours(n,a){return n.locale(e).tz(t).set("hour",a)}}return{Adapter:r,isMeridianFormat:e=>{const t=a(e);return Fa.some((e=>(0,$t.Z)(e,t)))}}};var Aa=n(48119);const ja=a.forwardRef(((e,t)=>a.createElement(lt.Z,Object.assign({},e,{ref:t,size:"small"})))),La=({commonPickersProps:e,date:t,minDate:n,maxDate:r,property:i,setDate:l,changeDate:o})=>{const s={TextFieldComponent:ja};return a.createElement(Aa.x,Object.assign({},e,s,{hideTabs:!0,inputVariant:"filled",maxDate:r,minDate:n,size:"small",value:t,variant:"inline",onChange:e=>l(new Date((null==e?void 0:e.toDate())||0)),onClose:o({date:t,property:i})}))};ia().extend(Da());const Ha=(0,Z.Z)((e=>({button:{padding:e.spacing(0,.5)},buttonContent:{alignItems:"center",columnGap:`${e.spacing(1)}px`,display:"grid",gridTemplateColumns:"min-content auto"},compactFromTo:{columnGap:`${e.spacing(.5)}px`,display:"grid",grid:"repeat(2, min-content) / min-content auto"},error:{textAlign:"center"},fromTo:{alignItems:"center",columnGap:`${e.spacing(.5)}px`,display:"grid",gridTemplateColumns:"repeat(4, auto)"},minimalFromTo:{display:"grid",gridTemplateRows:"repeat(2, min-content)",rowGap:`${e.spacing(.3)}px`},minimalPickers:{alignItems:"center",columnGap:`${e.spacing(1)}px`,display:"grid",gridTemplateColumns:"min-content auto"},pickerText:{cursor:"pointer",lineHeight:"1.2"},pickers:{alignItems:"center",columnGap:`${e.spacing(.5)}px`,display:"grid",gridTemplateColumns:`minmax(${e.spacing(15)}px, ${e.spacing(17)}px) min-content minmax(${e.spacing(15)}px, ${e.spacing(17)}px)`},popover:{display:"grid",gridTemplateRows:"auto auto auto",justifyItems:"center",padding:e.spacing(1,2),rowGap:`${e.spacing(1)}px`}}))),Ga=({customTimePeriod:e,acceptDate:t,isCompact:n})=>{const[r,i]=a.useState(null),[l,o]=a.useState(e.start),[s,c]=a.useState(e.end),m=Ha(n),{t:d}=(0,h.$)(),{locale:u}=(0,Ra.useUserContext)(),{format:p}=(0,vn.ZP)(),{Adapter:g,isMeridianFormat:Z}=$a(),v=({startDate:e,endDate:t})=>ia()(e).isSameOrAfter(ia()(t),"minute"),f=({property:n,date:a})=>()=>{const r=e[n];(0,$e.Z)(ia()(a).isSame(ia()(r)),v({endDate:s,startDate:l}))||t({date:a,property:n})};a.useEffect((()=>{(0,Ie.Z)(ia()(e.start).isSame(ia()(l),"minute"),ia()(e.end).isSame(ia()(s),"minute"))||(o(e.start),c(e.end))}),[e.start,e.end]);const b=Boolean(r),y=v({endDate:s,startDate:l}),C={InputProps:{disableUnderline:!0},autoOk:!0,error:void 0,format:vn.dq};return a.createElement(a.Fragment,null,a.createElement(E.Z,{"aria-label":d("Compact time period"),className:m.button,color:"primary",variant:"outlined",onClick:e=>{i(e.currentTarget)}},a.createElement("div",{className:m.buttonContent},a.createElement(_a.Z,null),a.createElement("div",{className:n?m.compactFromTo:m.fromTo},a.createElement(hn.Z,{variant:"caption"},d(M),":"),a.createElement(hn.Z,{variant:"caption"},p({date:e.start,formatString:vn.dq})),a.createElement(hn.Z,{variant:"caption"},d(X),":"),a.createElement(hn.Z,{variant:"caption"},p({date:e.end,formatString:vn.dq}))))),a.createElement(fa.ZP,{anchorEl:r,anchorOrigin:{horizontal:"center",vertical:"top"},open:b,transformOrigin:{horizontal:"center",vertical:"top"},onClose:()=>{i(null)}},a.createElement("div",{className:m.popover},a.createElement(Ma.M,{locale:u.substring(0,2),utils:g},a.createElement("div",null,a.createElement(hn.Z,null,d(M)),a.createElement("div",{"aria-label":d(N)},a.createElement(La,{changeDate:f,commonPickersProps:Object.assign(Object.assign({},C),{ampm:Z(l)}),date:l,maxDate:e.end,property:Jn.start,setDate:o}))),a.createElement("div",null,a.createElement(hn.Z,null,d(X)),a.createElement("div",{"aria-label":d(_)},a.createElement(La,{changeDate:f,commonPickersProps:Object.assign(Object.assign({},C),{ampm:Z(s)}),date:s,minDate:e.start,property:Jn.end,setDate:c})))),y&&a.createElement(Na.Z,{error:!0,className:m.error},d("The end date must be greater than the start date")))))},za=(0,Z.Z)((e=>({button:{fontSize:e.typography.body2.fontSize},buttonGroup:{alignSelf:"center"},header:{alignItems:"center",columnGap:`${e.spacing(2)}px`,display:"grid",gridTemplateColumns:"repeat(3, auto)",justifyContent:"center",padding:e.spacing(1,.5)}}))),qa=(0,Lt.Z)((0,g.Z)(["id","name","largeName"]),da),Va=({selectedTimePeriodId:e,onChange:t,disabled:n=!1,customTimePeriod:r,changeCustomTimePeriod:i})=>{const{t:l}=(0,h.$)(),o=za(),s=(0,mn.Z)(),c=qa.map((e=>Object.assign(Object.assign({},e),{largeName:l(e.largeName),name:l(e.name)}))),m=({property:e,date:t})=>i({date:t,property:e});return a.createElement(pt.Z,null,(({width:i})=>{const l=(0,ha.Z)(i,s.breakpoints.values.sm);return a.createElement(Pn.Z,{className:o.header},a.createElement(va.Z,{className:o.buttonGroup,color:"primary",component:"span",disabled:n,size:"small"},(0,Lt.Z)((({id:n,name:r,largeName:l})=>a.createElement(Te.ZP,{key:r,placement:"top",title:l},a.createElement(E.Z,{className:o.button,component:"span",variant:e===n?"contained":"outlined",onClick:()=>t(n)},(0,Xn.Z)([[(0,Za.Z)(s.breakpoints.values.md),(0,ea.Z)(l)],[ta.Z,(0,ea.Z)(r)]])(i)))),c)),a.createElement(Ga,{acceptDate:m,customTimePeriod:r,isCompact:l}),a.createElement(Pa,null))}))},Wa=e=>({endpoint:t,parameters:n})=>(0,Ue.Yu)(e)((({endpoint:e,parameters:t})=>(0,We.Z)({baseEndpoint:e,parameters:t}))({endpoint:t,parameters:n}));var Ua=n(74001),Qa=n(11214);const Ba=Ua.hM.object({name:Ua.hM.string,severity_code:Ua.hM.number},"Status"),Ka={acknowledged:Ua.hM.optional(Ua.hM.boolean),active_checks:Ua.hM.optional(Ua.hM.boolean),duration:Ua.hM.optional(Ua.hM.string),icon:Ua.hM.optional(Ua.hM.object({name:Ua.hM.string,url:Ua.hM.string},"ResourceIcon")),id:Ua.hM.number,in_downtime:Ua.hM.optional(Ua.hM.boolean),information:Ua.hM.optional(Ua.hM.string),last_check:Ua.hM.optional(Ua.hM.string),links:Ua.hM.optional(Ua.hM.object({endpoints:Ua.hM.object({acknowledgement:Ua.hM.optional(Ua.hM.string),details:Ua.hM.optional(Ua.hM.string),downtime:Ua.hM.optional(Ua.hM.string),metrics:Ua.hM.optional(Ua.hM.string),performance_graph:Ua.hM.optional(Ua.hM.string),status_graph:Ua.hM.optional(Ua.hM.string),timeline:Ua.hM.optional(Ua.hM.string)},"ResourceLinksEndpoints"),externals:Ua.hM.object({action_url:Ua.hM.optional(Ua.hM.string),notes:Ua.hM.optional(Ua.hM.object({label:Ua.hM.optional(Ua.hM.string),url:Ua.hM.string},"ResourceLinksExternalNotes"))},"ResourceLinksExternals"),uris:Ua.hM.object({configuration:Ua.hM.optional(Ua.hM.string),logs:Ua.hM.optional(Ua.hM.string),reporting:Ua.hM.optional(Ua.hM.string)},"ResourceLinksUris")},"ResourceLinks")),name:Ua.hM.string,notification_enabled:Ua.hM.optional(Ua.hM.boolean),passive_checks:Ua.hM.optional(Ua.hM.boolean),severity_level:Ua.hM.optional(Ua.hM.number),short_type:Ua.hM.oneOf([Ua.hM.isExactly("h"),Ua.hM.isExactly("m"),Ua.hM.isExactly("s")],"ResourceShortType"),status:Ua.hM.optional(Ba),tries:Ua.hM.optional(Ua.hM.string),type:Ua.hM.enumeration(Wn,"ResourceType"),uuid:Ua.hM.string},Ya=Ua.hM.object(Object.assign(Object.assign({},Ka),{parent:Ua.hM.optional(Ua.hM.object(Ka,"ResourceParent"))}),"Resource"),Ja=Ua.hM.object({contact:("Contact",Ua.hM.optional(Ua.hM.object({name:Ua.hM.string},"Contact"))),content:Ua.hM.string,date:Ua.hM.string,endDate:Ua.hM.optional(Ua.hM.string),id:Ua.hM.number,startDate:Ua.hM.optional(Ua.hM.string),status:Ua.hM.optional(Ba),tries:Ua.hM.optional(Ua.hM.number),type:Ua.hM.string},"TimelineEvent",{endDate:"end_date",startDate:"start_date"});const Xa=(0,Qa.Z)({entityDecoder:Ja,entityDecoderName:"TimelineEvent",listingDecoderName:"TimelineEvents"});var er=n(57438),tr=n(51870),nr=n(80891),ar=n(18746),rr=n(10151),ir=n(48485),lr=n(65333),or=n(37812),sr=n(20926),cr=n(13684),mr=n(18725),dr=n(24764),ur=n(99540),pr=n(50953),gr=n(99599),hr=n(77923),Zr=n(29173),vr=n(52795),Er=n(88105),fr=n(12338),br=n(79724),yr=n(83149),Cr=n(79898),wr=n(97182),Sr=n(30876),kr=n(4878),Tr=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};const xr=({metrics:e,times:t})=>(0,Lt.Z)((t=>({metrics:e,timeTick:t})),t),Pr=({timeTick:e,metrics:t},n)=>Object.assign({timeTick:e},(0,fr.Z)(((e,{metric:t,data:a})=>Object.assign(Object.assign({},e),{[t]:a[n]})),{},t)),Or=({ds_data:e,legend:t,metric:n,unit:a,average_value:r,minimum_value:i,maximum_value:l})=>({areaColor:e.ds_color_area,average_value:r,color:e.ds_color_line,display:!0,filled:e.ds_filled,highlight:void 0,invert:e.ds_invert,legend:e.ds_legend,lineColor:e.ds_color_line,maximum_value:l,metric:n,minimum_value:i,name:t,stackOrder:(0,Re.Z)(e.ds_stack,"1")?parseInt(e.ds_order||"0",10):null,transparency:e.ds_transparency,unit:a}),Dr=e=>Math.min(...e),Mr=e=>Math.max(...e),Nr=e=>new Date(e.timeTick).valueOf(),_r=e=>t=>(0,Ht.Z)(t,e),Rr=e=>(0,jt.Z)((0,Lt.Z)((0,Ht.Z)("unit")),wr.Z)(e),Ir=({lines:e,timeSeries:t,unit:n})=>(0,jt.Z)((0,br.Z)((0,d.Z)("unit",n)),(0,Lt.Z)((0,Ht.Z)("metric")),(0,Lt.Z)((e=>(0,Lt.Z)((t=>_r(t)(e)),t))),Sr.Z,(0,Gt.Z)(r.Z))(e),Fr=e=>(0,jt.Z)((0,Lt.Z)((({timeTick:e})=>e)),(0,Lt.Z)((e=>new Date(e))))(e),$r=({lines:e,metric:t})=>(0,p.Z)((0,d.Z)("metric",t),e),Ar=({lines:e,timeSeries:t})=>{const n=(0,jt.Z)((0,Lt.Z)((0,Ht.Z)("metric")),(0,Lt.Z)((e=>(0,Lt.Z)((t=>_r(t)(e)),t))))(e);return(0,u.Z)(n)||(0,r.Z)(n)?[]:n[0].map(((e,t)=>(0,fr.Z)(((e,n)=>(0,nr.Z)(n[t],e)),0,n)))},jr=e=>(0,jt.Z)((0,Gt.Z)((({stackOrder:e})=>(0,r.Z)(e))),(0,er.Z)((0,Ht.Z)("stackOrder")))(e),Lr=({lines:e,unit:t})=>(0,jt.Z)(jr,(0,kr.Z)((0,d.Z)("unit",t)))(e),Hr=({lines:e,timeSeries:t})=>{const n=(0,Lt.Z)((0,Ht.Z)("metric"),e);return(0,Lt.Z)((e=>{var{timeTick:t}=e,a=Tr(e,["timeTick"]);return Object.assign(Object.assign({},(0,fr.Z)(((e,t)=>Object.assign(Object.assign({},e),{[t]:a[t]})),{},n)),{timeTick:t})}),t)};var Gr=n(18143);const zr=({filled:e,timeSeries:t,highlight:n,metric:i,lineColor:l,unit:o,yScale:s,xScale:c,areaColor:m,transparency:d,graphHeight:u})=>{const p={curve:Gr.Z,data:t,defined:e=>!(0,r.Z)(e[i]),opacity:!1===n?.3:1,stroke:l,strokeWidth:n?2:1,unit:o,x:e=>c(Nr(e)),y:e=>{var t;return null!==(t=s((0,Ht.Z)(i,e)))&&void 0!==t?t:null}};return e?a.createElement(mr.AreaClosed,Object.assign({fill:Xr({areaColor:m,transparency:d}),fillRule:"nonzero",key:i,y0:Math.min(s(0),u),yScale:s},p)):a.createElement(mr.LinePath,Object.assign({},p))},qr=a.memo(zr,((e,t)=>{const{timeSeries:n,graphHeight:a,highlight:r}=e,{timeSeries:i,graphHeight:l,highlight:o}=t;return(0,Re.Z)(n,i)&&(0,Re.Z)(a,l)&&(0,Re.Z)(r,o)})),Vr=({areaColor:e,lineColor:t,transparency:n,x:r,y:i})=>a.createElement("circle",{cx:r,cy:i,fill:e,fillOpacity:1-.01*n,r:3,stroke:t}),Wr=({xScale:e,yScale:t,metric:n,timeSeries:i,timeTick:l,areaColor:o,transparency:s,lineColor:c})=>{if((0,r.Z)(l))return null;const m=e(l),d=(({timeTick:e,timeSeries:t,yScale:n,metric:a})=>{const r=t[El(Fr(t),e)];return n((0,Ht.Z)(a,r))})({metric:n,timeSeries:i,timeTick:l,yScale:t});return a.createElement(Vr,{areaColor:o,lineColor:c,transparency:s,x:m,y:d})},Ur=a.memo(Wr,((e,t)=>(0,Re.Z)(e.timeTick,t.timeTick)&&(0,Re.Z)(e.timeSeries,t.timeSeries)));var Qr=n(44651),Br=n(90841);const Kr=({xScale:e,yScale:t,stackValues:n,timeTick:i,areaColor:l,transparency:o,lineColor:s})=>{if((0,r.Z)(i))return null;const c=e(i),m=(({timeTick:e,stackValues:t,yScale:n})=>n(t[El((e=>(0,jt.Z)((0,Lt.Z)((e=>e.data.timeTick)),(0,Lt.Z)((e=>new Date(e))))(e))(t),e)][1]))({stackValues:n,timeTick:i,yScale:t});return a.createElement(Vr,{areaColor:l,lineColor:s,transparency:o,x:c,y:m})},Yr=a.memo(Kr,((e,t)=>(0,Re.Z)(e.timeTick,t.timeTick)&&(0,Re.Z)(e.stackValues,t.stackValues))),Jr=({timeSeries:e,lines:t,yScale:n,xScale:i,timeTick:l})=>a.createElement(mr.AreaStack,{curve:Gr.Z,data:e,defined:e=>(0,jt.Z)((0,Lt.Z)((0,Ht.Z)("metric")),(0,Qr.Z)((t=>(0,jt.Z)((0,rt.Z)(["data",t]),r.Z,Fe.Z)(e))))(t),keys:(0,Lt.Z)((0,Ht.Z)("metric"),t),x:e=>{var t;return null!==(t=i(Nr(e.data)))&&void 0!==t?t:0},y0:e=>{var t;return null!==(t=n(e[0]))&&void 0!==t?t:0},y1:e=>{var t;return null!==(t=n(e[1]))&&void 0!==t?t:0}},(({stacks:e,path:r})=>e.map(((e,o)=>{const{areaColor:s,transparency:c,lineColor:m,highlight:d}=(0,Br.Z)(o,t);return a.createElement(a.Fragment,{key:`stack-${(0,Ht.Z)("key",e)}`},a.createElement(Yr,{areaColor:s,lineColor:m,stackValues:e,timeTick:l,transparency:c,xScale:i,yScale:n}),a.createElement("path",{d:r(e)||"",fill:Xr({areaColor:s,transparency:c}),opacity:!1===d?.3:1,stroke:m,strokeWidth:d?2:1}))})))),Xr=({transparency:e,areaColor:t})=>e?(0,dn.Fq)(t,1-.01*e):void 0,ei=({xScale:e,leftScale:t,rightScale:n,timeSeries:i,lines:l,graphHeight:o,timeTick:s})=>{const[,c,m]=Rr(l),d=jr(l),u=(e=>(0,jt.Z)((0,br.Z)((({invert:e})=>(0,r.Z)(e))),jr)(e))(l),p=Hr({lines:u,timeSeries:i}),g=(e=>(0,jt.Z)((0,Gt.Z)((({invert:e})=>(0,r.Z)(e))),jr)(e))(l),h=Hr({lines:g,timeSeries:i}),Z=(({leftScale:e,rightScale:t})=>{const n=(0,or.Z)(Dr(e.domain()),Dr(t.domain())),a=(0,sr.Z)(Mr(e.domain()),Mr(t.domain())),r=(0,or.Z)(Dr(e.range()),Dr(t.range())),i=(0,sr.Z)(Mr(e.range()),Mr(t.range()));return(0,mr.scaleLinear)({domain:[n,a],nice:!0,range:[i,r]})})({leftScale:t,rightScale:n}),v=(0,zt.Z)(l,d);return a.createElement(a.Fragment,null,a.createElement(Jr,{lines:u,timeSeries:p,timeTick:s,xScale:e,yScale:Z}),a.createElement(Jr,{lines:g,timeSeries:h,timeTick:s,xScale:e,yScale:Z}),a.createElement(a.Fragment,null,v.map((({metric:l,areaColor:d,transparency:u,lineColor:p,filled:g,unit:h,highlight:Z,invert:v})=>{const E=(({hasMoreThanTwoUnits:e,unit:t,secondUnit:n,leftScale:a,rightScale:r,invert:i})=>{const l=e||t!==n?a:r;return i?(0,mr.scaleLinear)({domain:l.domain().reverse(),nice:!0,range:l.range().reverse()}):l})({hasMoreThanTwoUnits:!(0,r.Z)(m),invert:v,leftScale:t,rightScale:n,secondUnit:c,unit:h});return a.createElement(a.Fragment,{key:l},a.createElement(Ur,{areaColor:d,lineColor:p,metric:l,timeSeries:i,timeTick:s,transparency:u,xScale:e,yScale:E}),a.createElement(qr,{areaColor:d,filled:g,graphHeight:o,highlight:Z,lineColor:p,metric:l,timeSeries:i,transparency:u,unit:h,xScale:e,yScale:E}))}))))};var ti=n(86458),ni=n(61209),ai=n(15288);const ri=()=>{const{t:e}=(0,h.$)(),{acl:t}=(0,Ra.useUserContext)(),n=({type:e})=>e,a=({resources:e,action:a})=>(0,jt.Z)((0,Lt.Z)(n),(0,kr.Z)((e=>(0,ti.Z)(["actions",e,a],!0)(t))))(e),i=({resources:t,action:i})=>{const l=(0,d.Z)("type","host");return(0,jt.Z)((0,ni.Z)(l),(0,Gt.Z)(u.Z),(0,p.Z)((e=>t=>!a({action:e,resources:t}))(i)),(0,ai.Z)(r.Z,(0,ea.Z)(void 0),(0,jt.Z)(tr.Z,n,(0,ai.Z)((0,Re.Z)("host"),(0,ea.Z)(e("Hosts will not be affected because you don't have sufficient permission")),(0,ea.Z)(e("Services will not be affected because you don't have sufficient permission"))))))(t)};return{canAcknowledge:e=>a({action:"acknowledgement",resources:e}),canAcknowledgeServices:()=>(0,ti.Z)(["actions","service","acknowledgement"],!0)(t),canCheck:e=>a({action:"check",resources:e}),canComment:e=>a({action:"comment",resources:e}),canDisacknowledge:e=>a({action:"disacknowledgement",resources:e}),canDisacknowledgeServices:()=>(0,ti.Z)(["actions","service","disacknowledgement"],!0)(t),canDowntime:e=>a({action:"downtime",resources:e}),canDowntimeServices:()=>(0,ti.Z)(["actions","service","downtime"],!0)(t),canSubmitStatus:e=>a({action:"submit_status",resources:e}),getAcknowledgementDeniedTypeAlert:e=>i({action:"acknowledgement",resources:e}),getDisacknowledgementDeniedTypeAlert:e=>i({action:"disacknowledgement",resources:e}),getDowntimeDeniedTypeAlert:e=>i({action:"downtime",resources:e})}},ii=()=>{const[e,t]=a.useState(null);return{mousePosition:e,setMousePosition:t}},li=a.createContext(void 0);var oi=n(62825),si=n(9669),ci=n.n(si);const mi=`${Qe}/acknowledge`,di=`${Qe}/downtime`,ui=`${Qe}/check`,pi=`${Qe}/comments`,gi=e=>({resources:t,params:n})=>ci().post(mi,{acknowledgement:{comment:n.comment,is_notify_contacts:n.notify,with_services:n.acknowledgeAttachedResources},resources:(0,Lt.Z)((0,g.Z)(["type","id","parent"]),t)},{cancelToken:e}),hi=e=>({resources:t,params:n})=>ci().post(di,{downtime:{comment:n.comment,duration:n.duration,end_time:n.endTime,is_fixed:n.fixed,start_time:n.startTime,with_services:n.downtimeAttachedResources},resources:(0,Lt.Z)((0,g.Z)(["type","id","parent"]),t)},{cancelToken:e}),Zi=e=>({resources:t,parameters:n})=>ci().post(pi,{resources:t.map((e=>Object.assign(Object.assign({},(0,g.Z)(["id","type","parent"],e)),{comment:n.comment,date:n.date})))},{cancelToken:e}),vi=({onClose:e,onSuccess:t,resource:n,date:i})=>{const{t:l}=(0,h.$)(),{toIsoString:o,toDateTime:s}=(0,vn.ZP)(),{showMessage:c}=(0,ze.Z)(),[m,d]=a.useState(),{sendRequest:p,sending:g}=(0,Ge.Z)({request:Zi}),Z=()=>{if((0,r.Z)(m))return;const e=m||"";return(0,jt.Z)(oi.Z,u.Z)(e)?l(q):void 0},E=(0,r.Z)(Z())&&!(0,r.Z)(m)&&!g;return a.createElement(it.Z,{open:!0,confirmDisabled:!E,labelConfirm:l("Add"),labelTitle:l(be),submitting:g,onCancel:e,onClose:e,onConfirm:()=>{const e={comment:m,date:o(i)};p({parameters:e,resources:[n]}).then((()=>{c({message:l("Comment added"),severity:qe.Z.success}),t(e)}))}},a.createElement(v.Z,{container:!0,direction:"column",spacing:2},a.createElement(v.Z,{item:!0},a.createElement(hn.Z,{variant:"h6"},s(i))),a.createElement(v.Z,{item:!0},a.createElement(lt.Z,{autoFocus:!0,multiline:!0,required:!0,ariaLabel:l(k),error:Z(),label:l(k),rows:3,style:{width:300},value:m,onChange:e=>{d(e.target.value)}}))))};var Ei=n(79576);const fi=a.createContext(void 0),bi=()=>a.useContext(fi);var yi=n(32676);const Ci=e=>(0,r.Z)(e)?"":(0,yi.Z)(e.length,180)?`${e.substring(0,180)}...`:e,wi=20,Si=(0,Z.Z)((e=>({tooltip:{backgroundColor:"transparent"},tooltipContent:{padding:e.spacing(1)}}))),ki=({icon:e,header:t,event:n,xIcon:r,marker:i,setAnnotationHovered:l})=>{var o;const s=Si(),{t:c}=(0,h.$)(),m=`${Ci(n.content)} (${c("by")} ${null===(o=n.contact)||void 0===o?void 0:o.name})`;return a.createElement("g",null,a.createElement(Te.ZP,{classes:{tooltip:s.tooltip},title:a.createElement(Pn.Z,{className:s.tooltipContent},a.createElement(hn.Z,{variant:"body2"},t),a.createElement(hn.Z,{variant:"caption"},m))},a.createElement("svg",{height:wi,width:wi,x:r,y:-32,onMouseEnter:()=>l((()=>n)),onMouseLeave:()=>l((()=>{}))},a.createElement("rect",{fill:"transparent",height:wi,width:wi}),e)),i)};const Ti=(0,Z.Z)((e=>({icon:{transition:e.transitions.create("color",{duration:e.transitions.duration.shortest})}}))),xi=e=>{var{color:t,graphHeight:n,xScale:r,date:i,Icon:l,ariaLabel:o}=e,s=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(e,["color","graphHeight","xScale","date","Icon","ariaLabel"]);const{toDateTime:c}=(0,vn.ZP)(),m=Ti(),{annotationHovered:d,setAnnotationHovered:u,getStrokeWidth:p,getStrokeOpacity:g,getIconColor:h}=bi(),Z=r(new Date(i)),v=c(i),E=a.createElement(mr.Line,{from:{x:Z,y:-10},stroke:t,strokeOpacity:g((0,Ht.Z)("event",s)),strokeWidth:p((0,Ht.Z)("event",s)),to:{x:Z,y:n}}),f=a.createElement(l,{"aria-label":o,className:m.icon,height:wi,style:{color:h({color:t,event:(0,Ht.Z)("event",s)})},width:wi});return(0,gt.Z)({Component:a.createElement(ki,Object.assign({header:v,icon:f,marker:E,setAnnotationHovered:u,xIcon:Z+-10},s)),memoProps:[d,Z]})};const Pi=(0,Z.Z)((e=>({icon:{transition:e.transitions.create("color",{duration:e.transitions.duration.shortest})}}))),Oi=e=>{var{Icon:t,ariaLabel:n,color:r,graphHeight:i,xScale:l,startDate:o,endDate:s}=e,c=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(e,["Icon","ariaLabel","color","graphHeight","xScale","startDate","endDate"]);const{toDateTime:m}=(0,vn.ZP)(),d=Pi(),{annotationHovered:u,setAnnotationHovered:p,getFill:g,getIconColor:h}=bi(),Z=(0,sr.Z)(l(new Date(o)),0),v=s?l(new Date(s)):l.range()[1],E=a.createElement(mr.Bar,{fill:g({color:r,event:(0,Ht.Z)("event",c)}),height:i+10,width:v-Z,x:Z,y:-10,onMouseEnter:()=>p((()=>(0,Ht.Z)("event",c))),onMouseLeave:()=>p((()=>{}))}),f=`From ${m(o)}${s?` To ${m(s)}`:""}`,b=a.createElement(t,{"aria-label":n,className:d.icon,height:wi,style:{color:h({color:r,event:(0,Ht.Z)("event",c)})},width:wi});return(0,gt.Z)({Component:a.createElement(ki,Object.assign({header:f,icon:b,marker:E,setAnnotationHovered:p,xIcon:Z+(v-Z)/2+-10},c)),memoProps:[u,Z,v]})},Di=({type:e,xScale:t,timeline:n,graphHeight:i,Icon:l,ariaLabel:o,color:s})=>{const c=(0,br.Z)((0,d.Z)("type",e),n);return a.createElement(a.Fragment,null,c.map((e=>{const n={Icon:l,ariaLabel:o,color:s,event:e,graphHeight:i,xScale:t};return(0,r.Z)(e.startDate)&&(0,r.Z)(e.endDate)?a.createElement(xi,Object.assign({date:e.date,key:e.id},n)):a.createElement(Oi,Object.assign({endDate:e.endDate,key:e.id,startDate:e.startDate},n))})))},Mi=e=>{const{t}=(0,h.$)(),n=(0,mn.Z)();return a.createElement(Di,Object.assign({Icon:Ei.Z,ariaLabel:t(k),color:n.palette.primary.main,type:"comment"},e))},Ni=e=>{const{t}=(0,h.$)(),n=(0,mn.Z)().palette.action.acknowledged;return a.createElement(Di,Object.assign({Icon:Tn.Z,ariaLabel:t(me),color:n,type:"acknowledgement"},e))},_i=e=>{const{t}=(0,h.$)(),n=(0,mn.Z)().palette.action.inDowntime;return a.createElement(Di,Object.assign({Icon:Cn,ariaLabel:t(F),color:n,type:"downtime"},e))},Ri=({xScale:e,timeline:t,graphHeight:n})=>{const r={graphHeight:n,timeline:t,xScale:e};return a.createElement(a.Fragment,null,a.createElement(Mi,Object.assign({},r)),a.createElement(Ni,Object.assign({},r)),a.createElement(_i,Object.assign({},r)))};var Ii=n(29223),Fi=n(14032),$i=n(56984),Ai=n(92077),ji=n.n(Ai);const Li=({value:e,unit:t,base:n=1e3})=>{if((0,r.Z)(e))return null;const a=["B","bytes","bytespersecond","B/s","B/sec","o","octets","b/s","b"].includes(t)||1024===Number(n),i=a?" ib":"a",l=ji()(Math.abs(e)).format(`0.[00]${i}`).replace(/\s|i|B/g,"");return(0,Ie.Z)((0,ha.Z)(e,0),a)?`-${l}`:l},Hi=({x:e,unit:t})=>a.createElement("text",{fontFamily:zi.fontFamily,fontSize:zi.fontSize,x:e,y:-8},t),Gi=({lines:e,graphWidth:t,base:n,leftScale:i,rightScale:l,graphHeight:o})=>{const s=({unit:e})=>t=>(0,r.Z)(t)?"":Li({base:n,unit:e,value:t}),[c,m,d]=Rr(e),u=!(0,r.Z)(d),p=!(0,r.Z)(m)&&!u,g=Math.ceil(o/30);return a.createElement(a.Fragment,null,!u&&a.createElement(Hi,{unit:c,x:0}),a.createElement(Fi.Z,{numTicks:g,orientation:"left",scale:i,tickFormat:s({unit:u?"":c}),tickLabelProps:()=>Object.assign(Object.assign({},zi),{dx:-2,dy:4,textAnchor:"end"}),tickLength:2}),p&&a.createElement(a.Fragment,null,a.createElement($i.Z,{left:t,numTicks:g,orientation:"right",scale:l,tickFormat:s({unit:m}),tickLength:2}),a.createElement(Hi,{unit:m,x:t})))},zi={fontFamily:"Roboto, sans-serif",fontSize:10},qi=({lines:e,graphHeight:t,graphWidth:n,leftScale:r,rightScale:i,xScale:l,xAxisTickFormat:o,base:s})=>{const{format:c}=(0,vn.ZP)(),m=Math.ceil(n/82);return a.createElement(a.Fragment,null,a.createElement(Ii.Z,{numTicks:m,scale:l,tickFormat:e=>c({date:new Date(e),formatString:o}),tickLabelProps:()=>Object.assign(Object.assign({},zi),{textAnchor:"middle"}),top:t}),a.createElement(Gi,{base:s,graphHeight:t,graphWidth:n,leftScale:r,lines:e,rightScale:i}))};var Vi=n(19218),Wi=n(58730),Ui=n(12880),Qi=n(91508),Bi=n(53278);var Ki=n(71843),Yi=n(1197);const Ji=(0,Z.Z)({translationZone:{cursor:"pointer"}}),Xi=({direction:e,onDirectionHover:t,directionHovered:n})=>{const r=(0,mn.Z)(),i=Ji(),{graphHeight:l,graphWidth:o,marginLeft:s,marginTop:c,shiftTime:m}=rl();return(0,gt.Z)({Component:a.createElement(mr.Bar,{className:i.translationZone,fill:(0,Re.Z)(n,e)?(0,dn.Fq)(r.palette.common.white,.5):"transparent",height:l,width:50,x:((0,Re.Z)(e,nl.backward)?(0,ar.Z)(50):o)+s,y:c,onClick:()=>null==m?void 0:m(e),onMouseLeave:t(null),onMouseOver:t(e)}),memoProps:[n,l,o,s,c]})},el=(0,Z.Z)({icon:{cursor:"pointer"}}),tl=({xIcon:e,Icon:t,direction:n,directionHovered:r,ariaLabel:i})=>{const l=el(),{t:o}=(0,h.$)(),{graphHeight:s,marginTop:c,shiftTime:m,loading:d}=rl(),u=(0,Fe.Z)(d)&&(0,Re.Z)(r,n),p={"aria-label":o(i),className:l.icon,height:20,onClick:()=>(0,Fe.Z)(d)&&(null==m?void 0:m(n)),width:20,x:e,y:s/2-10+c};return(0,gt.Z)({Component:a.createElement("g",null,a.createElement("svg",Object.assign({},p),a.createElement("rect",{fill:"transparent",height:20,width:20}),u&&a.createElement(t,{color:"primary"}))),memoProps:[e,n,i,d,r,s]})};var nl;!function(e){e[e.backward=0]="backward",e[e.forward=1]="forward"}(nl||(nl={}));const al=a.createContext(void 0),rl=()=>a.useContext(al),il=()=>{const[e,t]=a.useState(null),{graphWidth:n,canAdjustTimePeriod:r}=rl(),i=e=>()=>t(e);return(0,Fe.Z)(r)?null:a.createElement(a.Fragment,null,a.createElement(tl,{Icon:Ki.Z,ariaLabel:"Backward",direction:nl.backward,directionHovered:e,xIcon:0}),a.createElement(tl,{Icon:Yi.Z,ariaLabel:"Forward",direction:nl.forward,directionHovered:e,xIcon:n+50+20}),a.createElement(Xi,{direction:nl.backward,directionHovered:e,onDirectionHover:i}),a.createElement(Xi,{direction:nl.forward,directionHovered:e,onDirectionHover:i}))},ll=a.createContext(void 0),ol=()=>a.useContext(ll),sl=(e,t)=>(0,Re.Z)(e,t),cl=a.memo(qi,sl),ml=a.memo(mr.Bar,sl),dl=a.memo(dr.Z,sl),ul=a.memo(ur.Z,sl),pl=a.memo(ei,sl),gl=a.memo(Ri,sl),hl=45,Zl=(0,Z.Z)((e=>({addCommentButton:{fontSize:10},addCommentTooltip:{display:"grid",fontSize:10,gridAutoFlow:"row",justifyItems:"center",padding:e.spacing(.5),position:"absolute"},container:{position:"relative"},graphLoader:{alignItems:"center",backgroundColor:(0,dn.Fq)(e.palette.common.white,.5),display:"flex",height:"100%",justifyContent:"center",position:"absolute",width:"100%"},overlay:{cursor:({onAddComment:e})=>(0,r.Z)(e)?"normal":"crosshair"},tooltip:{padding:12,zIndex:e.zIndex.tooltip}}))),vl=({values:e,height:t,stackedValues:n})=>{const a=(0,or.Z)(Dr(e),Dr(n)),r=(0,sr.Z)(Mr(e),Mr(n)),i=a===r&&0===r?t:0;return(0,mr.scaleLinear)({domain:[a,r],nice:!0,range:[t,i]})},El=(0,Zr.Z)(cr.Z).center,fl=tt({Component:({width:e,height:t,timeSeries:n,base:i,lines:l,xAxisTickFormat:o,timeline:s,resource:c,addCommentTooltipLeft:m,addCommentTooltipTop:d,addCommentTooltipOpen:u,onAddComment:g,hideAddCommentTooltip:Z,showAddCommentTooltip:v,format:f,applyZoom:b,shiftTime:y,loading:C,canAdjustTimePeriod:w,displayEventAnnotations:S,containsMetrics:k,changeMetricsValue:T})=>{const{t:x}=(0,h.$)(),P=Zl({onAddComment:g}),[O,D]=a.useState(!1),[M,N]=a.useState(),[_,R]=a.useState(null),[I,F]=a.useState(null),{canComment:$}=ri(),A=(0,mn.Z)(),[j,L]=a.useState(!1),H=e>0?e-hl-45:0,G=t>0?t-30-30:0,z=(e=>{const[t,n]=a.useState(void 0),i=({xStart:e,xEnd:t})=>{const n=(0,na.Z)(Vi.Z,e),a=(0,Za.Z)(Vi.Z,t);return(0,Wi.Z)(n,a)};return{annotationHovered:t,changeAnnotationHovered:({xScale:t,mouseX:a,timeline:l})=>{const o=i({xEnd:(0,Ui.Z)(a),xStart:(0,Qi.Z)(a)});n((0,p.Z)((({startDate:n,endDate:l,date:s})=>(0,r.Z)(n)?o(t(new Date(s))):i({xEnd:t(l?new Date(l):(0,Bi.Z)(t.domain())||e),xStart:t(new Date(n))})(a)),null!=l?l:[]))},getFill:({color:e,event:n})=>(0,Xn.Z)([[r.Z,(0,ea.Z)((0,dn.Fq)(e,.3))],[(0,Re.Z)(n),(0,ea.Z)((0,dn.Fq)(e,.5))],[ta.Z,(0,ea.Z)((0,dn.Fq)(e,.1))]])(t),getIconColor:({color:e,event:n})=>(0,Xn.Z)([[r.Z,(0,ea.Z)(e)],[(0,jt.Z)((0,Re.Z)(n),Fe.Z),(0,ea.Z)((0,dn.Fq)(e,.2))],[ta.Z,(0,ea.Z)(e)]])(t),getStrokeOpacity:e=>(0,Xn.Z)([[r.Z,(0,ea.Z)(.5)],[(0,Re.Z)(e),(0,ea.Z)(.7)],[ta.Z,(0,ea.Z)(.2)]])(t),getStrokeWidth:e=>(0,Xn.Z)([[r.Z,(0,ea.Z)(1)],[(0,Re.Z)(e),(0,ea.Z)(3)],[ta.Z,(0,ea.Z)(1)]])(t),setAnnotationHovered:n}})(H),{mousePosition:q,setMousePosition:V}=a.useContext(li),W=e=>{"Escape"===e.key&&Z()};a.useEffect((()=>(document.addEventListener("keydown",W,!1),()=>{document.removeEventListener("keydown",W,!1)})),[]);const U=a.useMemo((()=>(0,mr.scaleTime)({domain:[Dr(n.map(Nr)),Mr(n.map(Nr))],range:[0,H]})),[H,n]),[Q,B,K]=Rr(l),Y=a.useMemo((()=>{const e=(0,r.Z)(K)?Ir({lines:l,timeSeries:n,unit:Q}):(({lines:e,timeSeries:t})=>(0,jt.Z)(Rr,(0,Lt.Z)((n=>Ir({lines:e,timeSeries:t,unit:n}))),Sr.Z)(e))({lines:l,timeSeries:n}),t=(0,r.Z)(K)&&(0,Fe.Z)((0,r.Z)(Q))&&Lr({lines:l,unit:Q})?Ar({lines:jr(l),timeSeries:n}):[0];return vl({height:G,stackedValues:t,values:e})}),[n,l,Q,G]),J=a.useMemo((()=>{const e=Ir({lines:l,timeSeries:n,unit:B}),t=!(0,r.Z)(B)&&Lr({lines:l,unit:B})?Ar({lines:jr(l),timeSeries:n}):[0];return vl({height:G,stackedValues:t,values:e})}),[n,l,B,G]),X=e=>{const t=U.invert(e-hl),a=El(Fr(n),t);return n[a]},ee=({x:e})=>{const t=X(e),n=(e=>(0,jt.Z)(Cr.Z,(0,Gt.Z)((0,Re.Z)("timeTick")))(e))(t).filter((e=>{const n=$r({lines:l,metric:e});return!(0,r.Z)(t[e])&&!(0,r.Z)(n)}));T({newMetricsValue:{base:i,lines:l,metrics:n,timeValue:t}})};a.useEffect((()=>{if(j)return;if((0,r.Z)(q))return void T({newMetricsValue:null});const[e]=q;ee({x:e})}),[q]);const te=()=>{F(null),R(null)},ne=((null==q?void 0:q[0])||0)-hl,ae=((null==q?void 0:q[1])||0)-30,re=Math.abs(((null==I?void 0:I.end)||0)-((null==I?void 0:I.start)||0)),ie=q?X(q[0]).timeTick:0,le=k?new Date(ie):null,oe=$([c]),se=oe?"":x(Ce);return a.createElement(fi.Provider,{value:z},a.createElement(vr.Z,{onClickAway:Z},a.createElement("div",{className:P.container},C&&a.createElement("div",{className:P.graphLoader},a.createElement(Le.Z,null)),a.createElement("svg",{height:t,width:"100%",onMouseUp:te},a.createElement(gr.Z,{left:hl,top:30},a.createElement(ul,{height:G,scale:J||Y,stroke:Er.Z[100],width:H}),a.createElement(dl,{height:G,scale:U,stroke:Er.Z[100],width:H}),a.createElement(cl,{base:i,graphHeight:G,graphWidth:H,leftScale:Y,lines:l,rightScale:J,xAxisTickFormat:o,xScale:U}),a.createElement(pl,{graphHeight:G,leftScale:Y,lines:l,rightScale:J,timeSeries:n,timeTick:le,xScale:U}),S&&a.createElement(gl,{graphHeight:G,timeline:s,xScale:U}),a.createElement(ml,{fill:(0,dn.Fq)(A.palette.primary.main,.2),height:G,stroke:(0,dn.Fq)(A.palette.primary.main,.5),width:re,x:(null==I?void 0:I.start)||0,y:0}),k&&a.createElement(a.Fragment,null,a.createElement(mr.Line,{from:{x:ne,y:0},pointerEvents:"none",stroke:Er.Z[400],strokeWidth:1,to:{x:ne,y:G}}),a.createElement(mr.Line,{from:{x:0,y:ae},pointerEvents:"none",stroke:Er.Z[400],strokeWidth:1,to:{x:H,y:ae}})),a.createElement(ml,{className:P.overlay,fill:"transparent",height:G,width:H,x:0,y:0,onMouseDown:e=>{if((0,r.Z)(g))return;const{x:t}=(0,pr.Z)(e)||{x:0},n=t-hl;R(n),F({end:n,start:n}),Z()},onMouseLeave:()=>{T({newMetricsValue:null}),L(!1),V(null),z.setAnnotationHovered(void 0),(0,Fe.Z)((0,r.Z)(_))||te()},onMouseMove:e=>{L(!0);const{x:t,y:n}=(0,pr.Z)(e)||{x:0,y:0},a=t-hl;if(z.changeAnnotationHovered({mouseX:a,timeline:s,xScale:U}),_)return F({end:(0,na.Z)(a,_)?a:_,start:(0,ha.Z)(a,_)?a:_}),void T({newMetricsValue:null});ee({x:t}),V([t,n])},onMouseUp:t=>{if(F(null),R(null),(0,r.Z)(g))return;if((null==I?void 0:I.start)!==(null==I?void 0:I.end))return void(null==b||b({end:U.invert((null==I?void 0:I.end)||H),start:U.invert((null==I?void 0:I.start)||0)}));const{x:n,y:a}=(0,pr.Z)(t)||{x:0,y:0},{timeTick:i}=X(n),l=new Date(i);N(l),v({tooltipLeft:e-n<165?n-165:n,tooltipTop:a})}})),a.createElement(al.Provider,{value:{canAdjustTimePeriod:w,graphHeight:G,graphWidth:H,loading:C,marginLeft:hl,marginTop:30,shiftTime:y}},a.createElement(il,null))),u&&a.createElement(Pn.Z,{className:P.addCommentTooltip,style:{left:m,top:d,width:165}},a.createElement(hn.Z,{variant:"caption"},f({date:new Date(M),formatString:vn.dq})),a.createElement(Te.ZP,{title:se},a.createElement("div",null,a.createElement(E.Z,{className:P.addCommentButton,color:"primary",disabled:!oe,size:"small",onClick:()=>{D(!0),Z()}},x(be))))),O&&a.createElement(vi,{date:M,resource:c,onClose:()=>{D(!1)},onSuccess:e=>{D(!1),null==g||g(e)}}))))},memoProps:["addCommentTooltipLeft","addCommentTooltipTop","addCommentTooltipOpen","width","height","timeSeries","base","lines","xAxisTickFormat","timeline","resource","loading","canAdjustTimePeriod","displayTooltipValues","displayEventAnnotations","containsMetrics","isInViewport"]}),bl=e=>{const{format:t}=(0,vn.ZP)(),{tooltipLeft:n,tooltipTop:r,tooltipOpen:i,showTooltip:l,hideTooltip:o}=(0,hr.Z)(),{changeMetricsValue:s}=ol();return a.createElement(fl,Object.assign({},e,{addCommentTooltipLeft:n,addCommentTooltipOpen:i,addCommentTooltipTop:r,changeMetricsValue:s,format:t,hideAddCommentTooltip:o,showAddCommentTooltip:l}))};var yl,Cl=n(86010),wl=n(93662),Sl=n(71934),kl=n(79634);!function(e){e[e.dot=0]="dot",e[e.bar=1]="bar"}(yl||(yl={}));const Tl=(0,Z.Z)((e=>({disabled:{color:e.palette.text.disabled},icon:{backgroundColor:({color:e})=>e,borderRadius:({variant:e})=>(0,Re.Z)(yl.dot,e)?"50%":0,height:({variant:e})=>(0,Re.Z)(yl.dot,e)?9:"100%",marginRight:e.spacing(.5),width:9}}))),xl=({disabled:e,color:t,variant:n=yl.bar})=>{const r=Tl({color:t,variant:n});return a.createElement("div",{className:(0,Cl.Z)(r.icon,{[r.disabled]:e})})},Pl=(0,Z.Z)((e=>({caption:({panelWidth:t})=>({lineHeight:1.2,marginRight:e.spacing(1),maxWidth:.85*t,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),highlight:{color:e.typography.body1.color},item:{display:"grid",gridTemplateColumns:"min-content minmax(50px, 1fr)",marginBottom:e.spacing(1)},items:({limitLegendRows:t})=>({display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",justifyContent:"center",marginLeft:e.spacing(.5),maxHeight:t?e.spacing(28):"unset",overflowY:"auto",width:"100%"}),legendData:{display:"flex",flexDirection:"column",justifyContent:"space-between"},legendValue:{fontWeight:e.typography.body1.fontWeight},minMaxAvgContainer:{columnGap:e.spacing(.5),display:"grid",gridAutoRows:`${e.spacing(2)}px`,gridTemplateColumns:"repeat(2, min-content)",whiteSpace:"nowrap"},minMaxAvgValue:{fontWeight:600},normal:{color:(0,dn.Fq)(e.palette.common.black,.6)},toggable:{cursor:"pointer"}}))),Ol=tt({Component:({lines:e,onToggle:t,onSelect:n,toggable:r,onHighlight:i,onClearHighlight:l,panelWidth:o,base:s,limitLegendRows:c=!1,displayCompleteGraph:m})=>{const d=Pl({limitLegendRows:c,panelWidth:o}),u=(0,mn.Z)(),{metricsValue:g,getFormattedMetricData:Z}=ol(),{t:v}=(0,h.$)(),f=c?(0,Mn.Z)(0,12,e):e,b=c&&(0,yi.Z)((0,Sl.Z)(e),12);return a.createElement(a.Fragment,null,a.createElement("div",{className:d.items},f.map((e=>{var o;const{color:c,name:m,display:h,metric:E,highlight:f}=e,b=h?c:(0,dn.Fq)(u.palette.text.disabled,.2),y=(0,p.Z)((0,Re.Z)(e.metric),(0,aa.Z)([],"metrics",g)),C=y&&(null===(o=Z(y))||void 0===o?void 0:o.formattedValue),w=[{label:"Min",value:e.minimum_value},{label:"Max",value:e.maximum_value},{label:"Avg",value:e.average_value}];return a.createElement(Se.Z,{className:(0,Cl.Z)(d.item,f?d.highlight:d.normal,r&&d.toggable),key:m,onClick:e=>{r&&(e.ctrlKey||e.metaKey?t(E):n(E))},onMouseEnter:()=>i(E),onMouseLeave:()=>l()},a.createElement(xl,{color:b,disabled:!h}),a.createElement("div",{className:d.legendData},a.createElement("div",null,(({legend:e,name:t})=>{const n=e||t,r=(0,$t.Z)("#",n)?(0,wl.Z)("#")(n)[1]:n;return a.createElement("div",null,a.createElement(Te.ZP,{placement:"top",title:n},a.createElement(hn.Z,{className:(0,Cl.Z)(d.caption),component:"p",variant:"caption"},r)))})(e),a.createElement(hn.Z,{className:d.caption,component:"p",variant:"caption"},e.unit&&`(${e.unit})`)),C?a.createElement(hn.Z,{className:d.legendValue,variant:"h6"},C):a.createElement("div",{className:d.minMaxAvgContainer},w.map((({label:t,value:n})=>a.createElement("div",{"aria-label":v(t),key:t},a.createElement(hn.Z,{variant:"caption"},v(t),": "),a.createElement(hn.Z,{className:d.minMaxAvgValue,variant:"caption"},(({value:e,unit:t})=>Li({base:s,unit:t,value:e})||"N/A")({unit:e.unit,value:n}))))))))}))),b&&a.createElement(E.Z,{fullWidth:!0,color:"primary",size:"small",onClick:m},a.createElement(kl.Z,{fontSize:"small"}),v("Display the complete graph")))},memoProps:["panelWidth","lines","toggable"]}),Dl=e=>{const{panelWidth:t}=c();return a.createElement(Ol,Object.assign({},e,{panelWidth:t}))},Ml=(0,Z.Z)((e=>({loadingSkeleton:{display:"grid",gridGap:e.spacing(1),gridTemplateRows:({graphHeight:t,displayTitleSkeleton:n})=>`${n?"1fr":""} ${t}px ${e.spacing(7)}px`,height:"100%"},loadingSkeletonLine:{paddingBottom:e.spacing(1),transform:"none"}}))),Nl=({graphHeight:e,displayTitleSkeleton:t})=>{const n=Ml({displayTitleSkeleton:t,graphHeight:e}),r=a.createElement(dt.Z,{className:n.loadingSkeletonLine});return a.createElement("div",{className:n.loadingSkeleton},t&&r,r,r)};var _l=n(93162),Rl=n(29306),Il=n.n(Rl);const Fl=({element:e,title:t,ratio:n})=>{return a=void 0,r=void 0,l=function*(){const a=(new Date).toISOString().substring(0,19),r=e=>(1-n)*e/2,i=r(e.offsetHeight),l=r(e.offsetWidth);return Il().toBlob(e,{bgcolor:"#FFFFFF",height:e.offsetHeight*n,style:{transform:`translate(-${l}px, -${i}px) scale(${n})`},width:e.offsetWidth*n}).then((e=>(0,_l.saveAs)(e,`${t}-${a}.png`)))},new((i=void 0)||(i=Promise))((function(e,t){function n(e){try{s(l.next(e))}catch(e){t(e)}}function o(e){try{s(l.throw(e))}catch(e){t(e)}}function s(t){var a;t.done?e(t.value):(a=t.value,a instanceof i?a:new i((function(e){e(a)}))).then(n,o)}s((l=l.apply(a,r||[])).next())}));var a,r,i,l},$l=(0,Z.Z)((e=>({container:{display:"grid",flexDirection:"column",gridGap:e.spacing(.5),gridTemplateRows:({graphHeight:t,displayTitle:n})=>`${n?"min-content":""} ${e.spacing(2)}px ${t}px auto`,height:"100%",justifyItems:"center",width:"auto"},exportToPngButton:{justifySelf:"end"},graphHeader:{display:"grid",gridTemplateColumns:"0.1fr 1fr 0.1fr",justifyItems:"center",width:"100%"},graphTranslation:{columnGap:`${e.spacing(1)}px`,display:"grid",gridTemplateColumns:({canAdjustTimePeriod:e})=>e?"min-content auto min-content":"auto",justifyContent:({canAdjustTimePeriod:e})=>e?"space-between":"center",margin:e.spacing(0,1),width:"90%"},legend:{height:"100%",width:"100%"},loadingContainer:{height:e.spacing(2),width:e.spacing(2)},noDataContainer:{alignItems:"center",display:"flex",height:"100%",justifyContent:"center"}}))),Al=({endpoint:e,graphHeight:t,xAxisTickFormat:n=vn.i$,toggableLegend:i=!1,timeline:l,resource:o,onAddComment:s,adjustTimePeriod:m,customTimePeriod:g,resourceDetailsUpdated:Z=!0,displayEventAnnotations:v=!1,displayTitle:E=!0,limitLegendRows:f,isInViewport:b=!0,displayCompleteGraph:y})=>{const C=$l({canAdjustTimePeriod:(0,Fe.Z)((0,r.Z)(m)),displayTitle:E,graphHeight:t}),{t:w}=(0,h.$)(),[S,k]=a.useState([]),[T,x]=a.useState(),[P,O]=a.useState(),[D,M]=a.useState(),[N,_]=a.useState(!1),R=a.useRef(null),I=a.useRef(0),[F,$]=a.useState(null),{selectedResourceId:A}=c(),{sendRequest:j,sending:L}=(0,Ge.Z)({request:Ue.Yu}),H=(e=>{const[t,n]=a.useState(null),{format:i}=(0,vn.ZP)();return{changeMetricsValue:({newMetricsValue:t})=>{(0,Fe.Z)(e)||n(t)},formatDate:()=>i({date:new Date((null==t?void 0:t.timeValue.timeTick)||0),formatString:vn.dq}),getFormattedMetricData:e=>{if((0,r.Z)(t))return null;const n=null==t?void 0:t.timeValue[e],{color:a,name:i,unit:l}=$r({lines:t.lines,metric:e});return{color:a,formattedValue:Li({base:t.base,unit:l,value:n}),name:i,unit:l}},metricsValue:t}})(b),{toDateTime:G}=(0,vn.ZP)();if(a.useEffect((()=>{(0,r.Z)(e)||j(e).then((e=>{k((e=>{const t=t=>{const n=(0,rt.Z)(["global","lower-limit"],e);return!!(0,r.Z)(n)||t>=n},n=(0,yr.Z)(Lt.Z);return(0,jt.Z)(xr,n(Pr),(0,Lt.Z)((e=>{var{timeTick:n}=e,a=Tr(e,["timeTick"]);return Object.assign(Object.assign({},(0,br.Z)(t,a)),{timeTick:n})})))(e)})(e)),M(e.global.base),O(e.global.title);const t=(e=>(0,Lt.Z)(Or,e.metrics))(e);x(T?t.map((e=>{var t,n;return Object.assign(Object.assign({},e),{display:null===(n=null===(t=(0,p.Z)((0,d.Z)("name",e.name),T))||void 0===t?void 0:t.display)||void 0===n||n})})):t)}))}),[e]),a.useEffect((()=>{(0,$e.Z)((0,r.Z)(A),(0,r.Z)(T))||x(void 0)}),[A]),a.useEffect((()=>{b&&R.current&&T&&(I.current=R.current.clientHeight)}),[b,T]),(0,r.Z)(T)||(0,r.Z)(l)||(0,r.Z)(e))return a.createElement(Nl,{displayTitleSkeleton:E,graphHeight:t});if(T&&(0,Fe.Z)(b))return a.createElement(dt.Z,{height:I.current,variant:"rect",width:"100%"});if((0,u.Z)(S)||(0,u.Z)(T))return a.createElement("div",{className:C.noDataContainer},a.createElement(hn.Z,{align:"center",variant:"body1"},w("No data available for this period")));const z=(0,er.Z)((0,Ht.Z)("name"),T),q=(0,Gt.Z)((0,d.Z)("display",!1),z),V=e=>(0,p.Z)((0,d.Z)("metric",e),T),W=({property:e,direction:t,timePeriod:n})=>{const a=(n.end.getTime()-n.start.getTime())/2;return new Date((0,nr.Z)((0,Ht.Z)(e,n).getTime(),(0,Re.Z)(t,nl.backward)?(0,ar.Z)(a):a))},U=e=>{(0,r.Z)(g)||null==m||m({end:W({direction:e,property:Jn.end,timePeriod:g}),start:W({direction:e,property:Jn.start,timePeriod:g})})},Q=e=>{$(null),_(!0),Fl({element:R.current,ratio:e,title:`${null==o?void 0:o.name}-performance`}).finally((()=>{_(!1)}))},B=(0,rr.Z)("",["metricsValue","timeValue","timeTick"],H),K=(0,Ht.Z)("metricsValue",H),Y=(0,aa.Z)([],"metrics",K),J=(0,Fe.Z)((0,r.Z)(Y))&&(0,Fe.Z)((0,u.Z)(Y));return a.createElement(ll.Provider,{value:H},a.createElement("div",{className:C.container,ref:R},E&&a.createElement("div",{className:C.graphHeader},a.createElement("div",null),a.createElement(hn.Z,{color:"textPrimary",variant:"body1"},P),a.createElement("div",{className:C.exportToPngButton},a.createElement(lr.Z,{alignCenter:!1,loading:N,loadingIndicatorSize:16},a.createElement(a.Fragment,null,a.createElement(Ve.Z,{disableTouchRipple:!0,disabled:(0,r.Z)(l),title:w("Export to png"),onClick:e=>{$(e.currentTarget)}},a.createElement(ir.Z,{style:{fontSize:18}})),a.createElement(Ae.Z,{keepMounted:!0,anchorEl:F,open:Boolean(F),onClose:()=>{$(null)}},a.createElement(je.Z,{onClick:()=>Q(1)},w("As displayed")),a.createElement(je.Z,{onClick:()=>Q(.75)},w("Medium size")),a.createElement(je.Z,{onClick:()=>Q(.5)},w("Small size"))))))),a.createElement("div",null,B&&J&&a.createElement(hn.Z,{variant:"body1"},G(B))),a.createElement(pt.Z,null,(({width:e,height:t})=>a.createElement(bl,{applyZoom:m,base:D,canAdjustTimePeriod:(0,Fe.Z)((0,r.Z)(m)),containsMetrics:J,displayEventAnnotations:v,height:t,lines:q,loading:(0,Fe.Z)(Z)&&L,resource:o,shiftTime:U,timeSeries:S,timeline:l,width:e,xAxisTickFormat:n,onAddComment:s}))),a.createElement("div",{className:C.legend},a.createElement(Dl,{base:D,displayCompleteGraph:y,limitLegendRows:f,lines:z,toggable:i,onClearHighlight:()=>{x((0,Lt.Z)((e=>Object.assign(Object.assign({},e),{highlight:void 0})),T))},onHighlight:e=>{const t=(0,Lt.Z)((e=>Object.assign(Object.assign({},e),{highlight:!1})),T);x([...(0,Gt.Z)((0,d.Z)("metric",e),t),Object.assign(Object.assign({},V(e)),{highlight:!0})])},onSelect:e=>{const t=V(e),n=(0,jt.Z)(tr.Z,(0,Re.Z)(t))(q);1===q.length&&n||(0,u.Z)(q)?x((0,Lt.Z)((e=>Object.assign(Object.assign({},e),{display:!0})),T)):x((0,Lt.Z)((e=>Object.assign(Object.assign({},e),{display:(0,Re.Z)(e,t)})),T))},onToggle:e=>{const t=V(e);x([...(0,Gt.Z)((0,d.Z)("metric",e),T),Object.assign(Object.assign({},t),{display:!t.display})])}}))))},jl=(0,Z.Z)((e=>({graph:{height:"100%",margin:"auto",width:"100%"},graphContainer:{display:"grid",gridTemplateRows:"1fr",padding:e.spacing(2,1,1)}}))),Ll=({resource:e,selectedTimePeriod:t,getIntervalDates:n,periodQueryParameters:i,graphHeight:l,customTimePeriod:o,adjustTimePeriod:s,resourceDetailsUpdated:c,limitLegendRows:m})=>{var d;const u=jl(),{alias:p}=(0,Ra.useUserContext)(),{sendRequest:g}=(0,Ge.Z)({decoder:Xa,request:Wa}),[h,Z]=a.useState(),v=(null===(d=Sa())||void 0===d?void 0:d.graphOptions)||ka,E=a.useRef(null),{setElement:f,isInViewport:b}=(()=>{var e;const[t,n]=a.useState(null),[r,i]=a.useState(null),l=a.useRef(null);return a.useEffect((()=>(l.current&&l.current.disconnect(),l.current=new window.IntersectionObserver((([e])=>n(e)),{threshold:0}),r&&l.current.observe(r),()=>{var e;null===(e=l.current)||void 0===e||e.disconnect()})),[r]),{isInViewport:null===(e=null==t?void 0:t.isIntersecting)||void 0===e||e,setElement:i}})(),y=(0,rt.Z)([ga.displayEvents,"value"],v),C=(0,rt.Z)(["links","endpoints","performance_graph"],e),w=(0,rt.Z)(["links","endpoints","timeline"],e);return a.useEffect((()=>{(0,r.Z)(C)||(()=>{if((0,$e.Z)((0,r.Z)(w),(0,Fe.Z)(y)))return void Z([]);const[e,a]=n();g({endpoint:w,parameters:{limit:(null==t?void 0:t.timelineEventsLimit)||o.timelineLimit,search:{conditions:[{field:"date",values:{$gt:e,$lt:a}}]}}}).then((({result:e})=>{Z(e)}))})()}),[C,t,o,y]),a.useEffect((()=>{f(E.current)}),[]),a.createElement(Pn.Z,{className:u.graphContainer},a.createElement("div",{className:u.graph,ref:E},a.createElement(Al,{toggableLegend:!0,adjustTimePeriod:s,customTimePeriod:o,displayEventAnnotations:y,endpoint:(()=>{if(!(0,r.Z)(C))return`${C}${i}`})(),graphHeight:l,isInViewport:b,limitLegendRows:m,resource:e,resourceDetailsUpdated:c,timeline:h,xAxisTickFormat:(null==t?void 0:t.dateTimeFormat)||o.xAxisTickFormat,onAddComment:({date:e,comment:t})=>{Z([...h,{contact:{name:p},content:t,date:e,id:Math.random(),type:"comment"}])}})))},Hl=(0,Z.Z)((e=>({container:{display:"grid",gridRowGap:e.spacing(2),gridTemplateRows:"auto 1fr"},exportToPngButton:{display:"flex",justifyContent:"space-between",margin:e.spacing(0,1,1,2)},graph:{height:"100%",margin:"auto",width:"100%"},graphContainer:{display:"grid",gridTemplateRows:"1fr",padding:e.spacing(2,1,1)}}))),Gl=tt({Component:({details:e,tabParameters:t,setGraphTabParameters:n})=>{const r=Hl(),{selectedTimePeriod:i,changeSelectedTimePeriod:l,periodQueryParameters:o,getIntervalDates:s,customTimePeriod:c,changeCustomTimePeriod:m,adjustTimePeriod:d,resourceDetailsUpdated:u}=pa({defaultGraphOptions:(0,rt.Z)(["graph","graphOptions"],t),defaultSelectedCustomTimePeriod:(0,rt.Z)(["graph","selectedCustomTimePeriod"],t),defaultSelectedTimePeriodId:(0,rt.Z)(["graph","selectedTimePeriodId"],t),details:e,onTimePeriodChange:n}),p=ii(),g=Ta({changeTabGraphOptions:e=>{n(Object.assign(Object.assign({},t.graph),{graphOptions:e}))},graphTabParameters:t.graph});return a.createElement(wa.Provider,{value:g},a.createElement("div",{className:r.container},a.createElement(Va,{changeCustomTimePeriod:m,customTimePeriod:c,selectedTimePeriodId:null==i?void 0:i.id,onChange:l}),a.createElement(li.Provider,{value:p},a.createElement(Ll,{adjustTimePeriod:d,customTimePeriod:c,getIntervalDates:s,graphHeight:280,periodQueryParameters:o,resource:e,resourceDetailsUpdated:u,selectedTimePeriod:i}))))},memoProps:["details","tabParameters"]});var zl=n(57330),ql=n(36210),Vl=n(93624);const Wl=(0,Z.Z)((e=>({container:{padding:e.spacing(1)}}))),Ul=()=>{const{t:e}=(0,h.$)(),t=Wl();return a.createElement(Pn.Z,{className:t.container},a.createElement(hn.Z,{align:"center",variant:"body1"},e("No results found")))},Ql=(0,Z.Z)((e=>({container:{alignContent:"flex-start",alignItems:"center",display:"grid",gridGap:e.spacing(1),height:"100%",justifyItems:"center",width:"100%"},entities:{display:"grid",gridAutoFlow:"row",gridGap:e.spacing(1),gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",width:"100%"},filter:{width:"100%"}}))),Bl=tt({Component:({limit:e,filter:t,details:n,reloadDependencies:i=[],loadingSkeleton:l,loading:o,preventReloadWhen:s=!1,selectedResourceId:c,sendListingRequest:m,children:d})=>{const{t:p}=(0,h.$)(),g=Ql(),[Z,v]=a.useState(),[f,b]=a.useState(1),[y,C]=a.useState(0),[w,S]=a.useState(!1),k=({atPage:e}={atPage:f})=>m({atPage:e}).then((e=>{const{meta:t}=e;return C(t.total),e})).finally((()=>{S(!1)})),T=()=>{b(1),k({atPage:1}).then((({result:e})=>{v(e)}))};a.useEffect((()=>{(0,r.Z)(n)&&v(void 0),1!==f||(0,r.Z)(n)||s||T()}),[n]),a.useEffect((()=>{(0,r.Z)(Z)||1===f||k().then((({result:e})=>{v((0,zl.Z)(Z,e))}))}),[f]),a.useEffect((()=>{(0,r.Z)(n)||(0,r.Z)(Z)||(v(void 0),T())}),i),a.useEffect((()=>{c!==(null==n?void 0:n.id)&&(v(void 0),b(1))}),[c]);const x=Math.ceil(y/e),P=(0,Vl.Z)({action:()=>{S(!0),b(f+1)},loading:o,maxPage:x,page:f});return a.createElement("div",{className:g.container},a.createElement("div",{className:g.filter},t),f>1&&a.createElement(E.Z,{color:"primary",size:"small",startIcon:a.createElement(ql.Z,null),variant:"contained",onClick:T},p(B)),a.createElement("div",{className:g.entities},(0,Xn.Z)([[(0,ea.Z)((0,r.Z)(Z)),(0,ea.Z)(l)],[u.Z,(0,ea.Z)(a.createElement(Ul,null))],[ta.Z,(0,ea.Z)(a.createElement(a.Fragment,null,d({entities:Z,infiniteScrollTriggerRef:P})))]])(Z)),w&&a.createElement(Le.Z,null))},memoProps:["selectedResourceId","limit","details","reloadDependencies","loading","preventReloadWhen","filter"]}),Kl=e=>{const{selectedResourceId:t}=c();return a.createElement(Bl,Object.assign({selectedResourceId:t},e))};var Yl=n(97480),Jl=n(48825),Xl=n(43517);const eo=(0,Z.Z)((e=>({root:{fontSize:e.typography.body2.fontSize,height:18}}))),to=e=>{const t=eo();return a.createElement(Rn.ZP,Object.assign({classes:{root:t.root}},e))};var no=n(15020),ao=n(27856),ro=n.n(ao);const io=(0,Z.Z)((()=>({information:({bold:e})=>({fontWeight:e?600:"unset"})}))),lo=({content:e,bold:t=!1})=>{const n=io({bold:t});return a.createElement(hn.Z,{className:n.information,variant:"body2"},(0,no.ZP)(ro().sanitize(Ci(e))))},oo=[{id:"event",name:ce},{id:"notification",name:de},{id:"comment",name:k},{id:"acknowledgement",name:me},{id:"downtime",name:F}],so=(0,Z.Z)((e=>({event:{alignItems:"center",display:"grid",gridAutoFlow:"columns",gridGap:e.spacing(2),gridTemplateColumns:"auto 1fr auto",padding:e.spacing(1)},info:{display:"grid",gridAutoFlow:"row",gridGap:e.spacing(1)},infoHeader:{alignItems:"start",display:"grid",gridAutoFlow:"column",gridGap:e.spacing(2),gridTemplateColumns:"minmax(80px, auto) auto 1fr"},title:{alignItems:"center",display:"grid",gridAutoColumns:"auto",gridAutoFlow:"column",gridGap:e.spacing(2),justifyContent:"flex-start"}}))),co=({event:e})=>{const{toTime:t}=(0,vn.ZP)();return a.createElement(hn.Z,{variant:"caption"},t(e.date))},mo=({event:e})=>{var t;const n=eo(),r=(null===(t=e.contact)||void 0===t?void 0:t.name)||"";return a.createElement(Un.Z,{className:n.root,icon:a.createElement(Xl.Z,null),label:r,size:"small",variant:"outlined"})},uo={acknowledgement:({event:e})=>{const{t}=(0,h.$)(),n=so();return a.createElement("div",{className:n.event},a.createElement(xn,{"aria-label":t(me)}),a.createElement("div",{className:n.info},a.createElement("div",{className:n.infoHeader},a.createElement(co,{event:e}),a.createElement("div",{className:n.title},a.createElement(mo,{event:e}))),a.createElement(lo,{bold:!0,content:e.content})))},comment:({event:e})=>{const{t}=(0,h.$)(),n=so();return a.createElement("div",{className:n.event},a.createElement(Ei.Z,{"aria-label":t(k),color:"primary"}),a.createElement("div",{className:n.info},a.createElement("div",{className:n.infoHeader},a.createElement(co,{event:e}),a.createElement("div",{className:n.title},a.createElement(mo,{event:e}))),a.createElement(lo,{bold:!0,content:e.content})))},downtime:({event:e})=>{const{t}=(0,h.$)(),{toDateTime:n}=(0,vn.ZP)(),i=so();return a.createElement("div",{className:i.event},a.createElement(kn,{"aria-label":t(F)}),a.createElement("div",{className:i.info},a.createElement("div",{className:i.infoHeader},a.createElement(hn.Z,{variant:"caption"},(()=>{const a=n(e.startDate),i=`${t(M)} ${a}`;if((0,r.Z)(e.endDate))return i;const l=n(e.endDate);return`${i} ${t(X)} ${l}`})()),a.createElement("div",{className:i.title},a.createElement(mo,{event:e}))),a.createElement(lo,{bold:!0,content:e.content})))},event:({event:e})=>{var t,n;const{t:r}=(0,h.$)(),i=so();return a.createElement("div",{className:i.event},a.createElement(Yl.Z,{"aria-label":r(ce),color:"primary"}),a.createElement("div",{className:i.info},a.createElement("div",{className:i.infoHeader},a.createElement(co,{event:e}),a.createElement(to,{label:r(null===(t=e.status)||void 0===t?void 0:t.name),severityCode:null===(n=e.status)||void 0===n?void 0:n.severity_code}),a.createElement(hn.Z,{style:{justifySelf:"end"},variant:"caption"},`${r(Q)}: ${e.tries}`)),a.createElement(lo,{bold:!0,content:e.content})))},notification:({event:e})=>{const{t}=(0,h.$)(),n=so();return a.createElement("div",{className:n.event},a.createElement(Jl.Z,{"aria-label":t(de),color:"primary"}),a.createElement("div",{className:n.info},a.createElement("div",{className:n.infoHeader},a.createElement(co,{event:e}),a.createElement("div",{className:n.title},a.createElement(mo,{event:e}))),a.createElement(lo,{bold:!0,content:e.content})))}};var po=n(15989),go=n(45136),ho=n(45077);const Zo=(0,Z.Z)((e=>({events:{display:"grid",gridAutoFlow:"row",gridGap:e.spacing(1),width:"100%"}}))),vo=({timeline:e,infiniteScrollTriggerRef:t})=>{const n=Zo(),{toDate:r}=(0,vn.ZP)(),i=(0,jt.Z)((0,po.Z)(((e,t)=>e.concat(t)),[],(0,jt.Z)((0,Ht.Z)("date"),r)),It.Z,(0,go.Z)([(0,ho.Z)((0,jt.Z)(tr.Z,Date.parse))]))(e),l=i.map(tr.Z);return a.createElement("div",null,i.map((([e,r])=>{const i=(0,Re.Z)((0,Bi.Z)(l),e);return a.createElement("div",{key:e},a.createElement("div",{className:n.events},a.createElement(hn.Z,{variant:"h6"},e),r.map((e=>{const{id:t,type:n}=e,r=uo[n];return a.createElement(Pn.Z,{key:`${t}-${n}`},a.createElement(r,{event:e}))}))),i&&a.createElement("div",{ref:t}))})))},Eo=(0,Z.Z)((e=>({skeleton:{display:"grid",gridGap:e.spacing(1)}}))),fo=()=>{const e=Eo();return a.createElement("div",{className:e.skeleton},a.createElement(dt.Z,{height:20,style:{transform:"none"},width:125}),a.createElement(dt.Z,{height:100,style:{transform:"none"}}),a.createElement(dt.Z,{height:100,style:{transform:"none"}}))},bo=(0,Z.Z)((e=>({filter:{padding:e.spacing(2)}})));var yo=n(24960);const Co=e=>t=>(0,Ue.Yu)(e)((e=>(0,We.Z)({baseEndpoint:Qe,customQueryParameters:[{name:"states",value:e.states},{name:"types",value:e.resourceTypes},{name:"statuses",value:e.statuses},{name:"hostgroup_ids",value:e.hostGroupIds},{name:"servicegroup_ids",value:e.serviceGroupIds},{name:"monitoring_server_ids",value:e.monitoringServerIds},{name:"only_with_performance_data",value:e.onlyWithPerformanceData}],parameters:e}))(t));var wo=n(30115);const So=a.memo(Ll,((e,t)=>{const n=e.resource,a=t.resource,r=e.periodQueryParameters,i=t.periodQueryParameters,l=e.selectedTimePeriod,o=t.selectedTimePeriod;return(0,Re.Z)(null==n?void 0:n.id,null==a?void 0:a.id)&&(0,Re.Z)(r,i)&&(0,Re.Z)(l,o)})),ko=(0,wo.Z)({serviceGraph:{display:"contents"}}),To=({services:e,infiniteScrollTriggerRef:t,periodQueryParameters:n,getIntervalDates:i,selectedTimePeriod:l,customTimePeriod:o,adjustTimePeriod:s,resourceDetailsUpdated:c})=>{const m=ko(),d=ii(),u=e.filter((0,jt.Z)((0,rt.Z)(["links","endpoints","performance_graph"]),r.Z,Fe.Z));return a.createElement(a.Fragment,null,a.createElement(li.Provider,{value:d},u.map((e=>{const{id:r}=e,d=(0,Re.Z)((0,Bi.Z)(u),e);return a.createElement("div",{className:m.serviceGraph,key:r},a.createElement(So,{limitLegendRows:!0,adjustTimePeriod:s,customTimePeriod:o,getIntervalDates:i,graphHeight:120,periodQueryParameters:n,resource:e,resourceDetailsUpdated:c,selectedTimePeriod:l}),d&&a.createElement("div",{ref:t}))}))))},xo=(0,Z.Z)((()=>({name:{cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}))),Po=({name:e,onSelect:t,variant:n="body1"})=>{const r=xo();return a.createElement(hn.Z,{className:r.name,variant:n,onClick:t},e)},Oo=(0,Z.Z)((e=>({description:{display:"grid",gridAutoFlow:"row",gridGap:e.spacing(1)},serviceCard:{padding:e.spacing(1)},serviceDetails:{alignItems:"center",display:"grid",gridAutoFlow:"columns",gridGap:e.spacing(2),gridTemplateColumns:"auto 1fr auto"}}))),Do=({name:e,status:t,information:n,subInformation:r,onSelect:i})=>{const l=Oo(),{t:o}=(0,h.$)();return a.createElement(Pn.Z,{className:l.serviceCard},a.createElement("div",{className:l.serviceDetails},a.createElement("div",null,a.createElement(to,{label:o(t.name),severityCode:t.severity_code})),a.createElement("div",{className:l.description},a.createElement(Po,{name:e,onSelect:i}),a.createElement(lo,{content:n})),r&&a.createElement(hn.Z,{variant:"caption"},r)))},Mo=({services:e,onSelectService:t,infiniteScrollTriggerRef:n})=>a.createElement(a.Fragment,null,e.map((r=>{const i=(0,Re.Z)((0,Bi.Z)(e),r),{id:l,name:o,status:s,information:c,duration:m}=r;return a.createElement("div",{key:l},a.createElement(Do,{information:c,name:o,status:s,subInformation:m,onSelect:()=>t(r)}),i&&a.createElement("div",{ref:n}))}))),No=(0,Z.Z)((e=>({skeleton:{height:62,transform:"none",width:"100%"},skeletons:{display:"grid",gridGap:e.spacing(1)}}))),_o=()=>{const e=No(),t=a.createElement(dt.Z,{className:e.skeleton});return a.createElement("div",{className:e.skeletons},t,t,t)},Ro=tt({Component:({details:e,tabParameters:t,selectResource:n,setServicesTabParameters:i})=>{var l,o;const{t:s}=(0,h.$)(),[c,m]=a.useState((null===(l=t.services)||void 0===l?void 0:l.graphMode)||!1),[d,u]=a.useState(!1),{selectedTimePeriod:p,changeSelectedTimePeriod:g,periodQueryParameters:Z,getIntervalDates:v,customTimePeriod:E,changeCustomTimePeriod:f,adjustTimePeriod:b,resourceDetailsUpdated:y}=pa({defaultGraphOptions:(0,rt.Z)(["services","graphTimePeriod","graphOptions"],t),defaultSelectedCustomTimePeriod:(0,rt.Z)(["services","graphTimePeriod","selectedCustomTimePeriod"],t),defaultSelectedTimePeriodId:(0,rt.Z)(["services","graphTimePeriod","selectedTimePeriodId"],t),details:e,onTimePeriodChange:e=>{i({graphMode:c,graphTimePeriod:e})}}),{sendRequest:C,sending:w}=(0,Ge.Z)({request:Co}),S=c?6:30,k=Ta({changeTabGraphOptions:e=>{var n,a;i({graphMode:(null===(n=t.services)||void 0===n?void 0:n.graphMode)||!1,graphTimePeriod:Object.assign(Object.assign({},null===(a=t.services)||void 0===a?void 0:a.graphTimePeriod),{graphOptions:e})})},graphTabParameters:null===(o=t.services)||void 0===o?void 0:o.graphTimePeriod});a.useEffect((()=>{u(!0)}),[c]);const T=c?"Switch to list mode":"Switch to graph mode",x=c?a.createElement(yo.Z,null):a.createElement(kl.Z,null),P=(0,r.Z)(e)||w;return a.createElement(a.Fragment,null,a.createElement(Ve.Z,{ariaLabel:s(T),disabled:P,title:s(T),onClick:()=>{u(!1);const e=!c;m(e),i({graphMode:e,graphTimePeriod:(0,rr.Z)({},["services","graphTimePeriod"],t)})}},x),a.createElement(wa.Provider,{value:k},a.createElement(Kl,{details:e,filter:c?a.createElement(Va,{changeCustomTimePeriod:f,customTimePeriod:E,disabled:P,selectedTimePeriodId:null==p?void 0:p.id,onChange:g}):void 0,limit:S,loading:w,loadingSkeleton:a.createElement(_o,null),preventReloadWhen:"host"!==(null==e?void 0:e.type),reloadDependencies:[c],sendListingRequest:({atPage:t})=>C({limit:S,onlyWithPerformanceData:!!c||void 0,page:t,resourceTypes:["service"],search:{conditions:[{field:"h.name",values:{$eq:null==e?void 0:e.name}}]}})},(({infiniteScrollTriggerRef:e,entities:t})=>c&&d?a.createElement(To,{adjustTimePeriod:b,customTimePeriod:E,getIntervalDates:v,infiniteScrollTriggerRef:e,periodQueryParameters:Z,resourceDetailsUpdated:y,selectedTimePeriod:p,services:t}):a.createElement(Mo,{infiniteScrollTriggerRef:e,services:t,onSelectService:n})))))},memoProps:["details","tabParameters"]}),Io=e=>({endpoint:t,parameters:n})=>(0,Ue.Yu)(e)((({endpoint:e,parameters:t})=>(0,We.Z)({baseEndpoint:e,parameters:t}))({endpoint:t,parameters:n})),Fo=Ua.hM.object({id:Ua.hM.number,name:Ua.hM.string,resource:Ya,unit:Ua.hM.string,value:Ua.hM.number},"MetaServiceMetric"),$o=(0,Qa.Z)({entityDecoder:Fo,entityDecoderName:"MetaServiceMetric",listingDecoderName:"MetaServiceMetricListing"});var Ao=n(48468);const jo=(0,Z.Z)((e=>({extraSmallChipContainer:{height:19},smallChipLabel:{padding:e.spacing(.5)}}))),Lo=({label:e})=>{const t=jo();return a.createElement(Rn.ZP,{classes:{label:t.smallChipLabel,root:t.extraSmallChipContainer},label:e,severityCode:Rn.Zs.None})},Ho=(0,Z.Z)((e=>({card:{alignItems:"center",display:"grid",gridColumnGap:e.spacing(2),gridTemplateColumns:"1fr 1fr auto",justifyItems:"flex-start",width:"100%"},container:{display:"grid",gridGap:e.spacing(1)},iconValuePair:{alignItems:"center",display:"flex",flexDirection:"row",gridGap:e.spacing(1)},resources:{display:"flex",flexDirection:"column",gridGap:e.spacing(1),overflow:"hidden"}}))),Go=({infiniteScrollTriggerRef:e,metrics:t,selectResource:n})=>{const r=Ho();return a.createElement(a.Fragment,null,t.map((i=>{var l,o;const s=(0,Re.Z)((0,Bi.Z)(t),i),{id:c,name:m,resource:d,unit:u,value:p}=i;return a.createElement(Dn,{key:c},a.createElement("div",{className:r.card},a.createElement("div",{className:r.resources},a.createElement("div",{className:r.iconValuePair},a.createElement(Lo,{label:null===(l=d.parent)||void 0===l?void 0:l.short_type}),a.createElement(Po,{name:null===(o=d.parent)||void 0===o?void 0:o.name,variant:"body2",onSelect:()=>n(d.parent)})),a.createElement("div",{className:r.iconValuePair},a.createElement(Lo,{label:d.short_type}),a.createElement(Po,{name:d.name,variant:"body2",onSelect:()=>n(d)}))),a.createElement(hn.Z,{align:"left",variant:"subtitle1"},m),a.createElement("div",{className:r.iconValuePair},a.createElement(Ao.Z,{color:"primary"}),a.createElement(hn.Z,null,`${p} (${u})`))),s&&a.createElement("div",{ref:e}))})))},zo=tt({Component:({details:e,selectResource:t})=>{const n=(0,rt.Z)(["links","endpoints","metrics"],e),{sendRequest:r,sending:i}=(0,Ge.Z)({decoder:$o,request:Io});return a.createElement(Kl,{details:e,limit:30,loading:i,loadingSkeleton:a.createElement(_o,null),preventReloadWhen:"metaservice"!==(null==e?void 0:e.type),sendListingRequest:({atPage:e})=>r({endpoint:n,parameters:{limit:30,page:e}})},(({infiniteScrollTriggerRef:e,entities:n})=>a.createElement(Go,{infiniteScrollTriggerRef:e,metrics:n,selectResource:t})))},memoProps:["details"]}),qo=[{Component:({details:e})=>{const{t}=(0,h.$)(),{toDateTime:n}=(0,vn.ZP)(),i=Bn(),{showMessage:l}=(0,ze.Z)();if((0,r.Z)(e))return a.createElement(Yn,null);const o=()=>{try{(0,En.Z)(e.command_line),l({message:t("Command copied to clipboard"),severity:qe.Z.success})}catch(e){l({message:t(ne),severity:qe.Z.error})}};return a.createElement(pt.Z,null,(({width:l})=>{var s;return a.createElement("div",{className:i.details},a.createElement(Fn,{content:e.information,severityCode:e.status.severity_code,title:t("Status information")}),null===(s=e.downtimes)||void 0===s?void 0:s.map((({start_time:e,end_time:r,comment:i})=>a.createElement(Ln,{chip:a.createElement(kn,null),commentLine:i,contentLines:[...[{prefix:t(M),time:e},{prefix:t(X),time:r}].map((({prefix:e,time:t})=>`${e} ${n(t)}`))],key:`downtime-${e}-${r}`,title:t("Downtime duration")}))),e.acknowledgement&&a.createElement(Ln,{chip:a.createElement(xn,null),commentLine:e.acknowledgement.comment,contentLines:[`${e.acknowledgement.author_name} ${t("at")} ${n(e.acknowledgement.entry_time)}`],title:t(C)}),a.createElement(v.Z,{container:!0,spacing:1},(({details:e,toDateTime:t,t:n})=>[{field:e.fqdn,line:a.createElement(Vn,{line:e.fqdn}),title:Ee,xs:12},{field:e.alias,line:a.createElement(Vn,{line:e.alias}),title:fe},{field:e.monitoring_server_name,line:a.createElement(Vn,{line:e.monitoring_server_name}),title:z},{field:e.timezone,line:a.createElement(Vn,{line:e.timezone}),title:"Timezone"},{field:e.duration,line:a.createElement(Vn,{line:`${e.duration} - ${e.tries}`}),title:"Current state duration"},{field:e.last_status_change,line:a.createElement(Vn,{line:t(e.last_status_change)}),title:"Last state change"},{active:e.active_checks,field:e.last_check,line:a.createElement(Vn,{line:t(e.last_check)}),title:L},{active:e.active_checks,field:e.next_check,line:a.createElement(Vn,{line:t(e.next_check)}),title:"Next check"},{field:e.execution_time,line:a.createElement(Vn,{line:`${e.execution_time} s`}),title:"Check duration"},{field:e.latency,line:a.createElement(Vn,{line:`${e.latency} s`}),title:"Latency"},{field:e.flapping,line:a.createElement(Vn,{line:n(e.flapping?"Yes":"No")}),title:"Is this resource flapping?"},{field:e.percent_state_change,line:a.createElement(Vn,{line:`${e.percent_state_change}%`}),title:"Percent state change"},{field:e.last_notification,line:a.createElement(Vn,{line:t(e.last_notification)}),title:"Last notification"},{field:e.notification_number,line:a.createElement(Vn,{line:e.notification_number.toString()}),title:"Current notification number"},{field:e.calculation_type,line:a.createElement(Vn,{line:e.calculation_type}),title:"Calculation type"},{field:e.groups,line:a.createElement(Qn,{details:e}),title:"Groups",xs:12}])({details:e,t,toDateTime:n}).map((({title:e,field:n,xs:i=6,line:o,active:s})=>{const c=l>600?i/2:i;return!(0,r.Z)(n)&&!(0,u.Z)(n)&&a.createElement(v.Z,{item:!0,key:e,xs:c},a.createElement(zn,{active:s,line:o,title:t(e)}))}))),e.performance_data&&a.createElement(Fn,{content:e.performance_data,title:t(G)}),e.command_line&&a.createElement(Dn,null,a.createElement(hn.Z,{gutterBottom:!0,color:"textSecondary",component:"div",variant:"body1"},a.createElement(v.Z,{container:!0,alignItems:"center",spacing:1},a.createElement(v.Z,{item:!0},t("Command")),a.createElement(v.Z,{item:!0},a.createElement(Te.ZP,{title:"Copy",onClick:o},a.createElement(we.Z,{size:"small"},a.createElement(Zn.Z,{color:"primary",fontSize:"small"})))))),a.createElement(hn.Z,{variant:"body2"},e.command_line)))}))},getIsActive:()=>!0,id:0,title:"Details"},{Component:({details:e})=>{const{selectResource:t,tabParameters:n,setServicesTabParameters:r}=c();return a.createElement(Ro,{details:e,selectResource:t,setServicesTabParameters:r,tabParameters:n})},getIsActive:e=>"host"===e.type,id:1,title:"Services"},{Component:({details:e})=>{const t=bo(),{t:n}=(0,h.$)(),r=oo.map((e=>Object.assign(Object.assign({},e),{name:n(e.name)}))),[i,l]=a.useState(r),{sendRequest:o,sending:s}=(0,Ge.Z)({decoder:Xa,request:Wa}),c=()=>{if(!(0,u.Z)(i))return{lists:[{field:"type",values:i.map((0,Ht.Z)("id"))}]}},m=(0,rt.Z)(["links","endpoints","timeline"],e);return a.createElement(Kl,{details:e,filter:a.createElement(Pn.Z,{className:t.filter},a.createElement(Jt.Z,{fullWidth:!0,label:n(ce),limitTags:3,options:r,value:i,onChange:(e,t)=>{l(t)}})),limit:30,loading:s,loadingSkeleton:a.createElement(fo,null),reloadDependencies:[i],sendListingRequest:({atPage:e})=>o({endpoint:m,parameters:{limit:30,page:e,search:c()}})},(({infiniteScrollTriggerRef:e,entities:t})=>a.createElement(vo,{infiniteScrollTriggerRef:e,timeline:t})))},getIsActive:()=>!0,id:2,title:"Timeline"},{Component:({details:e})=>{const{tabParameters:t,setGraphTabParameters:n}=c();return a.createElement(Gl,{details:e,setGraphTabParameters:n,tabParameters:t})},getIsActive:e=>!(0,r.Z)(e)&&!(0,r.Z)((0,rt.Z)(["links","endpoints","performance_graph"],e)),id:3,title:I},{Component:({details:e})=>{const{selectResource:t}=c();return a.createElement(zo,{details:e,selectResource:t})},getIsActive:e=>!(0,r.Z)(e)&&"metaservice"===e.type,id:4,title:"Metrics"}],Vo=(0,Z.Z)((e=>({container:{padding:e.spacing(2)}}))),Wo=({id:e,details:t})=>{const n=Vo(),{Component:r}=(0,p.Z)((0,d.Z)("id",e),qo);return a.createElement("div",{className:n.container},a.createElement(r,{details:t}))},Uo={details:0,graph:3,metrics:4,services:1,timeline:2},Qo=e=>[{color:e.palette.action.inDowntimeBackground,condition:({in_downtime:e})=>e,name:"inDowntime"},{color:e.palette.action.acknowledgedBackground,condition:({acknowledged:e})=>e,name:"acknowledged"}];var Bo=n(59535),Ko=n(81146),Yo=n(37474),Jo=n(5278),Xo=n(13258),es=n(63430),ts=n(76110),ns=n(44562);const as={InputProps:{disableUnderline:!0},TextFieldComponent:lt.Z,inputVariant:"filled",margin:"none",variant:"inline"},rs=Object.assign(Object.assign({},as),{disableToolbar:!0,format:"L"}),is=Object.assign(Object.assign({},as),{format:"LT"}),ls=({resources:e,canConfirm:t,onCancel:n,onConfirm:r,errors:i,values:l,submitting:o,handleChange:s,setFieldValue:c})=>{var m;const{t:d}=(0,h.$)(),{locale:u}=(0,Ra.useUserContext)(),{getDowntimeDeniedTypeAlert:p,canDowntimeServices:g}=ri(),{Adapter:Z,isMeridianFormat:E}=$a(),f=e.length>0,b=e.find((e=>"host"===e.type)),y=e=>t=>{c(e,t)},C=p(e);return a.createElement(it.Z,{confirmDisabled:!t,labelCancel:d(T),labelConfirm:d($),labelTitle:d(F),open:f,submitting:o,onCancel:n,onClose:n,onConfirm:r},C&&a.createElement(ns.Z,{severity:"warning"},C),a.createElement(Ma.M,{locale:u.substring(0,2),utils:Z},a.createElement(v.Z,{container:!0,direction:"column",spacing:1},a.createElement(v.Z,{item:!0},a.createElement(Na.Z,null,d(M)),a.createElement(v.Z,{container:!0,direction:"row",spacing:1},a.createElement(v.Z,{item:!0,style:{width:240}},a.createElement(es.e,Object.assign({KeyboardButtonProps:{"aria-label":d("Change start date")},"aria-label":d(N),error:void 0!==(null==i?void 0:i.dateStart),helperText:null==i?void 0:i.dateStart,inputMode:"text",value:l.dateStart,onChange:y("dateStart")},rs))),a.createElement(v.Z,{item:!0,style:{width:200}},a.createElement(ts.e,Object.assign({KeyboardButtonProps:{"aria-label":d("Change start time")},ampm:E(l.timeStart),"aria-label":d(Y),error:void 0!==(null==i?void 0:i.timeStart),helperText:null==i?void 0:i.timeStart,value:l.timeStart,onChange:y("timeStart")},is))))),a.createElement(v.Z,{item:!0},a.createElement(Na.Z,null,d(X)),a.createElement(v.Z,{container:!0,direction:"row",spacing:1},a.createElement(v.Z,{item:!0,style:{width:240}},a.createElement(es.e,Object.assign({KeyboardButtonProps:{"aria-label":d("Change end date")},"aria-label":d(_),error:void 0!==(null==i?void 0:i.dateEnd),helperText:null==i?void 0:i.dateEnd,value:l.dateEnd,onChange:y("dateEnd")},rs))),a.createElement(v.Z,{item:!0,style:{width:200}},a.createElement(ts.e,Object.assign({KeyboardButtonProps:{"aria-label":d("Change end time")},ampm:E(l.timeEnd),"aria-label":d(D),disableToolbar:(0,Fe.Z)(E(l.timeEnd)),error:void 0!==(null==i?void 0:i.timeEnd),helperText:null==i?void 0:i.timeEnd,value:l.timeEnd,onChange:y("timeEnd")},is))))),a.createElement(v.Z,{item:!0},a.createElement(ya.Z,{control:a.createElement(Xo.Z,{checked:l.fixed,color:"primary",inputProps:{"aria-label":d(R)},size:"small",onChange:s("fixed")}),label:d(R)})),a.createElement(v.Z,{item:!0},a.createElement(Na.Z,null,d(O)),a.createElement(v.Z,{container:!0,direction:"row",spacing:1},a.createElement(v.Z,{item:!0,style:{width:150}},a.createElement(lt.Z,{disabled:l.fixed,error:null===(m=null==i?void 0:i.duration)||void 0===m?void 0:m.value,type:"number",value:l.duration.value,onChange:s("duration.value")})),a.createElement(v.Z,{item:!0,style:{width:150}},a.createElement(an.Z,{disabled:l.fixed,options:[{id:"seconds",name:d("Seconds")},{id:"minutes",name:d("Minutes")},{id:"hours",name:d("Hours")}],selectedOptionId:l.duration.unit,onChange:s("duration.unit")})))),a.createElement(v.Z,{item:!0},a.createElement(lt.Z,{fullWidth:!0,multiline:!0,error:null==i?void 0:i.comment,label:d(k),rows:3,value:l.comment,onChange:s("comment")})),b&&a.createElement(v.Z,{item:!0},a.createElement(ya.Z,{control:a.createElement(Xo.Z,{checked:g()&&l.downtimeAttachedResources,color:"primary",disabled:!g(),inputProps:{"aria-label":A},size:"small",onChange:s("downtimeAttachedResources")}),label:d(A)})))))},os=e=>{const t=new Date(e.timeStart),n=new Date(e.dateStart);n.setHours(t.getHours()),n.setMinutes(t.getMinutes()),n.setSeconds(0);const a=new Date(e.timeEnd),r=new Date(e.dateEnd);return r.setHours(a.getHours()),r.setMinutes(a.getMinutes()),r.setSeconds(0),[n,r]},ss=e=>at.Ry().shape({comment:at.Z_().required(e(q)),dateEnd:at.Z_().required(e(q)).nullable(),dateStart:at.Z_().required(e(q)).nullable(),duration:at.Ry().when("fixed",((t,n)=>t?n:n.shape({unit:at.Z_().required(e(q)),value:at.Z_().required(e(q))}))),fixed:at.O7(),timeEnd:at.Z_().required(e(q)).nullable(),timeStart:at.Z_().required(e(q)).nullable()}),cs=({resources:e,onClose:t,onSuccess:n})=>{const{t:r}=(0,h.$)(),{showMessage:i}=(0,ze.Z)(),{alias:l,downtime:o}=(0,Ra.useUserContext)(),{toIsoString:s}=(0,vn.ZP)(),{sendRequest:c,sending:m}=(0,Ge.Z)({request:hi}),d=new Date,u=1e3*o.default_duration,p=new Date(d.getTime()+u),g=(0,nt.TA)({initialValues:{comment:void 0,dateEnd:p,dateStart:d,downtimeAttachedResources:!0,duration:{unit:"seconds",value:o.default_duration},fixed:!0,timeEnd:p,timeStart:d},onSubmit:(t,{setSubmitting:a})=>{a(!0);const[l,o]=os(t),m={hours:3600,minutes:60,seconds:1},d=(null==m?void 0:m[t.duration.unit])||1,u=t.duration.value*d;c({params:Object.assign(Object.assign({},t),{duration:u,endTime:s(o),startTime:s(l)}),resources:e}).then((()=>{var e;e=r("Downtime command sent"),i({message:e,severity:qe.Z.success}),n()}))},validate:e=>((e,t)=>{const n={};if(e.dateStart&&e.timeStart&&e.dateEnd&&e.timeEnd){const[a,r]=os(e);a>=r&&(n.dateEnd=t("End date must be greater than start date"))}return n})(e,r),validationSchema:ss(r)});return a.useEffect((()=>{g.setFieldValue("comment",`${r("Downtime set by")} ${l}`)}),[]),a.createElement(ls,{canConfirm:g.isValid,errors:g.errors,handleChange:g.handleChange,resources:e,setFieldValue:g.setFieldValue,submitting:m,values:g.values,onCancel:t,onConfirm:g.submitForm})},ms=({resources:e,canConfirm:t,onCancel:n,onConfirm:r,errors:i,values:l,submitting:o,handleChange:s})=>{const{t:c}=(0,h.$)(),{getAcknowledgementDeniedTypeAlert:m,canAcknowledgeServices:d}=ri(),u=m(e),p=e.length>0,g=e.find((e=>"host"===e.type));return a.createElement(it.Z,{confirmDisabled:!t,labelCancel:c(T),labelConfirm:c(y),labelTitle:c(y),open:p,submitting:o,onCancel:n,onClose:n,onConfirm:r},a.createElement(v.Z,{container:!0,direction:"column",spacing:1},u&&a.createElement(v.Z,{item:!0},a.createElement(ns.Z,{severity:"warning"},u)),a.createElement(v.Z,{item:!0},a.createElement(lt.Z,{fullWidth:!0,multiline:!0,error:null==i?void 0:i.comment,label:c(k),rows:3,value:l.comment,onChange:s("comment")})),a.createElement(v.Z,{item:!0},a.createElement(ya.Z,{control:a.createElement(Xo.Z,{checked:l.notify,color:"primary",inputProps:{"aria-label":c(H)},size:"small",onChange:s("notify")}),label:c(H)}),a.createElement(Na.Z,null,c("If checked, a notification is sent to the contacts linked to the object to warn that the incident on the resource has been acknowledged"))),g&&a.createElement(v.Z,{item:!0},a.createElement(ya.Z,{control:a.createElement(Xo.Z,{checked:d()&&l.acknowledgeAttachedResources,color:"primary",disabled:!d(),inputProps:{"aria-label":c(w)},size:"small",onChange:s("acknowledgeAttachedResources")}),label:c(w)}))))},ds=at.Ry().shape({comment:at.Z_().required(q),notify:at.O7()}),us=({resources:e,onClose:t,onSuccess:n})=>{const{t:r}=(0,h.$)(),{showMessage:i}=(0,ze.Z)(),{alias:l}=(0,Ra.useUserContext)(),{sendRequest:o,sending:s}=(0,Ge.Z)({request:gi}),c=(0,nt.TA)({initialValues:{acknowledgeAttachedResources:!1,comment:void 0,notify:!1},onSubmit:t=>{o({params:t,resources:e}).then((()=>{var e;e=r("Acknowledge command sent"),i({message:e,severity:qe.Z.success}),n()}))},validationSchema:ds});return a.useEffect((()=>{c.setFieldValue("comment",`${r(C)} ${l}`)}),[]),a.createElement(ms,{canConfirm:c.isValid,errors:c.errors,handleChange:c.handleChange,resources:e,submitting:s,values:c.values,onCancel:t,onConfirm:c.submitForm})},ps=`${Qe}/acknowledgements`,gs=e=>({resources:t,disacknowledgeAttachedResources:n})=>ci().delete(ps,{cancelToken:e,data:{disacknowledgement:{with_services:n},resources:(0,Lt.Z)((0,g.Z)(["type","id","parent"]),t)}}),hs=({resources:e,onClose:t,onSuccess:n})=>{const{t:r}=(0,h.$)(),{showMessage:i}=(0,ze.Z)(),[l,o]=a.useState(!0),{sendRequest:s,sending:c}=(0,Ge.Z)({request:gs}),{getDisacknowledgementDeniedTypeAlert:m,canDisacknowledgeServices:u}=ri(),p=m(e);a.useEffect((()=>{u()||o(!1)}),[]);const g=e.find((0,d.Z)("type","host"));return a.createElement(it.Z,{open:!0,confirmDisabled:c,labelCancel:r(T),labelConfirm:r(ge),labelTitle:r(ge),submitting:c,onCancel:t,onClose:t,onConfirm:()=>{s({disacknowledgeAttachedResources:l,resources:e}).then((()=>{var e;e=r("Disacknowledgement command sent"),i({message:e,severity:qe.Z.success}),n()}))}},a.createElement(v.Z,{container:!0,direction:"column",spacing:1},p&&a.createElement(v.Z,{item:!0},a.createElement(ns.Z,{severity:"warning"},p)),g&&a.createElement(v.Z,{item:!0},a.createElement(ya.Z,{control:a.createElement(Xo.Z,{checked:u()&&l,color:"primary",disabled:!u(),inputProps:{"aria-label":r(he)},size:"small",onChange:e=>{o(Boolean(e.target.checked))}}),label:r(he)}))))},Zs=`${Qe}/submit`,vs=e=>({resource:t,statusId:n,output:a,performanceData:r})=>ci().post(Zs,{resources:[Object.assign(Object.assign({},(0,g.Z)(["type","id","parent"],t)),{output:a,performance_data:r,status:n})]},{cancelToken:e}),Es=({resource:e,onClose:t,onSuccess:n})=>{const{t:r}=(0,h.$)(),{showMessage:i}=(0,ze.Z)(),[l,o]=a.useState(0),[s,c]=a.useState(""),[m,d]=a.useState(""),u=[{id:0,name:r("Ok")},{id:1,name:r(ae)},{id:2,name:r(x)},{id:3,name:r(te)}],p={host:[{id:0,name:r("Up")},{id:1,name:r(P)},{id:2,name:r(ee)}],metaservice:u,service:u},{sendRequest:g,sending:Z}=(0,Ge.Z)({request:vs});return a.createElement(it.Z,{open:!0,confirmDisabled:Z,labelCancel:r(T),labelConfirm:r("Submit"),labelTitle:r(Ze),submitting:Z,onCancel:t,onClose:t,onConfirm:()=>{g({output:s,performanceData:m,resource:e,statusId:l}).then((()=>{i({message:r("Status submitted"),severity:qe.Z.success}),n()}))}},a.createElement(v.Z,{container:!0,direction:"column",spacing:1,style:{minWidth:500}},a.createElement(v.Z,{item:!0},a.createElement(an.Z,{fullWidth:!0,label:r(U),options:p[e.type],selectedOptionId:l,onChange:e=>{o(e.target.value)}})),a.createElement(v.Z,{item:!0},a.createElement(lt.Z,{fullWidth:!0,ariaLabel:r(ve),label:r(ve),value:s,onChange:e=>{c(e.target.value)}})),a.createElement(v.Z,{item:!0},a.createElement(lt.Z,{fullWidth:!0,ariaLabel:r(G),label:r(G),value:m,onChange:e=>{d(e.target.value)}}))))};var fs=n(63457);const bs=e=>a.createElement(E.Z,Object.assign({color:"primary",size:"small"},e)),ys=({icon:e,label:t,onClick:n,disabled:r,permitted:i=!0})=>{const l=(0,mn.Z)(),{t:o}=(0,h.$)(),s=Boolean((0,fs.Z)(l.breakpoints.down(1100))),c=i?t:`${t} (${o(Ce)})`;return s?a.createElement(Ve.Z,{disabled:r,title:c,onClick:n},e):a.createElement(Te.ZP,{title:i?"":Ce},a.createElement("span",null,a.createElement(bs,{disabled:r,startIcon:e,variant:"contained",onClick:n},t)))},Cs=({permitted:e,label:t,onClick:n,disabled:r})=>{const{t:i}=(0,h.$)(),l=e?"":i(Ce);return a.createElement(Te.ZP,{title:l},a.createElement("div",null,a.createElement(je.Z,{disabled:r,onClick:n},i(t))))},ws=(0,Z.Z)((e=>({action:{marginRight:e.spacing(1)},flex:{alignItems:"center",display:"flex"}}))),Ss=["resourcesToCheck","selectedResources","resourcesToAcknowledge","resourcesToSetDowntime","resourcesToDisacknowledge"],ks=tt({Component:({resourcesToCheck:e,selectedResources:t,resourcesToAcknowledge:n,resourcesToSetDowntime:r,resourcesToDisacknowledge:i,setSelectedResources:l,setResourcesToAcknowledge:o,setResourcesToSetDowntime:s,setResourcesToCheck:c,setResourcesToDisacknowledge:m})=>{var d;const{t:u}=(0,h.$)(),p=ws(),{cancel:Z,token:v}=(0,Yo.Z)(),{showMessage:E}=(0,ze.Z)(),[f,b]=a.useState(),[C,w]=a.useState(),{canAcknowledge:S,canDowntime:k,canCheck:T,canDisacknowledge:x,canSubmitStatus:P,canComment:O}=ri(),D=e.length>0,M=()=>{l([]),o([]),s([]),c([]),b(null),m([]),w(null)};a.useEffect((()=>{D&&(({resources:e,cancelToken:t})=>ci().post(ui,{resources:(0,Lt.Z)((0,g.Z)(["type","id","parent"]),e)},{cancelToken:t}))({cancelToken:v,resources:e}).then((()=>{var e;M(),e=u("Check command sent"),E({message:e,severity:qe.Z.success})})).catch((()=>{return e=u(ne),E({message:e,severity:qe.Z.error});var e}))}),[e]),a.useEffect((()=>()=>Z()),[]);const N=(0,Qr.Z)((0,ti.Z)(["status","severity_code"],Rn.Zs.Ok),t),_=!S(t)||N,R=!k(t),I=!T(t),F=!x(t),A=t.length>0,L=1===t.length,H=!L||!P(t)||!(null===(d=(0,tr.Z)(t))||void 0===d?void 0:d.passive_checks),G=!L||!O(t),z=S(t)||!A,q=k(t)||!A,V=T(t)||!A,W=x(t)||!A,U=P(t)||!A,Q=O(t)||!A;return a.createElement("div",{className:p.flex},a.createElement("div",{className:p.flex},a.createElement("div",{className:p.action},a.createElement(ys,{disabled:_,icon:a.createElement(Tn.Z,null),label:u(y),permitted:z,onClick:()=>{o(t)}})),a.createElement("div",{className:p.action},a.createElement(ys,{disabled:R,icon:a.createElement(Cn,null),label:u($),permitted:q,onClick:()=>{s(t)}})),a.createElement("div",{className:p.action},a.createElement(ys,{disabled:I,icon:a.createElement(Bo.Z,null),label:u(j),permitted:V,onClick:()=>{c(t)}})),n.length>0&&a.createElement(us,{resources:n,onClose:()=>{o([])},onSuccess:M}),r.length>0&&a.createElement(cs,{resources:r,onClose:()=>{s([])},onSuccess:M}),i.length>0&&a.createElement(hs,{resources:i,onClose:()=>{m([])},onSuccess:M}),f&&a.createElement(Es,{resource:f,onClose:()=>{b(null)},onSuccess:M}),C&&a.createElement(vi,{date:new Date,resource:C,onClose:()=>{w(null)},onSuccess:M})),a.createElement(Jo.Z,{icon:a.createElement(Ko.Z,{color:"primary",fontSize:"small"}),title:u("More actions")},(({close:e})=>a.createElement(a.Fragment,null,a.createElement(Cs,{disabled:F,label:ge,permitted:W,onClick:()=>{e(),m(t)}}),a.createElement(Cs,{disabled:H,label:Ze,permitted:U,onClick:()=>{e(),(()=>{const[e]=t;b(e)})()}}),a.createElement(Cs,{disabled:G,label:be,permitted:Q,onClick:()=>{e(),(()=>{const[e]=t;w(e)})()}})))))},memoProps:Ss}),Ts=["setSelectedResources","setResourcesToAcknowledge","setResourcesToSetDowntime","setResourcesToCheck","setResourcesToDisacknowledge"],xs=()=>{const e=(0,g.Z)([...Ss,...Ts],c());return a.createElement(ks,Object.assign({},e))};var Ps=n(66652),Os=n(73770);const Ds=({enabledAutorefresh:e,toggleAutorefresh:t})=>{const{t:n}=(0,h.$)(),r=e?"Disable autorefresh":"Enable autorefresh";return a.createElement(Ve.Z,{ariaLabel:n(r),size:"small",title:n(r),onClick:t},e?a.createElement(Os.Z,null):a.createElement(Ps.Z,null))},Ms=({onRefresh:e,enabledAutorefresh:t,setEnabledAutorefresh:n,sending:r})=>{const{t:i}=(0,h.$)();return a.createElement(v.Z,{container:!0,spacing:1},a.createElement(v.Z,{item:!0},a.createElement(Ve.Z,{ariaLabel:i(B),disabled:r,size:"small",title:i(B),onClick:e},a.createElement(ql.Z,null))),a.createElement(v.Z,{item:!0},a.createElement(Ds,{enabledAutorefresh:t,toggleAutorefresh:()=>{n(!t)}})))},Ns=({onRefresh:e})=>{const{enabledAutorefresh:t,setEnabledAutorefresh:n,sending:r,selectedResourceId:i}=c();return(0,gt.Z)({Component:a.createElement(Ms,{enabledAutorefresh:t,sending:r,setEnabledAutorefresh:n,onRefresh:e}),memoProps:[r,t,i]})},_s=({onRefresh:e})=>{const t=(0,mn.Z)();return a.createElement(v.Z,{container:!0},a.createElement(v.Z,{item:!0},a.createElement(xs,null)),a.createElement(v.Z,{item:!0,style:{paddingLeft:t.spacing(3)}},a.createElement(Ns,{onRefresh:e})))};var Rs=n(59462);const Is=(0,Z.Z)((()=>({iconButton:{padding:0},tooltip:{backgroundColor:"transparent",maxWidth:"none"}}))),Fs=({children:e,Chip:t,label:n,onClick:r})=>{const[i,l]=a.useState(!1),o=Is(),s=()=>l(!1);return a.createElement(Te.ZP,{interactive:!0,PopperProps:{onClick:e=>{e.preventDefault(),e.stopPropagation()}},"aria-label":n,classes:{tooltip:o.tooltip},enterDelay:200,enterNextDelay:200,leaveDelay:0,open:i,placement:"left",title:e({close:s}),onClick:e=>{e.preventDefault(),e.stopPropagation(),null==r||r()},onClose:s,onOpen:()=>l(!0)},a.createElement("span",null,a.createElement(t,null)))};var $s=n(35064),As=n(56847),js=n(82302),Ls=n(83750),Hs=n(57394),Gs=n(88222),zs=n(99613);const qs=e=>e?"Yes":"No",Vs=({endpoint:e,columns:t})=>{const[n,r]=(0,a.useState)(),{sendRequest:i}=(0,Ge.Z)({request:Ue.Yu});(0,a.useEffect)((()=>{i(e).then((e=>r(e.result)))}),[]);const l=void 0===n,o=null===n,s=!l&&!o,c=(0,jt.Z)((0,Lt.Z)((0,Ht.Z)("width")),$s.Z)(t);return a.createElement(As.Z,{component:Pn.Z},a.createElement(js.Z,{size:"small",style:{width:c}},a.createElement(Ls.Z,null,a.createElement(Hs.Z,null,t.map((({label:e})=>a.createElement(Gs.Z,{key:e},e))))),a.createElement(zs.Z,null,l&&a.createElement(Hs.Z,null,a.createElement(Gs.Z,{colSpan:t.length},a.createElement(dt.Z,{animation:"wave",height:20}))),s&&(null==n?void 0:n.map((e=>a.createElement(Hs.Z,{key:e.id},t.map((({label:t,getContent:n,width:r})=>a.createElement(Gs.Z,{key:t,style:{maxWidth:r}},a.createElement("span",null,null==n?void 0:n(e))))))))),o&&a.createElement(Hs.Z,null,a.createElement(Gs.Z,{align:"center",colSpan:t.length},a.createElement("span",null,ne))))))},Ws=(0,Z.Z)({comment:{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}),Us=({endpoint:e})=>{const t=Ws(),{t:n}=(0,h.$)(),{toDateTime:r}=(0,vn.ZP)(),i=[{getContent:({author_name:e})=>e,id:"author",label:n(S),type:Rs.Q.string,width:100},{getContent:({entry_time:e})=>r(e),id:"entry_time",label:n("Entry time"),type:Rs.Q.string,width:150},{getContent:({is_persistent_comment:e})=>n(qs(e)),id:"is_persistent",label:n("Persistent"),type:Rs.Q.string,width:100},{getContent:({is_sticky:e})=>n(qs(e)),id:"is_sticky",label:n("Sticky"),type:Rs.Q.string,width:100},{getContent:({comment:e})=>a.createElement("span",{className:t.comment},(0,no.ZP)(ro().sanitize(e))),id:"comment",label:n(k),type:Rs.Q.string,width:250}];return a.createElement(Vs,{columns:i,endpoint:e})},Qs=(0,Z.Z)({comment:{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}),Bs=({endpoint:e})=>{const t=Qs(),{t:n}=(0,h.$)(),{toDateTime:r}=(0,vn.ZP)(),i=[{getContent:({author_name:e})=>e,id:"author",label:n(S),type:Rs.Q.string,width:100},{getContent:({is_fixed:e})=>n(qs(e)),id:"is_fixed",label:n(R),type:Rs.Q.string,width:100},{getContent:({start_time:e})=>r(e),id:"start_time",label:n(Y),type:Rs.Q.string,width:150},{getContent:({end_time:e})=>r(e),id:"end_time",label:n(D),type:Rs.Q.string,width:150},{getContent:({comment:e})=>a.createElement("span",{className:t.comment},(0,no.ZP)(ro().sanitize(e))),id:"comment",label:n(k),type:Rs.Q.string,width:250}];return a.createElement(Vs,{columns:i,endpoint:e})},Ks=({endpoint:e,Chip:t,DetailsTable:n,label:r})=>a.createElement(Fs,{Chip:t,label:r},(()=>a.createElement(n,{endpoint:e}))),Ys=({resource:e})=>{const t=(0,rt.Z)(["links","endpoints","downtime"],e);return a.createElement(Ks,{Chip:kn,DetailsTable:Bs,endpoint:t,label:`${e.name} In downtime`})},Js=({resource:e})=>{const t=(0,rt.Z)(["links","endpoints","acknowledgement"],e);return a.createElement(Ks,{Chip:xn,DetailsTable:Us,endpoint:t,label:`${e.name} Acknowledged`})},Xs=({row:e})=>a.createElement(v.Z,{container:!0,justifyContent:"center",spacing:1},e.in_downtime&&a.createElement(v.Z,{item:!0},a.createElement(Ys,{resource:e})),e.acknowledged&&a.createElement(v.Z,{item:!0},a.createElement(Js,{resource:e}))),ec=(0,wo.Z)((()=>({column:{display:"flex",justifyContent:"center",width:"100%"}}))),tc=({children:e})=>{const t=ec();return a.createElement("div",{className:t.column},e)},nc=(0,Z.Z)((e=>({graph:{display:"block",overflow:"auto",padding:e.spacing(1),width:575}}))),ac=({row:e,endpoint:t,displayCompleteGraph:n})=>{const{periodQueryParameters:r}=pa({}),i=ii();return a.createElement(li.Provider,{value:i},a.createElement(Al,{limitLegendRows:!0,displayCompleteGraph:n,displayTitle:!1,endpoint:`${t}${r}`,graphHeight:150,resource:e,timeline:[]}))},rc=({onClick:e})=>({row:t})=>{const n=nc(),i=(0,rt.Z)(["links","endpoints","performance_graph"],t);return(0,r.Z)(i)?null:a.createElement(tc,null,a.createElement(Fs,{Chip:()=>a.createElement(Ve.Z,{ariaLabel:I,title:I,onClick:()=>e(t)},a.createElement(kl.Z,{fontSize:"small"})),label:I},(({close:r})=>a.createElement(Pn.Z,{className:n.graph},a.createElement(ac,{displayCompleteGraph:()=>{e(t),r()},endpoint:i,row:t})))))};var ic=n(66081),lc=n(33901);const oc=(0,Z.Z)((e=>({avatar:{backgroundColor:e.palette.primary.main,fontSize:e.typography.body2.fontSize,height:e.spacing(2),width:e.spacing(2)}}))),sc=({endpoint:e,title:t,icon:n,avatarTitle:i})=>{const l=oc(),o=(0,r.Z)(e)||(0,u.Z)(e),s=(0,r.Z)(t)||(0,u.Z)(t);return o&&s?null:o?a.createElement(tc,null,a.createElement(Te.ZP,{className:l.avatar,title:t},a.createElement(lc.Z,null,i))):a.createElement(tc,null,a.createElement("a",{href:e,onClick:e=>{e.stopPropagation()}},a.createElement(Ve.Z,{ariaLabel:t,title:t||e,onClick:()=>null},n)))},cc=({row:e})=>{const t=(0,rt.Z)(["links","externals","notes","url"],e),n=(0,rt.Z)(["links","externals","notes","label"],e);return a.createElement(sc,{avatarTitle:"N",endpoint:t,icon:a.createElement(ic.Z,{fontSize:"small"}),title:n})};var mc=n(85206);const dc=({row:e})=>{const t=(0,rt.Z)(["links","externals","action_url"],e);return a.createElement(sc,{endpoint:t,icon:a.createElement(mc.Z,{fontSize:"small"})})},uc=(0,Z.Z)((e=>({actions:{alignItems:"center",display:"flex",flexWrap:"nowrap",gridGap:e.spacing(.75),justifyContent:"center"},statusColumn:{alignItems:"center",display:"flex",width:"100%"}}))),pc=({actions:e,row:t})=>{const n=uc(),{t:r}=(0,h.$)(),{canAcknowledge:i,canDowntime:l,canCheck:o}=ri(),s=(0,ti.Z)(["status","severity_code"],Rn.Zs.Ok,t),c=i([t]),m=l([t]),d=o([t]),u=!c||s,p=!m,g=!d,Z=({labelAction:e,isActionPermitted:t})=>{const n=r(e);return t?n:`${n} (${r(Ce)})`};return a.createElement("div",{className:n.actions},a.createElement(Ve.Z,{ariaLabel:`${r(y)} ${t.name}`,color:"primary",disabled:u,title:Z({isActionPermitted:c,labelAction:y}),onClick:()=>e.onAcknowledge(t)},a.createElement(Tn.Z,{fontSize:"small"})),a.createElement(Ve.Z,{ariaLabel:`${r("Set downtime on")} ${t.name}`,disabled:p,title:Z({isActionPermitted:m,labelAction:$}),onClick:()=>e.onDowntime(t)},a.createElement(Cn,{fontSize:"small"})),a.createElement(Ve.Z,{ariaLabel:`${r(j)} ${t.name}`,disabled:g,title:Z({isActionPermitted:d,labelAction:j}),onClick:()=>e.onCheck(t)},a.createElement(Bo.Z,{fontSize:"small"})))},gc=({actions:e,t})=>({row:n,isHovered:r})=>{const i=uc(),l=n.status.name;return a.createElement("div",{className:i.statusColumn},r?a.createElement(pc,{actions:e,row:n}):a.createElement(Rn.ZP,{label:t(l),severityCode:n.status.severity_code,style:{height:20,width:"100%"}}))},hc=({row:e})=>{var t;return e.severity_level?a.createElement(Lo,{label:null===(t=e.severity_level)||void 0===t?void 0:t.toString()}):null},Zc=({row:e})=>{const t=kc();return a.createElement("div",{className:t.resourceDetailsCell},e.icon?a.createElement("img",{alt:e.icon.name,height:16,src:e.icon.url,width:16}):a.createElement(Lo,{label:e.short_type}),a.createElement("div",{className:t.resourceNameItem},a.createElement(hn.Z,{variant:"body2"},e.name)))},vc=({row:e})=>{var t,n;const r=kc();return e.parent?a.createElement("div",{className:r.resourceDetailsCell},a.createElement(Rn.ZP,{severityCode:(null===(n=null===(t=e.parent)||void 0===t?void 0:t.status)||void 0===n?void 0:n.severity_code)||0}),a.createElement("div",{className:r.resourceNameItem},a.createElement(hn.Z,{variant:"body2"},e.parent.name))):null};var Ec=n(82484);const fc=({Icon:e,title:t})=>{const n=a.createElement(e,{color:"primary",fontSize:"small"});return a.createElement(Te.ZP,{title:t},n)},bc=({row:e})=>{const{t}=(0,h.$)();return!1===e.notification_enabled?a.createElement(tc,null,a.createElement(fc,{Icon:Ec.Z,title:t("Notifications disabled")})):null};var yc=n(65582),Cc=n(73627);const wc=({Icon:e,title:t})=>a.createElement(tc,null,a.createElement(Te.ZP,{title:t},a.createElement(e,{color:"primary",fontSize:"small"}))),Sc=({row:e})=>{const{t}=(0,h.$)();return!1===e.passive_checks&&!1===e.active_checks?a.createElement(wc,{Icon:yc.Z,title:t("All checks are disabled")}):!1===e.active_checks?a.createElement(wc,{Icon:Cc.Z,title:t("Only passive checks are enabled")}):null},kc=(0,Z.Z)((e=>({resourceDetailsCell:{alignItems:"center",display:"flex",flexWrap:"nowrap",padding:e.spacing(0,.5)},resourceNameItem:{marginLeft:e.spacing(1),whiteSpace:"nowrap"}}))),Tc=["severity","status","resource","parent_resource","notes_url","action_url","graph","duration","tries","last_check","information","state"];var xc=n(14494),Pc=n(12140);const Oc=()=>{const e=(0,mn.Z)(),{t}=(0,h.$)(),{showMessage:n}=(0,ze.Z)(),{listing:i,setLimit:l,page:o,setPage:s,setOpenDetailsTabId:m,setSelectedResourceUuid:d,setSelectedResourceId:u,setSelectedResourceParentId:p,setSelectedResourceType:g,setSelectedResourceParentType:Z,selectedResourceUuid:v,setSelectedResources:E,selectedResources:f,setResourcesToAcknowledge:b,setResourcesToSetDowntime:y,setResourcesToCheck:C,sending:w,setCriteriaAndNewFilter:S,getCriteriaValue:k,selectedColumnIds:T,setSelectedColumnIds:x}=c(),{initAutorefreshAndLoad:P}=(()=>{const{limit:e,page:t,setPage:n,nextSearch:i,setListing:l,sendRequest:o,enabledAutorefresh:s,customFilters:m,loadDetails:d,details:u,selectedResourceId:p,getCriteriaValue:g,filter:h}=c(),Z=a.useRef(),v=(0,xc.useSelector)((e=>1e3*e.intervals.AjaxTimeReloadMonitoring)),E=()=>{const e=g("sort");if((0,r.Z)(e))return;const[t,n]=e;return{[t]:n}},f=()=>{const n=g("search"),a=n?{regex:{fields:["h.name","h.alias","h.address","s.description","name","alias","parent_name","parent_alias","fqdn","information"],value:n}}:void 0,i=e=>{const t=g(e);return null==t?void 0:t.map((0,Ht.Z)("id"))};o({hostGroupIds:i("host_groups"),limit:e,monitoringServerIds:i("monitoring_servers"),page:t,resourceTypes:i("resource_types"),search:a,serviceGroupIds:i("service_groups"),sort:E(),states:i("states"),statuses:i("statuses")}).then(l),(0,r.Z)(u)||d()},b=()=>{window.clearInterval(Z.current);const e=s?window.setInterval((()=>{f()}),v):void 0;Z.current=e},y=()=>{(0,r.Z)(m)||(0,Fe.Z)((0,Re.Z)(g("search"),i))||(b(),f())};return a.useEffect((()=>{b()}),[s,p]),a.useEffect((()=>()=>{clearInterval(Z.current)}),[]),a.useEffect((()=>{(0,r.Z)(t)||y()}),[t]),(0,Pc.Z)((()=>{1===t&&y(),n(1)}),[e,...h.criterias]),{initAutorefreshAndLoad:y}})(),D=({uuid:e,id:t,type:n,parent:a})=>{d(e),u(t),p(null==a?void 0:a.id),g(n),Z(null==a?void 0:a.type)},M={color:(0,dn.Fq)(e.palette.primary.main,.08),condition:({uuid:e})=>(0,Re.Z)(e,v),name:"detailsOpen"},N=(({actions:e,t})=>[{Component:hc,getRenderComponentOnRowUpdateCondition:ta.Z,id:"severity",label:t("Severity"),rowMemoProps:["severity_level"],shortLabel:"S",sortField:"severity_level",sortable:!0,type:Rs.Q.component},{Component:gc({actions:e,t}),clickable:!0,getRenderComponentOnRowUpdateCondition:ta.Z,hasHoverableComponent:!0,id:"status",label:t(U),rowMemoProps:["status","severity_code","type"],sortField:"status_severity_code",sortable:!0,type:Rs.Q.component,width:"minmax(100px, max-content)"},{Component:Zc,getRenderComponentOnRowUpdateCondition:ta.Z,id:"resource",label:t(V),rowMemoProps:["icon","short_type","name"],sortField:"name",sortable:!0,type:Rs.Q.component},{Component:vc,getRenderComponentOnRowUpdateCondition:ta.Z,id:"parent_resource",label:t("Parent"),rowMemoProps:["parent"],sortField:"parent_name",sortable:!0,type:Rs.Q.component},{Component:cc,getRenderComponentOnRowUpdateCondition:ta.Z,id:"notes_url",label:t("Notes"),rowMemoProps:["links"],shortLabel:"N",sortable:!1,type:Rs.Q.component},{Component:dc,getRenderComponentOnRowUpdateCondition:ta.Z,id:"action_url",label:t("Action"),rowMemoProps:["links"],shortLabel:"A",sortable:!1,type:Rs.Q.component},{Component:rc({onClick:e.onDisplayGraph}),getRenderComponentOnRowUpdateCondition:ta.Z,id:"graph",label:t(I),shortLabel:"G",sortable:!1,type:Rs.Q.component},{getFormattedString:({duration:e})=>e,id:"duration",label:t(O),sortField:"last_status_change",sortable:!0,type:Rs.Q.string},{getFormattedString:({tries:e})=>e,id:"tries",label:t(Q),sortable:!0,type:Rs.Q.string},{getFormattedString:({last_check:e})=>e,id:"last_check",label:t(L),sortable:!0,type:Rs.Q.string},{getFormattedString:(0,jt.Z)((0,aa.Z)("","information"),(0,wl.Z)("\n"),tr.Z,Ci),id:"information",label:t("Information"),sortable:!1,type:Rs.Q.string,width:"minmax(50px, 1fr)"},{Component:Xs,getRenderComponentOnRowUpdateCondition:ta.Z,id:"state",label:t(J),rowMemoProps:["in_downtime","acknowledged","name","links"],sortable:!1,type:Rs.Q.component},{getFormattedString:({alias:e})=>e,id:"alias",label:t(fe),sortable:!0,type:Rs.Q.string},{getFormattedString:({fqdn:e})=>e,id:"fqdn",label:t(Ee),sortable:!0,type:Rs.Q.string},{getFormattedString:({monitoring_server_name:e})=>e,id:"monitoring_server_name",label:t(z),sortable:!0,type:Rs.Q.string},{Component:bc,getRenderComponentOnRowUpdateCondition:ta.Z,id:"notification",label:t(de),rowMemoProps:["notification_enabled"],shortLabel:"Notif",type:Rs.Q.component},{Component:Sc,getRenderComponentOnRowUpdateCondition:ta.Z,id:"checks",label:t(j),rowMemoProps:["passive_checks","active_checks"],shortLabel:"C",type:Rs.Q.component}])({actions:{onAcknowledge:e=>{b([e])},onCheck:e=>{C([e])},onDisplayGraph:e=>{m(3),D(e)},onDowntime:e=>{y([e])}},t}),_=w,[R,F]=k("sort");return a.createElement(un.Uw,{checkable:!0,actions:a.createElement(_s,{onRefresh:P}),columnConfiguration:{selectedColumnIds:T,sortable:!0},columns:N,currentPage:(o||1)-1,getId:({uuid:e})=>e,limit:null==i?void 0:i.meta.limit,loading:_,memoProps:[i,R,F,o,f,v,w],rowColorConditions:[...Qo(e),M],rows:null==i?void 0:i.result,selectedRows:f,sortField:R,sortOrder:F,totalRows:null==i?void 0:i.meta.total,onLimitChange:e=>{l(Number(e))},onPaginate:e=>{s(e+1)},onResetColumns:()=>{x(Tc)},onRowClick:D,onSelectColumns:e=>{0!==e.length?x(e):n({message:t("At least one column must be selected"),severity:qe.Z.warning})},onSelectRows:E,onSort:({sortField:e,sortOrder:t})=>{S({name:"sort",value:[e,t]})}})};var Dc=n(27304),Mc=n(47768),Nc=n(18954),_c=n(29843),Rc=n(29059),Ic=n(44152),Fc=n(11939),$c=n(62822),Ac=n(50998),jc=n(46869),Lc=n(95757);const Hc=(0,Z.Z)((e=>({iconContainer:{minWidth:e.spacing(4.5)},link:{display:"contents"}}))),Gc=({resourceUris:e})=>{const t=Hc(),{t:n}=(0,h.$)(),i=[{Icon:He.Z,name:ue,uri:(0,Ht.Z)("configuration",e)},{Icon:Ic.Z,name:"View logs",uri:(0,Ht.Z)("logs",e)},{Icon:Fc.Z,name:"View report",uri:(0,Ht.Z)("reporting",e)}];return a.createElement(Jo.Z,{icon:a.createElement(Ko.Z,{fontSize:"small"}),title:n("Shortcuts")},(()=>a.createElement($c.Z,{dense:!0},i.map((({Icon:e,uri:i,name:l})=>a.createElement(Te.ZP,{key:l,title:(0,r.Z)(i)?n(Ce):""},a.createElement("div",null,a.createElement(ke.Z,{"aria-label":n(l),className:t.link,color:"inherit",href:i},a.createElement(Ac.Z,{button:!0,disabled:(0,r.Z)(i)},a.createElement(jc.Z,{className:t.iconContainer},a.createElement(e,{color:(0,r.Z)(i)?"disabled":"primary"})),a.createElement(Lc.Z,null,n(l)))))))))))},zc=(0,Z.Z)((e=>({header:({displaySeverity:t})=>({alignItems:"center",display:"grid",gridGap:e.spacing(2),gridTemplateColumns:(t?"auto":"")+" auto minmax(0, 1fr) auto auto",height:43,padding:e.spacing(0,1)})}))),qc=(0,Z.Z)((e=>({parent:{alignItems:"center",display:"grid",gridGap:e.spacing(1),gridTemplateColumns:"auto minmax(0, 1fr)"},resourceName:{columnGap:e.spacing(.5),display:"grid",gridTemplateColumns:"repeat(2, min-content)",height:e.spacing(3),width:"min-content"},resourceNameConfigurationIcon:{alignSelf:"center",display:"flex",minWidth:e.spacing(2.5)},resourceNameConfigurationLink:{height:e.spacing(2.5)},truncated:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}))),Vc=()=>a.createElement(v.Z,{container:!0,item:!0,alignItems:"center",spacing:2,style:{flexGrow:1}},a.createElement(v.Z,{item:!0},a.createElement(dt.Z,{height:25,variant:"circle",width:25})),a.createElement(v.Z,{item:!0},a.createElement(dt.Z,{height:25,width:250}))),Wc=({details:e,onSelectParent:t})=>{var n;const[i,l]=a.useState(!1),{t:o}=(0,h.$)(),{showMessage:s}=(0,ze.Z)(),c=qc();if(void 0===e)return a.createElement(Vc,null);const m=(0,rt.Z)(["links","uris"],e),d=(0,Ht.Z)("configuration",m),u=(0,r.Z)(d)?o(Ce):"",p=(0,r.Z)(d)?"disabled":"primary";return a.createElement(a.Fragment,null,(null==e?void 0:e.severity_level)&&a.createElement(Rn.ZP,{label:null==e?void 0:e.severity_level.toString(),severityCode:Rn.Zs.None}),a.createElement(Rn.ZP,{label:o(e.status.name),severityCode:e.status.severity_code}),a.createElement("div",null,a.createElement("div",{"aria-label":`${e.name}_hover`,className:c.resourceName,onMouseEnter:()=>{l(!0)},onMouseLeave:()=>{l(!1)}},a.createElement(hn.Z,{className:c.truncated},e.name),a.createElement("div",{className:c.resourceNameConfigurationIcon},i&&a.createElement(Te.ZP,{title:u},a.createElement("div",null,a.createElement(ke.Z,{"aria-label":`${o(ue)}_${e.name}`,className:c.resourceNameConfigurationLink,href:d},a.createElement(He.Z,{color:p,fontSize:"small"})))))),(0,Rc.Z)(["parent","status"],e)&&a.createElement("div",{className:c.parent},a.createElement(Rn.ZP,{severityCode:(null===(n=e.parent.status)||void 0===n?void 0:n.severity_code)||Rn.Zs.None}),a.createElement(Po,{name:e.parent.name,variant:"caption",onSelect:()=>t(e.parent)}))),a.createElement(Gc,{resourceUris:m}),a.createElement(Ve.Z,{ariaLabel:o(pe),size:"small",title:o(pe),onClick:()=>{try{(0,En.Z)(window.location.href),s({message:o("Resource link copied to the clipboard"),severity:qe.Z.success})}catch(e){s({message:o(ne),severity:qe.Z.error})}}},a.createElement(Zn.Z,{fontSize:"small"})))},Uc=tt({Component:({details:e,onSelectParent:t})=>{const n=zc({displaySeverity:(0,Fe.Z)((0,r.Z)(null==e?void 0:e.severity_level))});return a.createElement("div",{className:n.header},a.createElement(Wc,{details:e,onSelectParent:t}))},memoProps:["details"]}),Qc=a.createContext({bottom:0,top:0}),Bc=()=>{var e;const{t}=(0,h.$)(),n=(0,mn.Z)(),i=a.useRef(),{openDetailsTabId:l,details:o,panelWidth:s,setOpenDetailsTabId:m,clearSelectedResource:p,setPanelWidth:Z,selectResource:v}=c();a.useEffect((()=>{var e;(0,r.Z)(o)||(null===(e=qo.find((0,d.Z)("id",l)))||void 0===e?void 0:e.getIsActive(o))||m(0)}),[o]);const E=()=>(0,r.Z)(o)?qo:qo.filter((({getIsActive:e})=>e(o)));return a.createElement(Qc.Provider,{value:(0,g.Z)(["top","bottom"],(null===(e=i.current)||void 0===e?void 0:e.getBoundingClientRect())||{bottom:0,top:0})},a.createElement(Nc.Z,{header:a.createElement(Uc,{details:o,onSelectParent:v}),headerBackgroundColor:(()=>{const{downtimes:e,acknowledgement:t}=o||{},a=Qo(n).find((({condition:n})=>n({acknowledged:!(0,r.Z)(t),in_downtime:(0,jt.Z)((0,Mc.Z)([]),u.Z,Fe.Z)(e)})));return(0,r.Z)(a)?n.palette.common.white:(0,dn.Fq)(a.color,.8)})(),memoProps:[l,o,s],ref:i,selectedTab:a.createElement(Wo,{details:o,id:l}),selectedTabId:(e=>{const t=(0,Dc.Z)((0,d.Z)("id",e),E());return t>0?t:0})(l),tabs:E().map((({id:e,title:n})=>{return a.createElement(_c.Z,{disabled:(0,r.Z)(o),key:e,label:(0,r.Z)(o)?a.createElement(dt.Z,{width:60}):t(n),onClick:(i=e,()=>{m(i)})});var i})),width:s,onClose:p,onResize:Z}))};var Kc=n(20525),Yc=n(74732),Jc=n(10458);const Xc="centreon-resource-status-21.04-",em=({cachedItem:e,defaultValue:t,onCachedItemUpdate:n,key:a})=>{if(!(0,r.Z)(e))return e;const i=localStorage.getItem(a);if((0,r.Z)(i))return t;const l=JSON.parse(i);return n(l),l},tm=({value:e,key:t})=>{localStorage.setItem(t,JSON.stringify(e))},nm=`${Xc}filter`,am=`${Xc}filter-expanded`;let rm,im;const lm=Ua.hM.object({criterias:Ua.hM.array(Ua.hM.object({name:Ua.hM.string,object_type:Ua.hM.nullable(Ua.hM.string),type:Ua.hM.string,value:Ua.hM.optional(Ua.hM.oneOf([Ua.hM.string,Ua.hM.array(Ua.hM.object({id:Ua.hM.oneOf([Ua.hM.number,Ua.hM.string],"FilterCriteriaMultiSelectId"),name:Ua.hM.string},"FilterCriteriaMultiSelectValue"),"FilterCriteriaValues"),Ua.hM.tuple([Ua.hM.string,Ua.hM.oneOf([Ua.hM.isExactly("asc"),Ua.hM.isExactly("desc")],"FilterCriteriaSortOrder")],"FilterCriteriaTuple")],"FilterCriteriaValue"))},"FilterCriterias"),"FilterCriterias"),id:Ua.hM.number,name:Ua.hM.string},"CustomFilter"),om=(0,Qa.Z)({entityDecoder:lm,entityDecoderName:"CustomFilter",listingDecoderName:"CustomFilters"});var sm=n(72841),cm=n(81357),mm=n(75528),dm=n(91450);const um=()=>{const e=em({cachedItem:rm,defaultValue:Mt,key:nm,onCachedItemUpdate:e=>{rm=e}}),t=(0,Jc.g)(),n=t.filter;if(Array.isArray(null==n?void 0:n.criterias)){const e=t.filter,n=(0,jt.Z)((0,Lt.Z)((0,sm.Z)((0,Ht.Z)("name"))),(0,fr.Z)((0,cm.Z)(mm.Z),{}),Ea.Z)([Ot.criterias,e.criterias]);return Object.assign(Object.assign({},(0,dm.Z)(Dt,e)),{criterias:n})}return e},pm=()=>{const{t:e}=(0,h.$)(),{sendRequest:t,sending:n}=(0,Ge.Z)({decoder:om,request:Ke}),[i,l]=a.useState([]),[o,s]=a.useState(um()),[c,m]=a.useState(um().criterias.find((0,d.Z)("name","search")).value),[u,g]=a.useState((()=>{const e=em({cachedItem:im,defaultValue:!1,key:am,onCachedItemUpdate:e=>{im=e}}),t=(0,Jc.g)();return(0,r.Z)(t.filterExpanded)?e:t.filterExpanded})()),[Z,v]=a.useState(!1),E=()=>t().then((({result:e})=>(l(e.map((0,_e.Z)(["order"]))),e))),f=({name:e,value:t})=>{const n=(0,Dc.Z)((0,d.Z)("name",e))(o.criterias),a=(0,Kc.Z)(["criterias",n,"value"]);return(0,Yc.Z)(a,t,o)},b=[Mt,Ot,Nt,...i];a.useEffect((()=>{E()}),[]);const y=({name:e,value:t})=>{s(f({name:e,value:t}))};(0,Pc.Z)((()=>{y({name:"search",value:c})}),[...(0,Gt.Z)((0,d.Z)("name","search"),o.criterias)]),a.useEffect((()=>{const e=f({name:"search",value:c});(e=>{tm({key:nm,value:e})})(e);const t=[{name:"filter",value:e}];(0,Jc.e)(t)}),[o,c]),a.useEffect((()=>{if(!(0,Jc.g)().fromTopCounter)return;(0,Jc.e)([{name:"fromTopCounter",value:!1}]),s(um());const{criterias:e}=um(),t=(0,p.Z)((0,d.Z)("name","search"))(e);m((null==t?void 0:t.value)||"")}),[(0,Jc.g)().fromTopCounter]),a.useEffect((()=>()=>{rm=null,im=null})),a.useEffect((()=>{(0,Jc.e)([{name:"filterExpanded",value:u}]),(e=>{tm({key:am,value:e})})(u)}),[u]);const C=f({name:"search",value:c});return{customFilters:i,customFiltersLoading:n,editPanelOpen:Z,filter:o,filterExpanded:u,filters:b,getCriteriaValue:e=>{const t=(0,p.Z)((0,d.Z)("name",e))(o.criterias);if(!(0,r.Z)(t))return t.value},getMultiSelectCriterias:()=>{const e=e=>Pt[e];return(0,jt.Z)((0,Gt.Z)((t=>(0,jt.Z)((({name:e})=>e),e,r.Z)(t))),(0,er.Z)((({name:t})=>e(t).sortId)))(o.criterias)},loadCustomFilters:E,nextSearch:c,setCriteria:y,setCriteriaAndNewFilter:({name:e,value:t})=>{const n=Rt(o);s(Object.assign(Object.assign({},f({name:e,value:t})),!n&&Dt))},setCustomFilters:l,setEditPanelOpen:v,setFilter:s,setNewFilter:()=>{Rt(o)||s({criterias:o.criterias,id:"",name:e(ie)})},setNextSearch:m,toggleFilterExpanded:()=>{g(!u)},updatedFilter:C}},gm=()=>{const{t:e}=(0,h.$)();return a.createElement(a.Fragment,null,a.createElement("p",{style:{margin:0}},`${e("Seems that your Apache configuration is not up-to-date")}.`),a.createElement("p",{style:{margin:0}},`${e("Contact your Centreon administrator or update the following file")} : /opt/rh/httpd24/root/etc/httpd/conf.d/10-centreon.conf`),a.createElement("p",{style:{margin:0}},a.createElement(ke.Z,{color:"inherit",href:"https://docs.centreon.com/21.04/en/upgrade/upgrade-from-19-10.html#configure-apache-api-access",target:"_blank"},`( ${e("See Documentation")} )`)))},hm=`${Xc}column-ids`;let Zm;const vm="centreon-resource-status-details-21.04";let Em;var fm=n(7110),bm=n(26007),ym=n(33681),Cm=n(74656),wm=n(63508),Sm=n(901),km=n(28428),Tm=n(31590);const xm=(0,Z.Z)((e=>({filterCard:{alignItems:"center",display:"grid",gridAutoFlow:"column",gridGap:e.spacing(2),gridTemplateColumns:"auto 1fr"}}))),Pm=tt({Component:({filter:e,currentFilter:t,customFilters:n,setFilter:r,setCustomFilters:i,setNewFilter:l})=>{const o=xm(),{t:s}=(0,h.$)(),{showMessage:c}=(0,ze.Z)(),[m,u]=a.useState(!1),{sendRequest:p,sending:g}=(0,Ge.Z)({request:Je}),{sendRequest:Z,sending:v}=(0,Ge.Z)({request:et}),{name:E,id:f}=e,b=at.Ry().shape({name:at.Z_().required(s("Name cannot be empty"))}),y=(0,nt.TA)({enableReinitialize:!0,initialValues:{name:E},onSubmit:a=>{const l=Object.assign(Object.assign({},e),{name:a.name});p({filter:(0,_e.Z)(["id"],l),id:l.id}).then((()=>{c({message:s("Filter updated"),severity:qe.Z.success}),(0,Re.Z)(l.id,t.id)&&r(l);const e=(0,Dc.Z)((0,d.Z)("id",l.id),n);i((0,Sm.Z)(e,l,n))}))},validationSchema:b}),C=(0,kr.Z)((0,Re.Z)(!0),[v,g]),w=(0,Qr.Z)((0,Re.Z)(!0),[y.isValid,y.dirty]),S=()=>{w&&y.submitForm()};return a.createElement("div",{className:o.filterCard},a.createElement(lr.Z,{alignCenter:!1,loading:C,loadingIndicatorSize:24},a.createElement(Ve.Z,{title:s(se),onClick:()=>{u(!0)}},a.createElement(km.Z,{fontSize:"small"}))),a.createElement(lt.Z,{transparent:!0,ariaLabel:`${s("Filter")}-${f}-${s(le)}`,error:y.errors.name,value:y.values.name,onBlur:S,onChange:y.handleChange("name"),onKeyDown:e=>{13===e.keyCode&&S()}}),m&&a.createElement(Tm.Z,{open:!0,labelCancel:s(T),labelConfirm:s(se),labelTitle:s("Delete filter?"),onCancel:()=>{u(!1)},onConfirm:()=>{u(!1),Z(e).then((()=>{c({message:s("Filter deleted"),severity:qe.Z.success}),(0,Re.Z)(e.id,t.id)&&l(),i((0,Gt.Z)((0,Re.Z)(e),n))}))}}))},memoProps:["filter","currentFilter","customFilters"]}),Om=({filter:e})=>{const{setFilter:t,filter:n,setCustomFilters:r,customFilters:i,setNewFilter:l}=c();return a.createElement(Pm,{currentFilter:n,customFilters:i,filter:e,setCustomFilters:r,setFilter:t,setNewFilter:l})},Dm=(0,Z.Z)((e=>({container:{width:"100%"},filterCard:{alignItems:"center",display:"grid",gridGap:e.spacing(2),gridTemplateColumns:"1fr auto",padding:e.spacing(1)},filters:{display:"grid",gridAutoFlow:"row",gridGap:e.spacing(3),gridTemplateRows:"1fr",width:"100%"},header:{alignItems:"center",display:"flex",height:"100%",justifyContent:"center"},loadingIndicator:{height:e.spacing(1),marginBottom:e.spacing(1),width:"100%"}}))),Mm=()=>{const e=Dm(),{t}=(0,h.$)(),{customFilters:n,setEditPanelOpen:i,setCustomFilters:l}=c(),{sendRequest:o,sending:s}=(0,Ge.Z)({request:Xe}),m=[{expandable:!1,id:"edit",section:a.createElement("div",{className:e.container},a.createElement("div",{className:e.loadingIndicator},s&&a.createElement(ym.Z,{style:{width:"100%"}})),a.createElement(fm.Z5,{onDragEnd:({draggableId:e,source:t,destination:a})=>{const i=Number(e);if((0,r.Z)(a))return;const s=(0,bm.Z)(t.index,a.index,n);l(s),o({id:i,order:a.index})}},a.createElement(fm.bK,{droppableId:"droppable"},(t=>a.createElement("div",Object.assign({className:e.filters,ref:t.innerRef},t.droppableProps),null==n?void 0:n.map(((t,n)=>a.createElement(fm._l,{draggableId:`${t.id}`,index:n,key:t.id},(n=>a.createElement(Pn.Z,Object.assign({square:!0,className:e.filterCard,ref:n.innerRef},n.draggableProps),a.createElement(Om,{filter:t}),a.createElement("div",Object.assign({},n.dragHandleProps),a.createElement(Cm.Z,null))))))),t.placeholder)))))}],d=a.createElement("div",{className:e.header},a.createElement(hn.Z,{align:"center",variant:"h6"},t(oe)));return a.createElement(wm.h,{header:d,memoProps:[n],sections:m,onClose:()=>{i(!1)}})},Nm=tt({Component:({editPanelOpen:e,selectedResourceId:t})=>a.createElement(i.Z,{open:e,panel:a.createElement(Mm,null)},a.createElement(l.Z,{filters:a.createElement(on,null),listing:a.createElement(Oc,null),panel:a.createElement(Bc,null),panelOpen:!(0,r.Z)(t)})),memoProps:["editPanelOpen","selectedResourceId"]}),_m=(0,o.Z)((()=>{const e=(()=>{const[e,t]=a.useState(),[n,r]=a.useState(30),[i,l]=a.useState(),[o,s]=a.useState(!0),[c,m]=a.useState(em({cachedItem:Zm,defaultValue:Tc,key:hm,onCachedItemUpdate:e=>{Zm=e}}));a.useEffect((()=>{tm({key:hm,value:c})}),[c]),a.useEffect((()=>()=>{Zm=null}));const{sendRequest:d,sending:u}=(0,Ge.Z)({getErrorMessage:(0,ai.Z)((0,ti.Z)(["response","status"],404),(0,ea.Z)(gm),(0,rr.Z)(ne,["response","data","message"])),request:Co});return{enabledAutorefresh:o,limit:n,listing:e,page:i,selectedColumnIds:c,sendRequest:d,sending:u,setEnabledAutorefresh:s,setLimit:r,setListing:t,setPage:l,setSelectedColumnIds:m}})(),t=pm(),n=(()=>{const[e,t]=a.useState(0),[n,i]=a.useState(),[l,o]=a.useState(),[s,c]=a.useState(),[m,d]=a.useState(),[u,p]=a.useState(),[g,Z]=a.useState(),[v,E]=a.useState({}),[f,b]=a.useState(em({cachedItem:Em,defaultValue:550,key:vm,onCachedItemUpdate:e=>{Em=e}})),{t:y}=(0,h.$)(),{sendRequest:C}=(0,Ge.Z)({getErrorMessage:(0,ai.Z)((0,ti.Z)(["response","status"],404),(0,ea.Z)(y("No resource found")),(0,rr.Z)(y(ne),["response","data","message"])),request:Ue.Yu});a.useEffect((()=>{const e=(0,Jc.g)().details;if((0,r.Z)(e))return;const{uuid:n,id:a,parentId:l,type:s,parentType:m,tab:u,tabParameters:g}=e;(0,r.Z)(u)||t((e=>{const t=Uo[e];return(0,r.Z)(t)?0:t})(u)),i(n),o(a),c(l),d(s),p(m),E(g||{})}),[]),a.useEffect((()=>{var t;(0,Jc.e)([{name:"details",value:{id:l,parentId:s,parentType:u,tab:(t=e,(0,pn.Z)(Uo)[t]),tabParameters:v,type:m,uuid:n}}])}),[e,l,m,u,u,v]);const w=()=>(0,r.Z)(s)?`${Qe}/${m}s/${l}`:`${Qe}/${u}s/${s}/${m}s/${l}`,S=()=>{i(void 0),o(void 0),c(void 0),p(void 0),d(void 0)},k=()=>{(0,r.Z)(l)||C(w()).then(Z).catch((()=>{S()}))};return a.useEffect((()=>{Z(void 0),k()}),[n]),a.useEffect((()=>{(e=>{tm({key:vm,value:e})})(f)}),[f]),{clearSelectedResource:S,details:g,getSelectedResourceDetailsEndpoint:w,loadDetails:k,openDetailsTabId:e,panelWidth:f,selectResource:e=>{var n,a;t(0),i(e.uuid),o(e.id),d(e.type),p(null===(n=null==e?void 0:e.parent)||void 0===n?void 0:n.type),c(null===(a=null==e?void 0:e.parent)||void 0===a?void 0:a.id)},selectedResourceId:l,selectedResourceParentId:s,selectedResourceUuid:n,setGraphTabParameters:e=>{E(Object.assign(Object.assign({},v),{graph:e}))},setOpenDetailsTabId:t,setPanelWidth:b,setSelectedResourceId:o,setSelectedResourceParentId:c,setSelectedResourceParentType:p,setSelectedResourceType:d,setSelectedResourceUuid:i,setServicesTabParameters:e=>{E(Object.assign(Object.assign({},v),{services:e}))},tabParameters:v}})(),i=(()=>{const[e,t]=a.useState([]),[n,r]=a.useState([]),[i,l]=a.useState([]),[o,s]=a.useState([]),[c,m]=a.useState([]);return{resourcesToAcknowledge:n,resourcesToCheck:o,resourcesToDisacknowledge:c,resourcesToSetDowntime:i,selectedResources:e,setResourcesToAcknowledge:r,setResourcesToCheck:s,setResourcesToDisacknowledge:m,setResourcesToSetDowntime:l,setSelectedResources:t}})(),{selectedResourceId:l}=n;return a.createElement(m.Provider,{value:Object.assign(Object.assign(Object.assign(Object.assign({},e),t),n),i)},a.createElement(Nm,{editPanelOpen:t.editPanelOpen,selectedResourceId:l}))}))}}]);