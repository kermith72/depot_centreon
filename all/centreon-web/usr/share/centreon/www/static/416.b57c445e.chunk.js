(self.webpackChunkname=self.webpackChunkname||[]).push([[416],{14628:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var s=r(67294),a=r(45697),l=r.n(a),n=r(94184),o=r.n(n),i=r(50455),c=r(91637),m=r(63391);const u=(e,t,r)=>s=>r(s.target.checked?e:t),p=e=>{var{checked:t,className:r,error:a,falseValue:l,fieldMsg:n,label:c,onBlur:p,onChange:d,trueValue:h,value:f,info:b}=e,g=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]])}return r}(e,["checked","className","error","falseValue","fieldMsg","label","onBlur","onChange","trueValue","value","info"]);return s.createElement("div",{className:o()(i.Z["form-group"],{[i.Z["has-danger"]]:!!a})},s.createElement("div",{className:o()(i.Z["custom-control"],i.Z["custom-checkbox orange"])},s.createElement("input",Object.assign({},(0,m.X)(g),{"aria-checked":t,checked:f,className:i.Z["custom-control-input"],defaultChecked:f===h,focusin:p&&u(h,l,p),type:"checkbox",onChange:d&&u(h,l,d)})),s.createElement("label",{className:i.Z["custom-control-label"],htmlFor:g.id},c,b)),a?s.createElement("div",{className:i.Z["invalid-feedback"]},s.createElement("div",{className:o()(i.Z.field__msg,i.Z["field__msg--error"])},a)):null)};p.displayName="CheckboxField",p.propTypes={className:l().string,error:l().element,falseValue:l().any,id:l().string.isRequired,label:l().string,trueValue:l().any,value:l().bool},p.defaultProps={className:i.Z.field,falseValue:!1,trueValue:!0};const d=(0,c.Z)(p)},32022:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var s=r(67294),a=r(94184),l=r.n(a),n=r(50455);const o=e=>{var{className:t,children:r,isError:a,tagName:o}=e,i=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]])}return r}(e,["className","children","isError","tagName"]);return s.createElement(o,Object.assign({className:l()(n.Z.field__msg,n.Z[t],{[n.Z["field__msg--error"]]:!!a})},i),r)};o.defaultProps={className:"",isError:!0,tagName:"div"};const i=o},89735:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var s=r(67294),a=r(45697),l=r.n(a),n=r(94184),o=r.n(n),i=r(50455),c=r(91637),m=r(63391),u=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]])}return r};const p=(e,t)=>{if("string"==typeof e)return s.createElement("option",{key:t,value:e},e);if(e.subOptions){const{subOptions:r,text:a,value:l}=e,n=u(e,["subOptions","text","value"]);return s.createElement("optgroup",Object.assign({key:`optgroup-${t}`,label:a,value:l},n),r.map(((e,r)=>p(e,`${t}-${r}`))))}const{text:r,value:a}=e,l=u(e,["text","value"]);return s.createElement("option",Object.assign({key:t,value:a},l),r)},d=e=>{var{className:t,defaultOption:r,error:a,label:l,modifiers:n,options:c,styleOverride:d,topRightLabel:h}=e,f=u(e,["className","defaultOption","error","label","modifiers","options","styleOverride","topRightLabel"]);const[b,g,_]=r||[null,"",!0];return s.createElement("div",{className:o()(i.Z["form-group"],i.Z.select),style:d},l?s.createElement("label",null,s.createElement("span",null,l),s.createElement("span",{className:o()(i.Z["label-option"],i.Z.optional)},h||null)):null,s.createElement("select",Object.assign({className:o()(i.Z["form-control"],i.Z["custom-select"])},(0,m.X)(f)),!1!==r?s.createElement("option",{disabled:_,value:b},g):null,c.map(p)),a&&"Required"===h?s.createElement("div",{className:i.Z["invalid-feedback"]},a):null)};d.displayName="SelectField",d.propTypes={defaultOption:l().oneOfType([l().array,l().bool]),error:l().element,options:l().array},d.defaultProps={className:i.Z.field,defaultOption:!1,modifiers:[],options:[],styleOverride:{}};const h=(0,c.Z)(d)},91637:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var s=r(67294),a=r(45697),l=r.n(a),n=r(94184),o=r.n(n),i=r(50455);var c=r(32022);let m=0;const u=e=>{class t extends s.Component{constructor(e){super(e),this.state={isFocused:!1},["getId","handleFocus","handleBlur","isInputValue","renderError"].map((e=>this[e]=this[e].bind(this)))}handleFocus(e){const{input:{onFocus:t}}=this.props;this.setState({isFocused:!0}),t&&t(e)}handleBlur(){const{input:{onBlur:e,value:t}}=this.props;if(this.setState({isFocused:!1}),e)return e(t)}getId(){const{name:e}=this.props.input;return this.fieldId||(this.fieldId=++m),`field-${e}-${this.fieldId}`}isInputValue(e){return null!=e&&""!==e}renderError(){const{meta:{touched:e,error:t}}=this.props;return e&&t?s.createElement(c.Z,null,(e=>{if("string"==typeof e)return e;const{name:t,type:r,value:s,message:a}=e;if(a)return a;switch(r){case"required":return`${t||"This field"} is required`;case"email":return"Please enter a valid email address";case"maxLength":return Array.isArray(s)?`${t||"Field"} must have at most ${e.maxLength} items`:`${t||"Field"} must be at most ${e.maxLength} characters long`;case"minLength":return Array.isArray(s)?`${t||"Field"} must have at least ${e.minLength} items`:`${t||"Field"} must be at least ${e.minLength} characters long`;case"invalidDate":return`${t||"Field"} is not valid`;default:return`${t||"Field"} is invalid. Reason: ${e.reason}`}})(t)):null}render(){const{isFocused:t}=this.state,r=this.props,{input:a,meta:l,label:n,autoComplete:c}=r,m=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]])}return r}(r,["input","meta","label","autoComplete"]),u="off"===c?{autoComplete:this.getId()}:{};return s.createElement(e,Object.assign({className:o()(i.Z.field,{[i.Z["has-danger"]]:l.invalid&&l.touched},{[i.Z["has-value"]]:this.isInputValue(a.value)},{[i.Z["has-focus"]]:t})},a,m,u,{error:this.renderError(),id:this.getId(),label:n,onBlur:this.handleBlur,onFocus:this.handleFocus}))}}return t.displayName=`FieldHoc(${e.displayName})`,t.propTypes={input:l().object.isRequired,label:l().string,meta:l().object.isRequired,onBlur:l().func,onFocus:l().func},t}},63391:(e,t,r)=>{"use strict";r.d(t,{X:()=>s});const s=(0,r(90178).Z)(["type","name","value","checked","disabled","id","placeholder","autoComplete","autoFocus","multiple","required","step","max","min","rows","pattern","maxlength","onFocus","onChange","onInput","onBlur","onClick","style","defaultValue","readonly"])},75481:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var s=r(67294);const a=(0,r(41120).Z)((e=>({page:{backgroundColor:e.palette.common.white,padding:e.spacing(2,0)}}))),l=({children:e})=>{const t=a();return s.createElement("div",{className:t.page},e)}},91395:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var s=r(67294),a=r(14494),l=r(94184),n=r.n(l),o=r(12971);const i={"progress-bar":"progress-bar__3ExoA","progress-bar-items":"progress-bar-items__19zW7","progress-bar-item":"progress-bar-item__1Bp7Q","progress-bar-link":"progress-bar-link__Db6pc",active:"active__1Rb7k",prev:"prev__9yZj4"};class c extends s.Component{constructor(){super(...arguments),this.goToPath=e=>{o.m.push(e)}}render(){const{links:e}=this.props;return s.createElement("div",{className:i["progress-bar"]},s.createElement("div",{className:i["progress-bar-wrapper"]},s.createElement("ul",{className:i["progress-bar-items"]},e?e.map((e=>s.createElement("li",{className:i["progress-bar-item"],key:e.path,onClick:this.goToPath.bind(this,e.path)},s.createElement("span",{className:n()(i["progress-bar-link"],{[i.active]:e.active},{[i.prev]:e.prevActive})},e.number)))):null)))}}const m=(0,a.connect)((()=>({})),{})(c)},24416:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>E});var s=r(67294),a=r(14494),l=r(91755),n=r(65399),o=r(15958),i=r(91768),c=r(10876),m=r(50455),u=r(89735),p=r(14628),d=r(91637);class h extends s.Component{constructor(){super(...arguments),this.state={selectedAdditionals:[],selectedMaster:null},this.getAvailableAdditionals=()=>{const{pollers:e}=this.props,{selectedMaster:t}=this.state;return e.filter((e=>{if(e.id!==t)return!0}))},this.handleChangeMaster=(e,t)=>{const{change:r}=this.props,{selectedAdditionals:s}=this.state,a=t?s.filter((e=>{if(e.value!==t)return!0})):[];r("linked_remote_slaves",a),this.setState({selectedAdditionals:a,selectedMaster:t})},this.handleChangeAdditionals=(e,t)=>{this.setState({selectedAdditionals:t})}}render(){const{error:e,handleSubmit:t,onSubmit:r,pollers:a,t:l}=this.props,{selectedMaster:o}=this.state,i=this.getAvailableAdditionals();return s.createElement("div",{className:m.Z["form-wrapper"]},s.createElement("div",{className:m.Z["form-inner"]},s.createElement("form",{autoComplete:"off",onSubmit:t(r)},a.length?s.createElement(s.Fragment,null,s.createElement("h2",{className:m.Z["form-title"]},l("Attach poller to a master remote server")),s.createElement(n.Z,{component:u.Z,name:"linked_remote_master",options:[{text:"",value:null}].concat(a.map((e=>({label:e.name,text:e.name,value:e.id})))),value:o,onChange:this.handleChangeMaster})):null,o&&a.length>=2?s.createElement(s.Fragment,null,s.createElement("h2",{className:m.Z["form-title"]},l("Attach poller to additional remote servers")),s.createElement("div",{className:m.Z["form-item"]},s.createElement(n.Z,{isMulti:!0,component:(0,d.Z)(c.ZP),name:"linked_remote_slaves",options:i.map((e=>({label:e.name,value:e.id}))),onChange:this.handleChangeAdditionals}))):null,s.createElement(n.Z,{component:p.Z,defaultValue:!1,label:l("Advanced: reverse Centreon Broker communication flow"),name:"open_broker_flow"}),s.createElement("div",{className:m.Z["form-buttons"]},s.createElement("button",{className:m.Z.button,type:"submit"},l("Apply"))),e?s.createElement("div",{className:m.Z["error-block"]},e.message):null)))}}const f=(0,i.Z)()((0,o.Z)({destroyOnUnmount:!1,enableReinitialize:!0,form:"PollerFormStepTwo",keepDirtyOnReinitialize:!0})(h));var b=r(91395),g=r(40346),_=r(66791),v=r(93784),y=r(75481);class Z extends s.Component{constructor(){super(...arguments),this.state={pollers:[]},this.links=[{active:!0,number:1,path:g.Z.serverConfigurationWizard,prevActive:!0},{active:!0,number:2,path:g.Z.pollerStep1,prevActive:!0},{active:!0,number:3},{active:!1,number:4}],this.pollerListApi=(0,_.Z)("internal.php?object=centreon_configuration_remote&action=getRemotesList"),this.wizardFormApi=(0,_.Z)("internal.php?object=centreon_configuration_remote&action=linkCentreonRemoteServer"),this.getPollers=()=>{this.pollerListApi.post().then((e=>{this.setState({pollers:e.data})}))},this.componentDidMount=()=>{this.getPollers()},this.handleSubmit=e=>{const{history:t,pollerData:r,setPollerWizard:s}=this.props,a=Object.assign(Object.assign({},e),r);return a.server_type="poller",this.wizardFormApi.post("",a).then((e=>{s({submitStatus:e.data.success}),r.linked_remote_master?t.push(g.Z.pollerStep3):t.push(g.Z.pollerList)})).catch((e=>{throw new l.t({_error:new Error(e.response.data)})}))}}render(){const{links:e}=this,{pollerData:t}=this.props,{pollers:r}=this.state;return s.createElement(y.Z,null,s.createElement(b.Z,{links:e}),s.createElement(f,{initialValues:t,pollers:r,onSubmit:this.handleSubmit.bind(this)}))}}const O={setPollerWizard:v.b},E=(0,a.connect)((({pollerForm:e})=>({pollerData:e})),O)(Z)},50455:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});const s={"mb-2":"mb-2__3ziC8","list-unstyled":"list-unstyled__22dT_","half-opacity":"half-opacity__pVrav",hidden:"hidden__2MmTV","hidden-input":"hidden-input__17ABM",form:"form__2Eo40","form-wrapper":"form-wrapper__3Vj5F","invalid-feedback":"invalid-feedback__861fm",field__msg:"field__msg__2bkLY","css-1aya2g8":"css-1aya2g8__3Mj2-","css-2o5izw":"css-2o5izw__vgrW9",installation:"installation__2tyHH","form-text":"form-text__38UQT","form-status":"form-status__1Jizt",valid:"valid__TnZJh",failed:"failed__Pj07C","form-error-message":"form-error-message__3733_","form-group":"form-group__eh-xb","form-control":"form-control__1di15",select:"select__2p_Pd","form-heading":"form-heading__1HUPk","form-title":"form-title__3zm4r","form-item":"form-item__2fci6","form-buttons":"form-buttons__bCZYt",button:"button__OpHrr","custom-checkbox":"custom-checkbox__3HsKc","custom-radio":"custom-radio__3atRb","custom-control":"custom-control__10jfe","form-check-input":"form-check-input__3A16L","custom-control-input":"custom-control-input__lHvVk","custom-control-label":"custom-control-label__pOdWy","error-block":"error-block__1jL9V","css-10odw4q":"css-10odw4q__3s7Y1","css-1492t68":"css-1492t68__3OcCx","css-10nd86i":"css-10nd86i__3fhBC"}},90178:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});const s=(0,r(81353).Z)((function(e,t){for(var r={},s=0;s<e.length;)e[s]in t&&(r[e[s]]=t[e[s]]),s+=1;return r}))}}]);